(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31913,e=>{"use strict";var s=e.i(30098),a=e.i(84736),t=e.i(63480),l=e.i(92393),r=e.i(83675),n=e.i(71058),i=e.i(5378),c=e.i(30754),d=e.i(44007),o=e.i(27651);function m({experienceId:e}){let[i,d]=(0,a.useState)(!0),[m,u]=(0,a.useState)("all"),[j,g]=(0,a.useState)(null),[p,N]=(0,a.useState)([]),[f,v]=(0,a.useState)([]),[C,b]=(0,a.useState)(null),[y,S]=(0,a.useState)(!1),w=async(e,s)=>{try{let a=new URLSearchParams({period:e||m,limit:"20"});s&&C&&a.set("cursor",C);let t=await fetch(`/api/sellers/earnings?${a}`);if(t.ok){let e=await t.json();g(e.summary),s?N(s=>[...s,...e.payouts]):(N(e.payouts),v(e.recentPurchases)),b(e.nextCursor),S(!!e.nextCursor)}}catch(e){console.error("Error fetching earnings:",e)}finally{d(!1)}};if((0,a.useEffect)(()=>{w()},[]),i)return(0,s.jsx)(h,{});let A=[{label:"Total Earnings",value:(0,o.formatCents)(j?.totalEarnings||0),icon:t.MdAttachMoney,iconBg:"bg-success/10",iconColor:"text-success"},{label:"Pending",value:(0,o.formatCents)(j?.pendingEarnings||0),icon:t.MdSchedule,iconBg:"bg-warning/10",iconColor:"text-warning"},{label:"Completed Payouts",value:j?.completedPayouts.toString()||"0",icon:t.MdCheck,iconBg:"bg-primary/10",iconColor:"text-primary"},{label:"Sessions Completed",value:j?.completedSessions.toString()||"0",icon:t.MdArrowUpward,iconBg:"bg-muted",iconColor:"text-foreground"}];return(0,s.jsxs)("div",{className:"p-4 sm:p-6 md:p-8",children:[(0,s.jsxs)("div",{className:"mb-6 flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-foreground",children:"Earnings"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1",children:"Track your earnings and payout history"})]}),(0,s.jsxs)(c.Select,{value:m,onValueChange:e=>{u(e),d(!0),w(e)},children:[(0,s.jsx)(c.SelectTrigger,{className:"w-[140px]",children:(0,s.jsx)(c.SelectValue,{placeholder:"Period"})}),(0,s.jsxs)(c.SelectContent,{children:[(0,s.jsx)(c.SelectItem,{value:"all",children:"All Time"}),(0,s.jsx)(c.SelectItem,{value:"week",children:"This Week"}),(0,s.jsx)(c.SelectItem,{value:"month",children:"This Month"}),(0,s.jsx)(c.SelectItem,{value:"year",children:"This Year"})]})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:A.map(e=>(0,s.jsx)(l.Card,{children:(0,s.jsx)(l.CardContent,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:(0,o.cn)("h-10 w-10 rounded-full flex items-center justify-center",e.iconBg),children:(0,s.jsx)(e.icon,{className:(0,o.cn)("h-5 w-5",e.iconColor)})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:e.label}),(0,s.jsx)("p",{className:"text-2xl font-semibold text-foreground",children:e.value})]})]})})},e.label))}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,s.jsxs)(l.Card,{children:[(0,s.jsx)(l.CardHeader,{children:(0,s.jsx)(l.CardTitle,{className:"text-lg",children:"Fee Breakdown"})}),(0,s.jsx)(l.CardContent,{children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Total Sales"}),(0,s.jsx)("span",{className:"font-medium",children:(0,o.formatCents)(j?.totalSales||0)})]}),(0,s.jsxs)("div",{className:"flex justify-between text-destructive",children:[(0,s.jsx)("span",{children:"Fees Paid"}),(0,s.jsxs)("span",{children:["-",(0,o.formatCents)(j?.totalFees||0)]})]}),(0,s.jsxs)("div",{className:"border-t pt-3 flex justify-between",children:[(0,s.jsx)("span",{className:"font-medium",children:"Net Earnings"}),(0,s.jsx)("span",{className:"font-semibold text-success",children:(0,o.formatCents)(j?.netEarnings||0)})]})]})})]}),(0,s.jsxs)(l.Card,{children:[(0,s.jsx)(l.CardHeader,{children:(0,s.jsx)(l.CardTitle,{className:"text-lg",children:"Recent Purchases"})}),(0,s.jsx)(l.CardContent,{children:0===f.length?(0,s.jsx)("div",{className:"text-center py-6",children:(0,s.jsx)("p",{className:"text-muted-foreground",children:"No purchases yet"})}):(0,s.jsx)("div",{className:"space-y-3",children:f.slice(0,5).map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)(n.Avatar,{className:"h-8 w-8",children:[(0,s.jsx)(n.AvatarImage,{src:e.buyerAvatar||void 0}),(0,s.jsx)(n.AvatarFallback,{children:(0,o.getInitials)(e.buyerName)})]}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-foreground truncate",children:e.buyerName||"Anonymous"}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.units/2," ",e.units>2?"hours":"hour"]})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsxs)("p",{className:"text-sm font-medium text-success",children:["+",(0,o.formatCents)(e.sellerReceives)]})})]},e.id))})})]})]}),(0,s.jsxs)(l.Card,{children:[(0,s.jsx)(l.CardHeader,{children:(0,s.jsx)(l.CardTitle,{className:"text-lg",children:"Payout History"})}),(0,s.jsx)(l.CardContent,{children:0===p.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(t.MdAttachMoney,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"No payouts yet"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Complete sessions to earn payouts"})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[p.map(e=>(0,s.jsx)(x,{payout:e},e.id)),y&&(0,s.jsx)(r.Button,{variant:"outline",className:"w-full",onClick:()=>w(void 0,!0),children:"Load More"})]})})]})]})}function x({payout:e}){let a={COMPLETED:{label:"Completed",variant:"secondary",icon:t.MdCheck},PENDING:{label:"Pending",variant:"default",icon:t.MdSchedule},PROCESSING:{label:"Processing",variant:"default",icon:t.MdRefresh},FAILED:{label:"Failed",variant:"destructive",icon:t.MdClose}},l=a[e.status]||a.PENDING;return(0,s.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-lg font-semibold text-foreground",children:(0,o.formatCents)(e.amount)}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:(0,o.formatDateTime)(e.processedAt||e.createdAt)})]}),(0,s.jsxs)(i.Badge,{variant:l.variant,className:"flex items-center gap-1",children:[(0,s.jsx)(l.icon,{className:"h-3 w-3"}),l.label]})]}),e.failureReason&&(0,s.jsx)("p",{className:"text-sm text-destructive mb-3",children:e.failureReason}),e.sessions.length>0&&(0,s.jsxs)("div",{className:"border-t pt-3",children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-2",children:"Sessions included:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:e.sessions.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsxs)(n.Avatar,{className:"h-6 w-6",children:[(0,s.jsx)(n.AvatarImage,{src:e.buyerAvatar||void 0}),(0,s.jsx)(n.AvatarFallback,{className:"text-xs",children:(0,o.getInitials)(e.buyerName)})]}),(0,s.jsx)("span",{className:"text-muted-foreground truncate max-w-[120px]",children:e.topic})]},e.id))})]})]})}function h(){return(0,s.jsxs)("div",{className:"p-4 sm:p-6 md:p-8",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)(d.Skeleton,{className:"h-8 w-48"}),(0,s.jsx)(d.Skeleton,{className:"h-4 w-64 mt-2"})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[void 0,void 0,void 0,void 0].map((e,a)=>(0,s.jsx)(l.Card,{children:(0,s.jsx)(l.CardContent,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(d.Skeleton,{className:"h-10 w-10 rounded-full"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.Skeleton,{className:"h-4 w-20"}),(0,s.jsx)(d.Skeleton,{className:"h-6 w-16"})]})]})})},a))}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsx)(l.Card,{children:(0,s.jsx)(l.CardContent,{className:"p-6",children:(0,s.jsx)(d.Skeleton,{className:"h-32 w-full"})})}),(0,s.jsx)(l.Card,{children:(0,s.jsx)(l.CardContent,{className:"p-6",children:(0,s.jsx)(d.Skeleton,{className:"h-32 w-full"})})})]})]})}e.s(["SellerEarningsTab",()=>m])},93254,e=>{e.n(e.i(31913))}]);