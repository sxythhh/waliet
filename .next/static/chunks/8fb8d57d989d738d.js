(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,94607,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),r.isPlainObject=function(e){if("object"!=typeof e||null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){let t=e[Symbol.toStringTag];return null!=t&&!!Object.getOwnPropertyDescriptor(e,Symbol.toStringTag)?.writable&&e.toString()===`[object ${t}]`}let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}},89518,(e,t,r)=>{t.exports=e.r(94607).isPlainObject},92751,e=>{"use strict";var t,r,a,n,s,i=e.i(30098),l=e.i(84736),o=e.i(42495),c=e.i(44007),d=e.i(92393),u=e.i(63480),m=e.i(27651);function h({totalRevenue:e,revenueChange:t,totalSessions:r,averageOrderValue:a,totalBuyers:n}){let s=[{label:"Total Revenue",value:(0,m.formatCents)(e),change:t,icon:u.MdAttachMoney,iconBg:"bg-success/10",iconColor:"text-success"},{label:"Sessions",value:r.toString(),icon:u.MdCalendarToday,iconBg:"bg-primary/10",iconColor:"text-primary"},{label:"Avg Order Value",value:(0,m.formatCents)(a),icon:u.MdTrendingUp,iconBg:"bg-warning/10",iconColor:"text-warning"},{label:"Total Buyers",value:n.toString(),icon:u.MdPeople,iconBg:"bg-muted",iconColor:"text-foreground"}];return(0,i.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:s.map(e=>(0,i.jsx)(d.Card,{children:(0,i.jsx)(d.CardContent,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:(0,m.cn)("h-10 w-10 rounded-full flex items-center justify-center",e.iconBg),children:(0,i.jsx)(e.icon,{className:(0,m.cn)("h-5 w-5",e.iconColor)})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-muted-foreground",children:e.label}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("p",{className:"text-2xl font-semibold text-foreground",children:e.value}),void 0!==e.change&&(0,i.jsxs)("span",{className:(0,m.cn)("text-xs flex items-center",e.change>=0?"text-success":"text-destructive"),children:[e.change>=0?(0,i.jsx)(u.MdTrendingUp,{className:"h-3 w-3 mr-0.5"}):(0,i.jsx)(u.MdTrendingDown,{className:"h-3 w-3 mr-0.5"}),Math.abs(e.change).toFixed(1),"%"]})]})]})]})})},e.label))})}var p=e.i(29002),x=e.i(80030),f=e.i(4400),y=e.i(81669),v=e.i(54613),g=e.i(99499),b=e.i(60808),j=e.i(83675);function N({data:e,onPeriodChange:t}){let[r,a]=(0,l.useState)("daily"),n=e=>{let t=new Date(e);return"monthly"===r?t.toLocaleDateString("en-US",{month:"short"}):t.toLocaleDateString("en-US",{month:"short",day:"numeric"})};return(0,i.jsxs)(d.Card,{children:[(0,i.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,i.jsx)(d.CardTitle,{className:"text-lg",children:"Revenue"}),(0,i.jsx)("div",{className:"flex gap-1",children:["daily","weekly","monthly"].map(e=>(0,i.jsx)(j.Button,{size:"sm",variant:r===e?"default":"ghost",onClick:()=>{a(e),t?.(e)},className:"text-xs capitalize",children:e},e))})]}),(0,i.jsx)(d.CardContent,{children:(0,i.jsx)("div",{className:"h-[300px]",children:(0,i.jsx)(b.ResponsiveContainer,{width:"100%",height:"100%",children:(0,i.jsxs)(p.AreaChart,{data:e,margin:{top:10,right:10,left:0,bottom:0},children:[(0,i.jsx)("defs",{children:(0,i.jsxs)("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,i.jsx)("stop",{offset:"5%",stopColor:"hsl(var(--primary))",stopOpacity:.3}),(0,i.jsx)("stop",{offset:"95%",stopColor:"hsl(var(--primary))",stopOpacity:0})]})}),(0,i.jsx)(v.CartesianGrid,{strokeDasharray:"3 3",className:"stroke-muted"}),(0,i.jsx)(f.XAxis,{dataKey:"date",tickFormatter:n,tick:{fontSize:12},className:"text-muted-foreground"}),(0,i.jsx)(y.YAxis,{tickFormatter:e=>(0,m.formatCents)(e),tick:{fontSize:12},className:"text-muted-foreground",width:80}),(0,i.jsx)(g.Tooltip,{content:({active:t,payload:r,label:a})=>t&&r&&r.length?(0,i.jsxs)("div",{className:"bg-popover border rounded-lg p-3 shadow-lg",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-foreground",children:n(String(a))}),(0,i.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Revenue: ",(0,i.jsx)("span",{className:"font-medium text-primary",children:(0,m.formatCents)(r[0].value)})]}),(0,i.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Purchases: ",(0,i.jsx)("span",{className:"font-medium",children:e.find(e=>e.date===a)?.purchases||0})]})]}):null}),(0,i.jsx)(x.Area,{type:"monotone",dataKey:"revenue",stroke:"hsl(var(--primary))",strokeWidth:2,fillOpacity:1,fill:"url(#colorRevenue)"})]})})})})]})}var w=e.i(71058);function S({buyers:e}){return 0===e.length?(0,i.jsxs)(d.Card,{children:[(0,i.jsx)(d.CardHeader,{children:(0,i.jsx)(d.CardTitle,{className:"text-lg",children:"Top Buyers"})}),(0,i.jsx)(d.CardContent,{children:(0,i.jsxs)("div",{className:"text-center py-6",children:[(0,i.jsx)("p",{className:"text-muted-foreground",children:"No buyers yet"}),(0,i.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Your top customers will appear here"})]})})]}):(0,i.jsxs)(d.Card,{children:[(0,i.jsx)(d.CardHeader,{children:(0,i.jsx)(d.CardTitle,{className:"text-lg",children:"Top Buyers"})}),(0,i.jsx)(d.CardContent,{className:"space-y-4",children:e.map((e,t)=>(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsxs)("span",{className:"text-lg font-semibold text-muted-foreground w-6",children:["#",t+1]}),(0,i.jsxs)(w.Avatar,{className:"h-10 w-10",children:[(0,i.jsx)(w.AvatarImage,{src:e.buyerAvatar||void 0}),(0,i.jsx)(w.AvatarFallback,{children:(0,m.getInitials)(e.buyerName)})]}),(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,i.jsx)("p",{className:"font-medium text-foreground truncate",children:e.buyerName||"Anonymous"}),(0,i.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.totalSessions," sessions • Last ",(0,m.formatRelativeTime)(e.lastPurchaseAt)]})]}),(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsx)("p",{className:"font-semibold text-foreground",children:(0,m.formatCents)(e.totalSpent)}),(0,i.jsx)("p",{className:"text-xs text-muted-foreground",children:"total spent"})]})]},e.buyerId))})]})}function C({metrics:e}){let t=[{label:"Repeat Buyer Rate",value:`${(100*e.repeatBuyerRate).toFixed(1)}%`,description:"Buyers who purchased more than once",icon:u.MdRepeat,color:"text-primary"},{label:"Avg Repurchase Time",value:e.averageRepurchaseTimeDays?`${Math.round(e.averageRepurchaseTimeDays)} days`:"N/A",description:"Average time between purchases",icon:u.MdTimer,color:"text-warning"},{label:"Session Completion",value:`${(100*e.sessionCompletionRate).toFixed(1)}%`,description:"Sessions completed successfully",icon:u.MdCheckCircle,color:"text-success"},{label:"Churn Rate",value:`${(100*e.buyerChurnRate).toFixed(1)}%`,description:"Buyers inactive for 90+ days",icon:u.MdTrendingDown,color:"text-destructive"}];return(0,i.jsxs)(d.Card,{children:[(0,i.jsx)(d.CardHeader,{children:(0,i.jsx)(d.CardTitle,{className:"text-lg",children:"Retention Metrics"})}),(0,i.jsxs)(d.CardContent,{className:"space-y-6",children:[(0,i.jsx)("div",{className:"grid grid-cols-2 gap-4",children:t.map(e=>(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(e.icon,{className:(0,m.cn)("h-4 w-4",e.color)}),(0,i.jsx)("span",{className:"text-sm text-muted-foreground",children:e.label})]}),(0,i.jsx)("p",{className:"text-xl font-semibold text-foreground",children:e.value}),(0,i.jsx)("p",{className:"text-xs text-muted-foreground",children:e.description})]},e.label))}),(0,i.jsxs)("div",{className:"border-t pt-4",children:[(0,i.jsx)("h4",{className:"text-sm font-medium text-foreground mb-3",children:"Buyer Lifetime Value"}),(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-muted-foreground",children:"Average"}),(0,i.jsx)("p",{className:"text-lg font-semibold text-foreground",children:(0,m.formatCents)(e.buyerLifetimeValue.average)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-muted-foreground",children:"Median"}),(0,i.jsx)("p",{className:"text-lg font-semibold text-foreground",children:(0,m.formatCents)(e.buyerLifetimeValue.median)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-muted-foreground",children:"Top 10%"}),(0,i.jsx)("p",{className:"text-lg font-semibold text-primary",children:(0,m.formatCents)(e.buyerLifetimeValue.top10Percent)})]})]})]})]})]})}var O=e.i(26927),I=e.i(50411),P=["axis","item"],A=(0,l.forwardRef)((e,t)=>l.createElement(I.CartesianChart,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:P,tooltipPayloadSearcher:O.arrayTooltipSearcher,categoricalChartProps:e,ref:t})),T=l,k=e.i(73374),E=e.i(18486),D=e=>null;D.displayName="Cell";var M=e.i(59479),B=e.i(90119),z=e.i(62854),L=e.i(460),R=e.i(92109);e.i(32909);var F=e.i(89518),K=e.i(80388),G=e.i(60085),V=e.i(62123),W=e.i(799),$=e.i(285),H=e.i(87234),U=e.i(48175);function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach(function(t){var a,n,s;a=e,n=t,s=r[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in a?Object.defineProperty(a,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function q(){return(q=Object.assign.bind()).apply(null,arguments)}function Z(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var J=(e,i,l,o,c)=>{var d=l-o;return(0,U.roundTemplateLiteral)(t||(t=Z(["M ",",",""])),e,i)+(0,U.roundTemplateLiteral)(r||(r=Z(["L ",",",""])),e+l,i)+(0,U.roundTemplateLiteral)(a||(a=Z(["L ",",",""])),e+l-d/2,i+c)+(0,U.roundTemplateLiteral)(n||(n=Z(["L ",",",""])),e+l-d/2-o,i+c)+(0,U.roundTemplateLiteral)(s||(s=Z(["L ",","," Z"])),e,i)},_={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Q=e=>{var t=(0,G.resolveDefaultProps)(e,_),{x:r,y:a,upperWidth:n,lowerWidth:s,height:i,className:o}=t,{animationEasing:c,animationDuration:d,animationBegin:u,isUpdateAnimationActive:m}=t,h=(0,l.useRef)(null),[p,x]=(0,l.useState)(-1),f=(0,l.useRef)(n),y=(0,l.useRef)(s),v=(0,l.useRef)(i),g=(0,l.useRef)(r),b=(0,l.useRef)(a),j=(0,W.useAnimationId)(e,"trapezoid-");if((0,l.useEffect)(()=>{if(h.current&&h.current.getTotalLength)try{var e=h.current.getTotalLength();e&&x(e)}catch(e){}},[]),r!==+r||a!==+a||n!==+n||s!==+s||i!==+i||0===n&&0===s||0===i)return null;var N=(0,k.clsx)("recharts-trapezoid",o);if(!m)return l.createElement("g",null,l.createElement("path",q({},(0,H.svgPropertiesAndEvents)(t),{className:N,d:J(r,a,n,s,i)})));var w=f.current,S=y.current,C=v.current,O=g.current,I=b.current,P="0px ".concat(-1===p?1:p,"px"),A="".concat(p,"px 0px"),T=(0,$.getTransitionVal)(["strokeDasharray"],d,c);return l.createElement(V.JavascriptAnimate,{animationId:j,key:j,canBegin:p>0,duration:d,easing:c,isActive:m,begin:u},e=>{var o=(0,B.interpolate)(w,n,e),c=(0,B.interpolate)(S,s,e),d=(0,B.interpolate)(C,i,e),u=(0,B.interpolate)(O,r,e),m=(0,B.interpolate)(I,a,e);h.current&&(f.current=o,y.current=c,v.current=d,g.current=u,b.current=m);var p=e>0?{transition:T,strokeDasharray:A}:{strokeDasharray:P};return l.createElement("path",q({},(0,H.svgPropertiesAndEvents)(t),{className:N,d:J(u,m,o,c,d),ref:h,style:X(X({},p),t.style)}))})},ee=e.i(13529);e.i(70415);var et=e.i(79512),er=e.i(47782);let ea=Math.cos,en=Math.sin,es=Math.sqrt,ei=Math.PI,el=2*ei;es(3);let eo={draw(e,t){let r=es(t/ei);e.moveTo(r,0),e.arc(0,0,r,0,el)}},ec=es(1/3),ed=2*ec,eu=en(ei/10)/en(7*ei/10),em=en(el/10)*eu,eh=-ea(el/10)*eu,ep=es(3);es(3);let ex=es(3)/2,ef=1/es(12),ey=(ef/2+1)*3;var ev=["type","size","sizeType"];function eg(){return(eg=Object.assign.bind()).apply(null,arguments)}function eb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function ej(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eb(Object(r),!0).forEach(function(t){var a,n,s;a=e,n=t,s=r[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in a?Object.defineProperty(a,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eb(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var eN={symbolCircle:eo,symbolCross:{draw(e,t){let r=es(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},symbolDiamond:{draw(e,t){let r=es(t/ed),a=r*ec;e.moveTo(0,-r),e.lineTo(a,0),e.lineTo(0,r),e.lineTo(-a,0),e.closePath()}},symbolSquare:{draw(e,t){let r=es(t),a=-r/2;e.rect(a,a,r,r)}},symbolStar:{draw(e,t){let r=es(.8908130915292852*t),a=em*r,n=eh*r;e.moveTo(0,-r),e.lineTo(a,n);for(let t=1;t<5;++t){let s=el*t/5,i=ea(s),l=en(s);e.lineTo(l*r,-i*r),e.lineTo(i*a-l*n,l*a+i*n)}e.closePath()}},symbolTriangle:{draw(e,t){let r=-es(t/(3*ep));e.moveTo(0,2*r),e.lineTo(-ep*r,-r),e.lineTo(ep*r,-r),e.closePath()}},symbolWye:{draw(e,t){let r=es(t/ey),a=r/2,n=r*ef,s=r*ef+r,i=-a;e.moveTo(a,n),e.lineTo(a,s),e.lineTo(i,s),e.lineTo(-.5*a-ex*n,ex*a+-.5*n),e.lineTo(-.5*a-ex*s,ex*a+-.5*s),e.lineTo(-.5*i-ex*s,ex*i+-.5*s),e.lineTo(-.5*a+ex*n,-.5*n-ex*a),e.lineTo(-.5*a+ex*s,-.5*s-ex*a),e.lineTo(-.5*i+ex*s,-.5*s-ex*i),e.closePath()}}},ew=Math.PI/180,eS=e=>{var{type:t="circle",size:r=64,sizeType:a="area"}=e,n=ej(ej({},function(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if(({}).hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,ev)),{},{type:t,size:r,sizeType:a}),s="circle";"string"==typeof t&&(s=t);var{className:i,cx:o,cy:c}=n,d=(0,H.svgPropertiesAndEvents)(n);return(0,B.isNumber)(o)&&(0,B.isNumber)(c)&&(0,B.isNumber)(r)?l.createElement("path",eg({},d,{className:(0,k.clsx)("recharts-symbols",i),transform:"translate(".concat(o,", ").concat(c,")"),d:(()=>{var e,t=(e=s,eN["symbol".concat((0,B.upperFirst)(e))]||eo),n=(function(e,t){let r=null,a=(0,er.withPath)(n);function n(){let n;if(r||(r=n=a()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),n)return r=null,n+""||null}return e="function"==typeof e?e:(0,et.default)(e||eo),t="function"==typeof t?t:(0,et.default)(void 0===t?64:+t),n.type=function(t){return arguments.length?(e="function"==typeof t?t:(0,et.default)(t),n):e},n.size=function(e){return arguments.length?(t="function"==typeof e?e:(0,et.default)(+e),n):t},n.context=function(e){return arguments.length?(r=null==e?null:e,n):r},n})().type(t).size(((e,t,r)=>{if("area"===t)return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var a=18*ew;return 1.25*e*e*(Math.tan(a)-Math.tan(2*a)*Math.tan(a)**2);case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}})(r,a,s))();if(null!==n)return n})()})):null};eS.registerSymbol=(e,t)=>{eN["symbol".concat((0,B.upperFirst)(e))]=t};var eC=e.i(54646),eO=["option","shapeType","activeClassName"];function eI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function eP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eI(Object(r),!0).forEach(function(t){var a,n,s;a=e,n=t,s=r[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in a?Object.defineProperty(a,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eI(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function eA(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return l.createElement(K.Rectangle,r);case"trapezoid":return l.createElement(Q,r);case"sector":return l.createElement(ee.Sector,r);case"symbols":if("symbols"===t)return l.createElement(eS,r);break;case"curve":return l.createElement(eC.Curve,r);default:return null}}function eT(e){var t,{option:r,shapeType:a,activeClassName:n="recharts-active-shape"}=e,s=function(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if(({}).hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,eO);if((0,l.isValidElement)(r))t=(0,l.cloneElement)(r,eP(eP({},s),(0,l.isValidElement)(r)?r.props:r));else if("function"==typeof r)t=r(s,s.index);else if((0,F.default)(r)&&"boolean"!=typeof r){var i=eP(eP({},s),r);t=l.createElement(eA,{shapeType:a,elementProps:i})}else t=l.createElement(eA,{shapeType:a,elementProps:s});return s.isActive?l.createElement(E.Layer,{className:n},t):t}function ek(){return(ek=Object.assign.bind()).apply(null,arguments)}function eE(e){return l.createElement(eT,ek({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var eD=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(r,a)=>{if((0,B.isNumber)(e))return e;var n=(0,B.isNumber)(r)||(0,B.isNullish)(r);return n?e(r,a):(n||function(e,t){if(!e)throw Error("Invariant failed")}(!1,"minPointSize callback function received a value with type of ".concat(typeof r,". Currently only numbers or null/undefined are supported.")),t)}},eM=e.i(80103),eB=e.i(18981),ez=(e,t,r)=>{var a=(0,eM.useAppDispatch)();return(n,s)=>i=>{null==e||e(n,s,i),a((0,eB.setActiveMouseOverItemIndex)({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition,activeGraphicalItemId:r}))}},eL=e=>{var t=(0,eM.useAppDispatch)();return(r,a)=>n=>{null==e||e(r,a,n),t((0,eB.mouseLeaveItem)())}},eR=(e,t,r)=>{var a=(0,eM.useAppDispatch)();return(n,s)=>i=>{null==e||e(n,s,i),a((0,eB.setActiveClickItemIndex)({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition,activeGraphicalItemId:r}))}},eF=e.i(50181),eK=["children"],eG=(0,l.createContext)({data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0});function eV(e){var{children:t}=e,r=function(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if(({}).hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,eK);return l.createElement(eG.Provider,{value:r},t)}var eW=e.i(12463),e$=e.i(18929),eH=e.i(25578),eU=e.i(70538),eY=e.i(82095),eX=e.i(82767),eq=e.i(88770),eZ=e.i(20175),eJ=(e,t,r)=>{var a=null!=r?r:e;if(!(0,B.isNullish)(a))return(0,B.getPercentValue)(a,t,0)},e_=e.i(88825);function eQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function e0(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eQ(Object(r),!0).forEach(function(t){var a,n,s;a=e,n=t,s=r[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in a?Object.defineProperty(a,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eQ(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var e1=e.i(58306),e2=e.i(60656),e3=(0,eH.createSelector)([eU.selectUnfilteredCartesianItems,(e,t)=>t],(e,t)=>e.filter(e=>"bar"===e.type).find(e=>e.id===t)),e4=(0,eH.createSelector)([e3],e=>null==e?void 0:e.maxBarSize),e5=(0,eH.createSelector)([e$.selectChartLayout,eU.selectUnfilteredCartesianItems,e2.selectXAxisIdFromGraphicalItemId,e2.selectYAxisIdFromGraphicalItemId,(e,t,r)=>r],(e,t,r,a,n)=>t.filter(t=>"horizontal"===e?t.xAxisId===r:t.yAxisId===a).filter(e=>e.isPanorama===n).filter(e=>!1===e.hide).filter(e=>"bar"===e.type)),e8=(0,eH.createSelector)([e5,eq.selectRootBarSize,(e,t)=>{var r=(0,e$.selectChartLayout)(e),a=(0,e2.selectXAxisIdFromGraphicalItemId)(e,t),n=(0,e2.selectYAxisIdFromGraphicalItemId)(e,t);if(null!=a&&null!=n)return"horizontal"===r?(0,eU.selectCartesianAxisSize)(e,"xAxis",a):(0,eU.selectCartesianAxisSize)(e,"yAxis",n)}],(e,t,r)=>{var a=e.filter(eZ.isStacked),n=e.filter(e=>null==e.stackId);return[...Object.entries(a.reduce((e,t)=>(e[t.stackId]||(e[t.stackId]=[]),e[t.stackId].push(t),e),{})).map(e=>{var[a,n]=e;return{stackId:a,dataKeys:n.map(e=>e.dataKey),barSize:eJ(t,r,n[0].barSize)}}),...n.map(e=>({stackId:void 0,dataKeys:[e.dataKey].filter(e=>null!=e),barSize:eJ(t,r,e.barSize)}))]}),e6=(e,t,r)=>{var a,n,s=(0,e$.selectChartLayout)(e),i=(0,e2.selectXAxisIdFromGraphicalItemId)(e,t),l=(0,e2.selectYAxisIdFromGraphicalItemId)(e,t);if(null!=i&&null!=l)return"horizontal"===s?(a=(0,eU.selectAxisWithScale)(e,"xAxis",i,r),n=(0,eU.selectTicksOfGraphicalItem)(e,"xAxis",i,r)):(a=(0,eU.selectAxisWithScale)(e,"yAxis",l,r),n=(0,eU.selectTicksOfGraphicalItem)(e,"yAxis",l,r)),(0,L.getBandSizeOfAxis)(a,n)},e9=(0,eH.createSelector)([e8,eq.selectRootMaxBarSize,eq.selectBarGap,eq.selectBarCategoryGap,(e,t,r)=>{var a,n,s,i,l=e3(e,t);if(null!=l){var o=(0,e2.selectXAxisIdFromGraphicalItemId)(e,t),c=(0,e2.selectYAxisIdFromGraphicalItemId)(e,t);if(null!=o&&null!=c){var d=(0,e$.selectChartLayout)(e),u=(0,eq.selectRootMaxBarSize)(e),{maxBarSize:m}=l,h=(0,B.isNullish)(m)?u:m;return"horizontal"===d?(s=(0,eU.selectAxisWithScale)(e,"xAxis",o,r),i=(0,eU.selectTicksOfGraphicalItem)(e,"xAxis",o,r)):(s=(0,eU.selectAxisWithScale)(e,"yAxis",c,r),i=(0,eU.selectTicksOfGraphicalItem)(e,"yAxis",c,r)),null!=(a=null!=(n=(0,L.getBandSizeOfAxis)(s,i,!0))?n:h)?a:0}}},e6,e4],(e,t,r,a,n,s,i)=>{var l=function(e,t,r,a,n){var s,i=a.length;if(!(i<1)){var l=(0,B.getPercentValue)(e,r,0,!0),o=[];if((0,e_.isWellBehavedNumber)(a[0].barSize)){var c=!1,d=r/i,u=a.reduce((e,t)=>e+(t.barSize||0),0);(u+=(i-1)*l)>=r&&(u-=(i-1)*l,l=0),u>=r&&d>0&&(c=!0,d*=.9,u=i*d);var m={offset:((r-u)/2|0)-l,size:0};s=a.reduce((e,t)=>{var r,a=[...e,{stackId:t.stackId,dataKeys:t.dataKeys,position:{offset:m.offset+m.size+l,size:c?d:null!=(r=t.barSize)?r:0}}];return m=a[a.length-1].position,a},o)}else{var h=(0,B.getPercentValue)(t,r,0,!0);r-2*h-(i-1)*l<=0&&(l=0);var p=(r-2*h-(i-1)*l)/i;p>1&&(p>>=0);var x=(0,e_.isWellBehavedNumber)(n)?Math.min(p,n):p;s=a.reduce((e,t,r)=>[...e,{stackId:t.stackId,dataKeys:t.dataKeys,position:{offset:h+(p+l)*r+(p-x)/2,size:x}}],o)}return s}}(r,a,n!==s?n:s,e,(0,B.isNullish)(i)?t:i);return n!==s&&null!=l&&(l=l.map(e=>e0(e0({},e),{},{position:e0(e0({},e.position),{},{offset:e.position.offset-n/2})}))),l}),e7=(0,eH.createSelector)([e9,e3],(e,t)=>{if(null!=e&&null!=t){var r=e.find(e=>e.stackId===t.stackId&&null!=t.dataKey&&e.dataKeys.includes(t.dataKey));if(null!=r)return r.position}}),te=(0,eH.createSelector)([(e,t,r)=>{var a=(0,e$.selectChartLayout)(e),n=(0,e2.selectXAxisIdFromGraphicalItemId)(e,t),s=(0,e2.selectYAxisIdFromGraphicalItemId)(e,t);if(null!=n&&null!=s)return"horizontal"===a?(0,eU.selectStackGroups)(e,"yAxis",s,r):(0,eU.selectStackGroups)(e,"xAxis",n,r)},e3],(e,t)=>{var r=(0,e1.getStackSeriesIdentifier)(t);if(!e||null==r||null==t)return;var{stackId:a}=t;if(null!=a){var n=e[a];if(n){var{stackedData:s}=n;if(s)return s.find(e=>e.key===r)}}}),tt=(0,eH.createSelector)([eX.selectChartOffsetInternal,eX.selectAxisViewBox,(e,t,r)=>{var a=(0,e2.selectXAxisIdFromGraphicalItemId)(e,t);if(null!=a)return(0,eU.selectAxisWithScale)(e,"xAxis",a,r)},(e,t,r)=>{var a=(0,e2.selectYAxisIdFromGraphicalItemId)(e,t);if(null!=a)return(0,eU.selectAxisWithScale)(e,"yAxis",a,r)},(e,t,r)=>{var a=(0,e2.selectXAxisIdFromGraphicalItemId)(e,t);if(null!=a)return(0,eU.selectTicksOfGraphicalItem)(e,"xAxis",a,r)},(e,t,r)=>{var a=(0,e2.selectYAxisIdFromGraphicalItemId)(e,t);if(null!=a)return(0,eU.selectTicksOfGraphicalItem)(e,"yAxis",a,r)},e7,e$.selectChartLayout,eY.selectChartDataWithIndexesIfNotInPanoramaPosition3,e6,te,e3,(e,t,r,a)=>a],(e,t,r,a,n,s,i,l,o,c,d,u,m)=>{var h,{chartData:p,dataStartIndex:x,dataEndIndex:f}=o;if(null!=u&&null!=i&&null!=t&&("horizontal"===l||"vertical"===l)&&null!=r&&null!=a&&null!=n&&null!=s&&null!=c){var{data:y}=u;if(null!=(h=null!=y&&y.length>0?y:null==p?void 0:p.slice(x,f+1)))return function(e){var{layout:t,barSettings:{dataKey:r,minPointSize:a},pos:n,bandSize:s,xAxis:i,yAxis:l,xAxisTicks:o,yAxisTicks:c,stackedData:d,displayedData:u,offset:m,cells:h,parentViewBox:p,dataStartIndex:x}=e,f="horizontal"===t?l:i,y=d?f.scale.domain():null,v=(0,L.getBaseValueOfBar)({numericAxis:f}),g=f.scale(v);return u.map((e,u)=>{if(d){var f=d[u+x];if(null==f)return null;j=(0,L.truncateByDomain)(f,y)}else Array.isArray(j=(0,L.getValueByDataKey)(e,r))||(j=[v,j]);var b=eD(a,0)(j[1],u);if("horizontal"===t){var j,N,w,S,C,O,I,[P,A]=[l.scale(j[0]),l.scale(j[1])];N=(0,L.getCateCoordinateOfBar)({axis:i,ticks:o,bandSize:s,offset:n.offset,entry:e,index:u}),w=null!=(I=null!=A?A:P)?I:void 0,S=n.size;var T=P-A;if(C=(0,B.isNan)(T)?0:T,O={x:N,y:m.top,width:S,height:m.height},Math.abs(b)>0&&Math.abs(C)<Math.abs(b)){var k=(0,B.mathSign)(C||b)*(Math.abs(b)-Math.abs(C));w-=k,C+=k}}else{var[E,D]=[i.scale(j[0]),i.scale(j[1])];if(N=E,w=(0,L.getCateCoordinateOfBar)({axis:l,ticks:c,bandSize:s,offset:n.offset,entry:e,index:u}),S=D-E,C=n.size,O={x:m.left,y:w,width:m.width,height:C},Math.abs(b)>0&&Math.abs(S)<Math.abs(b)){var M=(0,B.mathSign)(S||b)*(Math.abs(b)-Math.abs(S));S+=M}}return null==N||null==w||null==S||null==C?null:tI(tI({},e),{},{stackedBarStart:g,x:N,y:w,width:S,height:C,value:d?j:j[1],payload:e,background:O,tooltipPosition:{x:N+S/2,y:w+C/2},parentViewBox:p},h&&h[u]&&h[u].props)}).filter(Boolean)}({layout:l,barSettings:u,pos:i,parentViewBox:t,bandSize:c,xAxis:r,yAxis:a,xAxisTicks:n,yAxisTicks:s,stackedData:d,displayedData:h,offset:e,cells:m,dataStartIndex:x})}}),tr=e.i(40543),ta=e.i(19097),tn=e.i(28449),ts=e.i(4419),ti=e.i(26040),tl=e.i(27072),to=e.i(80603),tc=e.i(16595),td=e.i(55557),tu=(e.i(14559),(e,t)=>t),tm=(e,t,r)=>r,th=(0,eH.createSelector)([tu,eU.selectUnfilteredCartesianItems,tm],(e,t,r)=>t.filter(e=>"bar"===e.type).filter(t=>t.stackId===e).filter(e=>e.isPanorama===r).filter(e=>!e.hide)),tp=(0,eH.createSelector)([th],e=>e.map(e=>e.id)),tx=(0,eH.createSelector)([e=>e,tu,tm],(e,t,r)=>{var a=tp(e,t,r),n=[];return a.forEach(t=>{var a=tt(e,t,r,void 0);null==a||a.forEach((e,t)=>{n[t]=((e,t)=>{if(!e)return t;if(!t)return e;var r=Math.min(e.x,t.x),a=Math.min(e.y,t.y);return{x:r,y:a,width:Math.max(e.x+e.width,t.x+t.width)-r,height:Math.max(e.y+e.height,t.y+t.height)-a}})(n[t],e)})}),n}),tf=["index"];function ty(){return(ty=Object.assign.bind()).apply(null,arguments)}var tv=(0,l.createContext)(void 0),tg=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),tb=e=>{var{index:t}=e,r=function(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if(({}).hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,tf),a=(e=>{var t=(0,l.useContext)(tv);if(null!=t){var{stackId:r}=t;return"url(#".concat(tg(r,e),")")}})(t);return l.createElement(E.Layer,ty({className:"recharts-bar-stack-layer",clipPath:a},r))};td.propsAreEqual;var tj=["onMouseEnter","onMouseLeave","onClick"],tN=["value","background","tooltipPosition"],tw=["id"],tS=["onMouseEnter","onClick","onMouseLeave"];function tC(){return(tC=Object.assign.bind()).apply(null,arguments)}function tO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function tI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tO(Object(r),!0).forEach(function(t){var a,n,s;a=e,n=t,s=r[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in a?Object.defineProperty(a,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tO(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function tP(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if(({}).hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var tA=T.memo(e=>{var{dataKey:t,stroke:r,strokeWidth:a,fill:n,name:s,hide:i,unit:l,tooltipType:o,id:c}=e,d={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:a,fill:n,dataKey:t,nameKey:void 0,name:(0,L.getTooltipNameProp)(s,t),hide:i,type:o,color:n,unit:l,graphicalItemId:c}};return T.createElement(eF.SetTooltipEntrySettings,{tooltipEntrySettings:d})});function tT(e){var t,r=(0,eM.useAppSelector)(ta.selectActiveTooltipIndex),{data:a,dataKey:n,background:s,allOtherBarProps:i}=e,{onMouseEnter:l,onMouseLeave:o,onClick:c}=i,d=tP(i,tj),u=ez(l,n,i.id),m=eL(o),h=eR(c,n,i.id);if(!s||null==a)return null;var p=(0,tl.svgPropertiesNoEventsFromUnknown)(s);return T.createElement(to.ZIndexLayer,{zIndex:(t=tc.DefaultZIndexes.barBackground,s&&"object"==typeof s&&"zIndex"in s&&"number"==typeof s.zIndex&&(0,e_.isWellBehavedNumber)(s.zIndex)?s.zIndex:t)},a.map((e,t)=>{var{value:a,background:i,tooltipPosition:l}=e,o=tP(e,tN);if(!i)return null;var c=u(e,t),x=m(e,t),f=h(e,t),y=tI(tI(tI(tI(tI({option:s,isActive:String(t)===r},o),{},{fill:"#eee"},i),p),(0,R.adaptEventsOfChild)(d,e,t)),{},{onMouseEnter:c,onMouseLeave:x,onClick:f,dataKey:n,index:t,className:"recharts-bar-background-rectangle"});return T.createElement(eE,tC({key:"background-bar-".concat(t)},y))}))}function tk(e){var{showLabels:t,children:r,rects:a}=e,n=null==a?void 0:a.map(e=>{var t={x:e.x,y:e.y,width:e.width,lowerWidth:e.width,upperWidth:e.width,height:e.height};return tI(tI({},t),{},{value:e.value,payload:e.payload,parentViewBox:e.parentViewBox,viewBox:t,fill:e.fill})});return T.createElement(M.CartesianLabelListContextProvider,{value:t?n:void 0},r)}function tE(e){var{shape:t,activeBar:r,baseProps:a,entry:n,index:s,dataKey:i}=e,l=(0,eM.useAppSelector)(ta.selectActiveTooltipIndex),o=(0,eM.useAppSelector)(ta.selectActiveTooltipDataKey),c=r&&String(s)===l&&(null==o||i===o),d=c?r:t;return c?T.createElement(to.ZIndexLayer,{zIndex:tc.DefaultZIndexes.activeBar},T.createElement(eE,tC({},a,{name:String(a.name)},n,{isActive:c,option:d,index:s,dataKey:i}))):T.createElement(eE,tC({},a,{name:String(a.name)},n,{isActive:c,option:d,index:s,dataKey:i}))}function tD(e){var{shape:t,baseProps:r,entry:a,index:n,dataKey:s}=e;return T.createElement(eE,tC({},r,{name:String(r.name)},a,{isActive:!1,option:t,index:n,dataKey:s}))}function tM(e){var t,{data:r,props:a}=e,n=null!=(t=(0,tl.svgPropertiesNoEvents)(a))?t:{},{id:s}=n,i=tP(n,tw),{shape:l,dataKey:o,activeBar:c}=a,{onMouseEnter:d,onClick:u,onMouseLeave:m}=a,h=tP(a,tS),p=ez(d,o,s),x=eL(m),f=eR(u,o,s);return r?T.createElement(T.Fragment,null,r.map((e,t)=>T.createElement(tb,tC({index:t,key:"rectangle-".concat(null==e?void 0:e.x,"-").concat(null==e?void 0:e.y,"-").concat(null==e?void 0:e.value,"-").concat(t),className:"recharts-bar-rectangle"},(0,R.adaptEventsOfChild)(h,e,t),{onMouseEnter:p(e,t),onMouseLeave:x(e,t),onClick:f(e,t)}),c?T.createElement(tE,{shape:l,activeBar:c,baseProps:i,entry:e,index:t,dataKey:o}):T.createElement(tD,{shape:l,baseProps:i,entry:e,index:t,dataKey:o})))):null}function tB(e){var{props:t,previousRectanglesRef:r}=e,{data:a,layout:n,isAnimationActive:s,animationBegin:i,animationDuration:l,animationEasing:o,onAnimationEnd:c,onAnimationStart:d}=t,u=r.current,m=(0,W.useAnimationId)(t,"recharts-bar-"),[h,p]=(0,T.useState)(!1),x=(0,T.useCallback)(()=>{"function"==typeof c&&c(),p(!1)},[c]),f=(0,T.useCallback)(()=>{"function"==typeof d&&d(),p(!0)},[d]);return T.createElement(tk,{showLabels:!h,rects:a},T.createElement(V.JavascriptAnimate,{animationId:m,begin:i,duration:l,isActive:s,easing:o,onAnimationEnd:x,onAnimationStart:f,key:m},e=>{var s=1===e?a:null==a?void 0:a.map((t,r)=>{var a=u&&u[r];if(a)return tI(tI({},t),{},{x:(0,B.interpolate)(a.x,t.x,e),y:(0,B.interpolate)(a.y,t.y,e),width:(0,B.interpolate)(a.width,t.width,e),height:(0,B.interpolate)(a.height,t.height,e)});if("horizontal"===n){var s=(0,B.interpolate)(0,t.height,e),i=(0,B.interpolate)(t.stackedBarStart,t.y,e);return tI(tI({},t),{},{y:i,height:s})}var l=(0,B.interpolate)(0,t.width,e),o=(0,B.interpolate)(t.stackedBarStart,t.x,e);return tI(tI({},t),{},{width:l,x:o})});return(e>0&&(r.current=null!=s?s:null),null==s)?null:T.createElement(E.Layer,null,T.createElement(tM,{props:t,data:s}))}),T.createElement(M.LabelListFromLabelProp,{label:t.label}),t.children)}function tz(e){var t=(0,T.useRef)(null);return T.createElement(tB,{previousRectanglesRef:t,props:e})}var tL=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:(0,L.getValueByDataKey)(e,t)}};class tR extends T.PureComponent{render(){var{hide:e,data:t,dataKey:r,className:a,xAxisId:n,yAxisId:s,needClip:i,background:l,id:o}=this.props;if(e||null==t)return null;var c=(0,k.clsx)("recharts-bar",a);return T.createElement(E.Layer,{className:c,id:o},i&&T.createElement("defs",null,T.createElement(eW.GraphicalItemClipPath,{clipPathId:o,xAxisId:n,yAxisId:s})),T.createElement(E.Layer,{className:"recharts-bar-rectangles",clipPath:i?"url(#clipPath-".concat(o,")"):void 0},T.createElement(tT,{data:t,dataKey:r,background:l,allOtherBarProps:this.props}),T.createElement(tz,this.props)))}}var tF={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:0,xAxisId:0,yAxisId:0,zIndex:tc.DefaultZIndexes.bar};function tK(e){var t,{xAxisId:r,yAxisId:a,hide:n,legendType:s,minPointSize:i,activeBar:l,animationBegin:o,animationDuration:c,animationEasing:d,isAnimationActive:u}=e,{needClip:m}=(0,eW.useNeedsClip)(r,a),h=(0,e$.useChartLayout)(),p=(0,tr.useIsPanorama)(),x=(0,z.findAllByType)(e.children,D),f=(0,eM.useAppSelector)(t=>tt(t,e.id,p,x));if("vertical"!==h&&"horizontal"!==h)return null;var y=null==f?void 0:f[0];return t=null==y||null==y.height||null==y.width?0:"vertical"===h?y.height/2:y.width/2,T.createElement(eV,{xAxisId:r,yAxisId:a,data:f,dataPointFormatter:tL,errorBarOffset:t},T.createElement(tR,tC({},e,{layout:h,needClip:m,data:f,xAxisId:r,yAxisId:a,hide:n,legendType:s,minPointSize:i,activeBar:l,animationBegin:o,animationDuration:c,animationEasing:d,isAnimationActive:u})))}var tG=T.memo(function(e){var t,r,a=(0,G.resolveDefaultProps)(e,tF),n=(t=a.stackId,null!=(r=(0,l.useContext)(tv))?r.stackId:null!=t?(0,L.getNormalizedStackId)(t):void 0),s=(0,tr.useIsPanorama)();return T.createElement(ts.RegisterGraphicalItemId,{id:a.id,type:"bar"},e=>T.createElement(T.Fragment,null,T.createElement(tn.SetLegendPayload,{legendPayload:(e=>{var{dataKey:t,name:r,fill:a,legendType:n,hide:s}=e;return[{inactive:s,dataKey:t,type:n,color:a,value:(0,L.getTooltipNameProp)(r,t),payload:e}]})(a)}),T.createElement(tA,{dataKey:a.dataKey,stroke:a.stroke,strokeWidth:a.strokeWidth,fill:a.fill,name:a.name,hide:a.hide,unit:a.unit,tooltipType:a.tooltipType,id:e}),T.createElement(ti.SetCartesianGraphicalItem,{type:"bar",id:e,data:void 0,xAxisId:a.xAxisId,yAxisId:a.yAxisId,zAxisId:0,dataKey:a.dataKey,stackId:n,hide:a.hide,barSize:a.barSize,minPointSize:a.minPointSize,maxBarSize:a.maxBarSize,isPanorama:s}),T.createElement(to.ZIndexLayer,{zIndex:a.zIndex},T.createElement(tK,tC({},a,{id:e})))))},td.propsAreEqual);function tV({data:e}){let t=e=>new Date(e+"-01").toLocaleDateString("en-US",{month:"short"});return 0===e.length||e.every(e=>0===e.totalBuyers)?(0,i.jsxs)(d.Card,{children:[(0,i.jsx)(d.CardHeader,{children:(0,i.jsx)(d.CardTitle,{className:"text-lg",children:"Monthly Cohort Retention"})}),(0,i.jsx)(d.CardContent,{children:(0,i.jsxs)("div",{className:"text-center py-12",children:[(0,i.jsx)("p",{className:"text-muted-foreground",children:"Not enough data yet"}),(0,i.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Cohort retention data will appear as you get more buyers"})]})})]}):(0,i.jsxs)(d.Card,{children:[(0,i.jsx)(d.CardHeader,{children:(0,i.jsx)(d.CardTitle,{className:"text-lg",children:"Monthly Cohort Retention"})}),(0,i.jsx)(d.CardContent,{children:(0,i.jsx)("div",{className:"h-[250px]",children:(0,i.jsx)(b.ResponsiveContainer,{width:"100%",height:"100%",children:(0,i.jsxs)(A,{data:e,margin:{top:10,right:10,left:0,bottom:0},children:[(0,i.jsx)(v.CartesianGrid,{strokeDasharray:"3 3",className:"stroke-muted"}),(0,i.jsx)(f.XAxis,{dataKey:"month",tickFormatter:t,tick:{fontSize:12},className:"text-muted-foreground"}),(0,i.jsx)(y.YAxis,{tickFormatter:e=>`${(100*e).toFixed(0)}%`,tick:{fontSize:12},className:"text-muted-foreground",domain:[0,1]}),(0,i.jsx)(g.Tooltip,{content:({active:r,payload:a,label:n})=>{if(r&&a&&a.length){let r=e.find(e=>e.month===n);return(0,i.jsxs)("div",{className:"bg-popover border rounded-lg p-3 shadow-lg",children:[(0,i.jsxs)("p",{className:"text-sm font-medium text-foreground",children:[t(String(n))," Cohort"]}),(0,i.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Total: ",(0,i.jsx)("span",{className:"font-medium",children:r?.totalBuyers})," buyers"]}),(0,i.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Still Active: ",(0,i.jsx)("span",{className:"font-medium",children:r?.stillActive})]}),(0,i.jsxs)("p",{className:"text-sm text-primary",children:["Retention: ",(0,i.jsxs)("span",{className:"font-medium",children:[(100*(r?.retention||0)).toFixed(1),"%"]})]})]})}return null}}),(0,i.jsx)(tG,{dataKey:"retention",fill:"hsl(var(--primary))",radius:[4,4,0,0]})]})})})})]})}tG.displayName="Bar";var tW=e.i(5378),t$=e.i(30754);let tH={low:{label:"Low Risk",icon:u.MdCheckCircle,color:"text-success",bg:"bg-success/10"},medium:{label:"Medium Risk",icon:u.MdWarning,color:"text-warning",bg:"bg-warning/10"},high:{label:"High Risk",icon:u.MdError,color:"text-destructive",bg:"bg-destructive/10"}};function tU({buyers:e,onSortChange:t,onChurnRiskFilter:r,onLoadMore:a,hasMore:n}){let[s,o]=(0,l.useState)("totalSpent"),[c,u]=(0,l.useState)("all");return 0===e.length?(0,i.jsxs)(d.Card,{children:[(0,i.jsx)(d.CardHeader,{children:(0,i.jsx)(d.CardTitle,{className:"text-lg",children:"Buyer Insights"})}),(0,i.jsx)(d.CardContent,{children:(0,i.jsxs)("div",{className:"text-center py-12",children:[(0,i.jsx)("p",{className:"text-muted-foreground",children:"No buyers yet"}),(0,i.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Buyer insights will appear as you make sales"})]})})]}):(0,i.jsxs)(d.Card,{children:[(0,i.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between",children:[(0,i.jsx)(d.CardTitle,{className:"text-lg",children:"Buyer Insights"}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsxs)(t$.Select,{value:c,onValueChange:e=>{u(e),r?.("all"===e?null:e)},children:[(0,i.jsx)(t$.SelectTrigger,{className:"w-[140px]",children:(0,i.jsx)(t$.SelectValue,{placeholder:"Filter risk"})}),(0,i.jsxs)(t$.SelectContent,{children:[(0,i.jsx)(t$.SelectItem,{value:"all",children:"All Buyers"}),(0,i.jsx)(t$.SelectItem,{value:"low",children:"Low Risk"}),(0,i.jsx)(t$.SelectItem,{value:"medium",children:"Medium Risk"}),(0,i.jsx)(t$.SelectItem,{value:"high",children:"High Risk"})]})]}),(0,i.jsxs)(t$.Select,{value:s,onValueChange:e=>{o(e),t?.(e)},children:[(0,i.jsx)(t$.SelectTrigger,{className:"w-[140px]",children:(0,i.jsx)(t$.SelectValue,{placeholder:"Sort by"})}),(0,i.jsxs)(t$.SelectContent,{children:[(0,i.jsx)(t$.SelectItem,{value:"totalSpent",children:"Total Spent"}),(0,i.jsx)(t$.SelectItem,{value:"lastPurchaseAt",children:"Last Active"}),(0,i.jsx)(t$.SelectItem,{value:"totalSessions",children:"Sessions"})]})]})]})]}),(0,i.jsxs)(d.CardContent,{children:[(0,i.jsx)("div",{className:"space-y-3",children:e.map(e=>{let t=e.churnRisk?tH[e.churnRisk]:null;return(0,i.jsxs)("div",{className:"flex items-center gap-4 p-3 rounded-lg border hover:bg-muted/50 transition-colors",children:[(0,i.jsxs)(w.Avatar,{className:"h-10 w-10",children:[(0,i.jsx)(w.AvatarImage,{src:e.buyerAvatar||void 0}),(0,i.jsx)(w.AvatarFallback,{children:(0,m.getInitials)(e.buyerName)})]}),(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("p",{className:"font-medium text-foreground truncate",children:e.buyerName||"Anonymous"}),t&&(0,i.jsxs)(tW.Badge,{variant:"secondary",className:(0,m.cn)("text-xs",t.bg,t.color),children:[(0,i.jsx)(t.icon,{className:"h-3 w-3 mr-1"}),t.label]})]}),(0,i.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.totalPurchases," purchases • ",e.completedSessions,"/",e.totalSessions," sessions completed"]})]}),(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsx)("p",{className:"font-semibold text-foreground",children:(0,m.formatCents)(e.lifetimeValue)}),(0,i.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Last active ",(0,m.formatRelativeTime)(e.lastPurchaseAt)]})]})]},e.buyerId)})}),n&&(0,i.jsx)(j.Button,{variant:"outline",className:"w-full mt-4",onClick:a,children:"Load More"})]})]})}function tY({atRiskBuyers:e}){return 0===e.length?(0,i.jsxs)(d.Card,{children:[(0,i.jsx)(d.CardHeader,{children:(0,i.jsxs)(d.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,i.jsx)(u.MdWarning,{className:"h-5 w-5 text-warning"}),"At-Risk Buyers"]})}),(0,i.jsx)(d.CardContent,{children:(0,i.jsxs)("div",{className:"text-center py-6",children:[(0,i.jsx)("p",{className:"text-success font-medium",children:"No at-risk buyers!"}),(0,i.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"All your buyers have been active recently"})]})})]}):(0,i.jsxs)(d.Card,{className:"border-warning/50",children:[(0,i.jsx)(d.CardHeader,{children:(0,i.jsxs)(d.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,i.jsx)(u.MdWarning,{className:"h-5 w-5 text-warning"}),"At-Risk Buyers (",e.length,")"]})}),(0,i.jsxs)(d.CardContent,{className:"space-y-3",children:[(0,i.jsx)("p",{className:"text-sm text-muted-foreground",children:"These buyers haven't purchased in over 90 days. Consider reaching out to re-engage them."}),e.slice(0,5).map(e=>(0,i.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-warning/5 border border-warning/20",children:[(0,i.jsxs)(w.Avatar,{className:"h-10 w-10",children:[(0,i.jsx)(w.AvatarImage,{src:e.buyerAvatar||void 0}),(0,i.jsx)(w.AvatarFallback,{children:(0,m.getInitials)(e.buyerName)})]}),(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,i.jsx)("p",{className:"font-medium text-foreground truncate",children:e.buyerName||"Anonymous"}),(0,i.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.totalSessions," sessions • Last active ",(0,m.formatRelativeTime)(e.lastPurchaseAt)]})]}),(0,i.jsxs)(j.Button,{size:"sm",variant:"outline",className:"gap-1",children:[(0,i.jsx)(u.MdEmail,{className:"h-4 w-4"}),"Reach Out"]})]},e.buyerId)),e.length>5&&(0,i.jsxs)("p",{className:"text-sm text-muted-foreground text-center",children:["+",e.length-5," more at-risk buyers"]})]})]})}let tX=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],tq=Array.from({length:24},(e,t)=>t);function tZ({data:e}){let t=new Map,r=0;for(let a of e.heatmap)t.set(`${a.day}-${a.hour}`,a.count),a.count>r&&(r=a.count);let a=e=>0===e?"12am":12===e?"12pm":e<12?`${e}am`:`${e-12}pm`,n=[...e.peakHours].sort((e,t)=>t.count-e.count).slice(0,3),s=[...e.peakDays].sort((e,t)=>t.count-e.count).slice(0,3);return 0===e.heatmap.length?(0,i.jsxs)(d.Card,{children:[(0,i.jsx)(d.CardHeader,{children:(0,i.jsx)(d.CardTitle,{className:"text-lg",children:"Peak Booking Times"})}),(0,i.jsx)(d.CardContent,{children:(0,i.jsxs)("div",{className:"text-center py-12",children:[(0,i.jsx)("p",{className:"text-muted-foreground",children:"Not enough data yet"}),(0,i.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Peak times will appear as you complete more sessions"})]})})]}):(0,i.jsxs)(d.Card,{children:[(0,i.jsx)(d.CardHeader,{children:(0,i.jsx)(d.CardTitle,{className:"text-lg",children:"Peak Booking Times"})}),(0,i.jsxs)(d.CardContent,{children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"text-sm font-medium text-foreground mb-2",children:"Top Hours"}),(0,i.jsx)("div",{className:"space-y-1",children:n.map((e,t)=>(0,i.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,i.jsxs)("span",{className:"text-muted-foreground",children:["#",t+1," ",a(e.hour)]}),(0,i.jsxs)("span",{className:"font-medium",children:[e.count," sessions"]})]},e.hour))})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"text-sm font-medium text-foreground mb-2",children:"Top Days"}),(0,i.jsx)("div",{className:"space-y-1",children:s.map((e,t)=>(0,i.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,i.jsxs)("span",{className:"text-muted-foreground",children:["#",t+1," ",tX[e.day]]}),(0,i.jsxs)("span",{className:"font-medium",children:[e.count," sessions"]})]},e.day))})]})]}),(0,i.jsx)("div",{className:"overflow-x-auto",children:(0,i.jsxs)("div",{className:"min-w-[600px]",children:[(0,i.jsxs)("div",{className:"flex mb-1",children:[(0,i.jsx)("div",{className:"w-12"}),tq.filter((e,t)=>t%3==0).map(e=>(0,i.jsx)("div",{className:"w-4 text-[10px] text-muted-foreground",style:{marginLeft:0===e?0:"8px"},children:a(e)},e))]}),tX.map((e,n)=>(0,i.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[(0,i.jsx)("div",{className:"w-10 text-xs text-muted-foreground",children:e}),tq.map(s=>(0,i.jsx)("div",{className:(0,m.cn)("w-4 h-4 rounded-sm transition-colors",((e,a)=>{let n=t.get(`${e}-${a}`)||0;if(0===n)return"bg-muted/30";let s=n/r;return s>.75?"bg-primary":s>.5?"bg-primary/70":s>.25?"bg-primary/40":"bg-primary/20"})(n,s)),title:`${e} ${a(s)}: ${t.get(`${n}-${s}`)||0} sessions`},`${n}-${s}`))]},e))]})}),(0,i.jsxs)("div",{className:"flex items-center justify-end gap-2 mt-4",children:[(0,i.jsx)("span",{className:"text-xs text-muted-foreground",children:"Less"}),(0,i.jsxs)("div",{className:"flex gap-1",children:[(0,i.jsx)("div",{className:"w-3 h-3 rounded-sm bg-muted/30"}),(0,i.jsx)("div",{className:"w-3 h-3 rounded-sm bg-primary/20"}),(0,i.jsx)("div",{className:"w-3 h-3 rounded-sm bg-primary/40"}),(0,i.jsx)("div",{className:"w-3 h-3 rounded-sm bg-primary/70"}),(0,i.jsx)("div",{className:"w-3 h-3 rounded-sm bg-primary"})]}),(0,i.jsx)("span",{className:"text-xs text-muted-foreground",children:"More"})]})]})]})}var tJ=e.i(18737),t_=e.i(87943),tQ=e.i(81760),t0=e.i(62962);function t1({className:e}){let[t,r]=(0,l.useState)(!1),[a,n]=(0,l.useState)(!1),[s,o]=(0,l.useState)(null),[c,d]=(0,l.useState)(""),[h,p]=(0,l.useState)(""),x=async(e,t=!1)=>{if(t){o(e),n(!0);return}r(!0);try{let t=await fetch("/api/sellers/export",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:e,...c&&{startDate:c},...h&&{endDate:h}})});if(!t.ok)throw Error("Export failed");let r=t.headers.get("Content-Disposition"),a=r?.match(/filename="(.+)"/),s=a?.[1]||`export_${e}.csv`,i=await t.blob(),l=window.URL.createObjectURL(i),u=document.createElement("a");u.href=l,u.download=s,document.body.appendChild(u),u.click(),window.URL.revokeObjectURL(l),document.body.removeChild(u),n(!1),d(""),p(""),o(null)}catch(e){console.error("Export error:",e)}finally{r(!1)}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(tJ.DropdownMenu,{children:[(0,i.jsx)(tJ.DropdownMenuTrigger,{asChild:!0,children:(0,i.jsxs)(j.Button,{variant:"outline",className:(0,m.cn)("gap-2",e),disabled:t,children:[(0,i.jsx)(u.MdDownload,{className:"h-4 w-4"}),t?"Exporting...":"Export"]})}),(0,i.jsxs)(tJ.DropdownMenuContent,{align:"end",className:"w-56",children:[(0,i.jsx)(tJ.DropdownMenuLabel,{children:"Export Data"}),(0,i.jsx)(tJ.DropdownMenuSeparator,{}),[{type:"purchases",label:"Purchases",description:"All completed purchases"},{type:"sessions",label:"Sessions",description:"All session history"},{type:"analytics",label:"Daily Analytics",description:"Daily revenue stats"},{type:"buyers",label:"Buyers",description:"Buyer list with insights"}].map(e=>(0,i.jsxs)(tJ.DropdownMenuItem,{onClick:()=>x(e.type,"buyers"!==e.type),className:"flex flex-col items-start",children:[(0,i.jsx)("span",{className:"font-medium",children:e.label}),(0,i.jsx)("span",{className:"text-xs text-muted-foreground",children:e.description})]},e.type))]})]}),(0,i.jsx)(t_.Dialog,{open:a,onOpenChange:n,children:(0,i.jsxs)(t_.DialogContent,{className:"sm:max-w-[400px]",children:[(0,i.jsxs)(t_.DialogHeader,{children:[(0,i.jsxs)(t_.DialogTitle,{children:["Export ",s]}),(0,i.jsx)(t_.DialogDescription,{children:"Optionally specify a date range for your export, or leave blank to export all data."})]}),(0,i.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,i.jsxs)("div",{className:"grid gap-2",children:[(0,i.jsx)(tQ.Label,{htmlFor:"startDate",children:"Start Date"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(u.MdCalendarToday,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,i.jsx)(t0.Input,{id:"startDate",type:"date",value:c,onChange:e=>d(e.target.value),className:"pl-10"})]})]}),(0,i.jsxs)("div",{className:"grid gap-2",children:[(0,i.jsx)(tQ.Label,{htmlFor:"endDate",children:"End Date"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(u.MdCalendarToday,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,i.jsx)(t0.Input,{id:"endDate",type:"date",value:h,onChange:e=>p(e.target.value),className:"pl-10"})]})]})]}),(0,i.jsxs)(t_.DialogFooter,{children:[(0,i.jsx)(j.Button,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),(0,i.jsx)(j.Button,{onClick:()=>s&&x(s,!1),disabled:t,children:t?"Exporting...":"Export CSV"})]})]})})]})}function t2({experienceId:e}){let[t,r]=(0,l.useState)("revenue"),[a,n]=(0,l.useState)(!0),[s,c]=(0,l.useState)(null),[d,u]=(0,l.useState)([]),[m,p]=(0,l.useState)(null),[x,f]=(0,l.useState)(null),[y,v]=(0,l.useState)([]),[g,b]=(0,l.useState)(null),[j,w]=(0,l.useState)(!1),O=async(e="daily")=>{try{let[t,r,a]=await Promise.all([fetch(`/api/sellers/analytics/revenue?period=${e}&days=30`),fetch("/api/sellers/analytics/top-buyers?limit=5"),fetch("/api/sellers/analytics/peak-times")]);if(t.ok){let e=await t.json();c(e)}if(r.ok){let e=await r.json();u(e.topBuyers||[])}if(a.ok){let e=await a.json();p(e)}}catch(e){console.error("Error fetching revenue data:",e)}},I=async()=>{try{let e=await fetch("/api/sellers/analytics/retention");if(e.ok){let t=await e.json();f(t)}}catch(e){console.error("Error fetching retention data:",e)}},P=async(e="totalSpent",t=null,r)=>{try{let a=new URLSearchParams({sort:e,limit:"20"});t&&a.set("churnRisk",t),r&&a.set("cursor",r);let n=await fetch(`/api/sellers/analytics/buyers?${a}`);if(n.ok){let e=await n.json();r?v(t=>[...t,...e.buyers]):v(e.buyers||[]),b(e.nextCursor),w(!!e.nextCursor)}}catch(e){console.error("Error fetching buyers data:",e)}};if((0,l.useEffect)(()=>{(async()=>{n(!0),await Promise.all([O(),I(),P()]),n(!1)})()},[]),a)return(0,i.jsx)(t3,{});let A=s?.totalRevenue||0,T=s?.periodComparison.changePercent||0,k=s?.chartData.reduce((e,t)=>e+t.sessions,0)||0,E=s?.chartData.reduce((e,t)=>e+t.purchases,0)||0,D=y.length,M=y.filter(e=>"high"===e.churnRisk).map(e=>({buyerId:e.buyerId,buyerName:e.buyerName,buyerAvatar:e.buyerAvatar,lastPurchaseAt:e.lastPurchaseAt,totalSessions:e.totalSessions}));return(0,i.jsxs)("div",{className:"p-4 sm:p-6 md:p-8",children:[(0,i.jsxs)("div",{className:"mb-6 flex items-start justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-2xl font-semibold text-foreground",children:"Analytics"}),(0,i.jsx)("p",{className:"text-muted-foreground mt-1",children:"Track your performance and understand your customers"})]}),(0,i.jsx)(t1,{})]}),(0,i.jsx)("div",{className:"mb-8",children:(0,i.jsx)(h,{totalRevenue:A,revenueChange:T,totalSessions:k,averageOrderValue:E>0?A/E:0,totalBuyers:D})}),(0,i.jsxs)(o.Tabs,{value:t,onValueChange:r,children:[(0,i.jsxs)(o.TabsList,{className:"mb-6",children:[(0,i.jsx)(o.TabsTrigger,{value:"revenue",children:"Revenue"}),(0,i.jsx)(o.TabsTrigger,{value:"retention",children:"Retention"}),(0,i.jsx)(o.TabsTrigger,{value:"buyers",children:"Buyers"})]}),(0,i.jsxs)(o.TabsContent,{value:"revenue",className:"space-y-6",children:[(0,i.jsx)(N,{data:s?.chartData||[],onPeriodChange:e=>{O(e)}}),(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,i.jsx)(S,{buyers:d}),m&&(0,i.jsx)(tZ,{data:m})]})]}),(0,i.jsxs)(o.TabsContent,{value:"retention",className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[x&&(0,i.jsx)(C,{metrics:x}),(0,i.jsx)(tY,{atRiskBuyers:M})]}),x&&(0,i.jsx)(tV,{data:x.cohorts})]}),(0,i.jsx)(o.TabsContent,{value:"buyers",children:(0,i.jsx)(tU,{buyers:y,onSortChange:e=>{P(e,null)},onChurnRiskFilter:e=>{P("totalSpent",e)},onLoadMore:()=>{g&&P("totalSpent",null,g)},hasMore:j})})]})]})}function t3(){return(0,i.jsxs)("div",{className:"p-4 sm:p-6 md:p-8",children:[(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)(c.Skeleton,{className:"h-8 w-48"}),(0,i.jsx)(c.Skeleton,{className:"h-4 w-64 mt-2"})]}),(0,i.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,i.jsx)(d.Card,{children:(0,i.jsx)(d.CardContent,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)(c.Skeleton,{className:"h-10 w-10 rounded-full"}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(c.Skeleton,{className:"h-4 w-20"}),(0,i.jsx)(c.Skeleton,{className:"h-6 w-16"})]})]})})},t))}),(0,i.jsx)(c.Skeleton,{className:"h-10 w-64 mb-6"}),(0,i.jsx)(d.Card,{children:(0,i.jsx)(d.CardContent,{className:"p-6",children:(0,i.jsx)(c.Skeleton,{className:"h-[300px] w-full"})})})]})}e.s(["SellerAnalyticsTab",()=>t2],92751)},15212,e=>{e.n(e.i(92751))}]);