{"version":3,"sources":["../../../../waliet/lib/dual-auth.ts","../../../../waliet/node_modules/date-fns/constants.js","../../../../waliet/node_modules/date-fns/constructFrom.js","../../../../waliet/node_modules/date-fns/toDate.js"],"sourcesContent":["import { headers, cookies } from \"next/headers\";\nimport { createClient } from \"./supabase/server\";\nimport { whopsdk } from \"./whop-sdk\";\nimport { prisma } from \"./prisma\";\n\nexport type AuthProvider = \"whop\" | \"supabase\";\n\nexport interface DualAuthUser {\n  id: string;\n  name: string | null;\n  email: string | null;\n  avatar: string | null;\n  provider: AuthProvider;\n  providerId: string; // The ID from the auth provider (whopUserId or supabase user id)\n}\n\nexport interface DualAuthResult {\n  user: DualAuthUser;\n  dbUser: {\n    id: string;\n    name: string | null;\n    avatar: string | null;\n    email: string | null;\n    sellerProfile: {\n      id: string;\n      hourlyRate: number;\n      bio: string | null;\n      tagline: string | null;\n      averageRating: number | null;\n      totalSessionsCompleted: number;\n      totalReviews: number;\n      isVerified: boolean;\n      isActive: boolean;\n    } | null;\n  };\n}\n\n/**\n * Get authenticated user from either Whop or Supabase\n * Tries Whop first (for in-app usage), then falls back to Supabase\n */\nexport async function getDualAuthUser(): Promise<DualAuthResult | null> {\n  // Try Whop auth first\n  const whopUser = await tryWhopAuth();\n  if (whopUser) {\n    console.log(\"[DualAuth] Authenticated via Whop:\", whopUser.userId);\n    const dbUser = await syncWhopUserToDatabase(whopUser);\n    return {\n      user: {\n        id: dbUser.id,\n        name: whopUser.name,\n        email: whopUser.email || null,\n        avatar: whopUser.profilePicUrl || null,\n        provider: \"whop\",\n        providerId: whopUser.userId,\n      },\n      dbUser,\n    };\n  }\n\n  // Try Supabase auth\n  const supabaseUser = await trySupabaseAuth();\n  if (supabaseUser) {\n    console.log(\"[DualAuth] Authenticated via Supabase:\", supabaseUser.id);\n    const dbUser = await syncSupabaseUserToDatabase(supabaseUser);\n    return {\n      user: {\n        id: dbUser.id,\n        name: supabaseUser.name,\n        email: supabaseUser.email,\n        avatar: supabaseUser.avatar,\n        provider: \"supabase\",\n        providerId: supabaseUser.id,\n      },\n      dbUser,\n    };\n  }\n\n  console.log(\"[DualAuth] No authentication found\");\n  return null;\n}\n\ninterface WhopUserData {\n  userId: string;\n  name: string | null;\n  username: string;\n  email?: string;\n  profilePicUrl?: string;\n}\n\nasync function tryWhopAuth(): Promise<WhopUserData | null> {\n  try {\n    const cookieStore = await cookies();\n\n    // Check if user explicitly logged out - skip ALL Whop auth\n    const loggedOutCookie = cookieStore.get(\"waliet-logged-out\");\n    const loggedOut = loggedOutCookie?.value === \"true\";\n\n    console.log(\"[DualAuth] waliet-logged-out cookie:\", loggedOutCookie?.value, \"| loggedOut:\", loggedOut);\n\n    if (loggedOut) {\n      console.log(\"[DualAuth] User logged out, skipping Whop auth\");\n      return null;\n    }\n\n    // In development, allow bypassing auth with DEV_WHOP_USER_ID\n    if (process.env.NODE_ENV === \"development\" && process.env.DEV_WHOP_USER_ID) {\n      const userId = process.env.DEV_WHOP_USER_ID;\n      const user = await whopsdk.users.retrieve(userId);\n      type ExtendedWhopUser = { email?: string };\n      const extendedUser = user as unknown as ExtendedWhopUser;\n      return {\n        userId,\n        name: user.name,\n        username: user.username,\n        email: extendedUser.email,\n        profilePicUrl: user.profile_picture?.url || undefined,\n      };\n    }\n\n    // Normal auth flow - verify token from headers\n    const headersList = await headers();\n    const whopToken = headersList.get(\"x-whop-user-token\");\n\n    if (!whopToken) {\n      return null;\n    }\n\n    const result = await whopsdk.verifyUserToken(headersList);\n    const user = await whopsdk.users.retrieve(result.userId);\n    type ExtendedWhopUser = { email?: string };\n    const extendedUser = user as unknown as ExtendedWhopUser;\n\n    return {\n      userId: result.userId,\n      name: user.name,\n      username: user.username,\n      email: extendedUser.email,\n      profilePicUrl: user.profile_picture?.url || undefined,\n    };\n  } catch {\n    return null;\n  }\n}\n\ninterface SupabaseUserData {\n  id: string;\n  email: string;\n  name: string | null;\n  avatar: string | null;\n}\n\nasync function trySupabaseAuth(): Promise<SupabaseUserData | null> {\n  try {\n    // Check if Supabase is configured\n    if (!process.env.NEXT_PUBLIC_SUPABASE_URL || !process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY) {\n      console.log(\"[DualAuth] Supabase not configured\");\n      return null;\n    }\n\n    const supabase = await createClient();\n    const { data: { user }, error } = await supabase.auth.getUser();\n\n    console.log(\"[DualAuth] Supabase auth check - user:\", user?.id, \"error:\", error?.message);\n\n    if (error || !user) {\n      return null;\n    }\n\n    return {\n      id: user.id,\n      email: user.email || \"\",\n      name: user.user_metadata?.full_name || user.user_metadata?.name || null,\n      avatar: user.user_metadata?.avatar_url || user.user_metadata?.picture || null,\n    };\n  } catch (e) {\n    console.log(\"[DualAuth] Supabase auth error:\", e);\n    return null;\n  }\n}\n\nasync function syncWhopUserToDatabase(whopUser: WhopUserData) {\n  const user = await prisma.user.upsert({\n    where: { whopUserId: whopUser.userId },\n    update: {\n      name: whopUser.name,\n      avatar: whopUser.profilePicUrl || null,\n      email: whopUser.email || undefined,\n    },\n    create: {\n      whopUserId: whopUser.userId,\n      name: whopUser.name,\n      avatar: whopUser.profilePicUrl || null,\n      email: whopUser.email || null,\n    },\n    include: {\n      sellerProfile: {\n        select: {\n          id: true,\n          hourlyRate: true,\n          bio: true,\n          tagline: true,\n          averageRating: true,\n          totalSessionsCompleted: true,\n          totalReviews: true,\n          isVerified: true,\n          isActive: true,\n        },\n      },\n    },\n  });\n\n  // Create seller profile if doesn't exist (everyone is a seller by default)\n  if (!user.sellerProfile) {\n    await prisma.sellerProfile.create({\n      data: {\n        userId: user.id,\n        hourlyRate: 0, // Default rate, user can set later\n        isActive: true,\n      },\n    });\n\n    // Fetch the updated user with seller profile\n    return prisma.user.findUniqueOrThrow({\n      where: { id: user.id },\n      include: {\n        sellerProfile: {\n          select: {\n            id: true,\n            hourlyRate: true,\n            bio: true,\n            tagline: true,\n            averageRating: true,\n            totalSessionsCompleted: true,\n            totalReviews: true,\n            isVerified: true,\n            isActive: true,\n          },\n        },\n      },\n    });\n  }\n\n  return user;\n}\n\nasync function syncSupabaseUserToDatabase(supabaseUser: SupabaseUserData) {\n  // For Supabase users, we use supabaseUserId field\n  // First check if user exists by supabaseUserId\n  const existing = await prisma.user.findUnique({\n    where: { supabaseUserId: supabaseUser.id },\n    include: {\n      sellerProfile: {\n        select: {\n          id: true,\n          hourlyRate: true,\n          bio: true,\n          tagline: true,\n          averageRating: true,\n          totalSessionsCompleted: true,\n          totalReviews: true,\n          isVerified: true,\n          isActive: true,\n        },\n      },\n    },\n  });\n\n  if (existing) {\n    // Update existing user\n    const user = await prisma.user.update({\n      where: { id: existing.id },\n      data: {\n        name: supabaseUser.name || existing.name,\n        avatar: supabaseUser.avatar || existing.avatar,\n        email: supabaseUser.email || existing.email,\n      },\n      include: {\n        sellerProfile: {\n          select: {\n            id: true,\n            hourlyRate: true,\n            bio: true,\n            tagline: true,\n            averageRating: true,\n            totalSessionsCompleted: true,\n            totalReviews: true,\n            isVerified: true,\n            isActive: true,\n          },\n        },\n      },\n    });\n\n    // Create seller profile if doesn't exist (everyone is a seller by default)\n    if (!user.sellerProfile) {\n      await prisma.sellerProfile.create({\n        data: {\n          userId: user.id,\n          hourlyRate: 0,\n          isActive: true,\n        },\n      });\n\n      return prisma.user.findUniqueOrThrow({\n        where: { id: user.id },\n        include: {\n          sellerProfile: {\n            select: {\n              id: true,\n              hourlyRate: true,\n              bio: true,\n              tagline: true,\n              averageRating: true,\n              totalSessionsCompleted: true,\n              totalReviews: true,\n              isVerified: true,\n              isActive: true,\n            },\n          },\n        },\n      });\n    }\n\n    return user;\n  }\n\n  // Create new user\n  const newUser = await prisma.user.create({\n    data: {\n      supabaseUserId: supabaseUser.id,\n      name: supabaseUser.name,\n      avatar: supabaseUser.avatar,\n      email: supabaseUser.email,\n    },\n  });\n\n  // Create seller profile for new user\n  await prisma.sellerProfile.create({\n    data: {\n      userId: newUser.id,\n      hourlyRate: 0,\n      isActive: true,\n    },\n  });\n\n  return prisma.user.findUniqueOrThrow({\n    where: { id: newUser.id },\n    include: {\n      sellerProfile: {\n        select: {\n          id: true,\n          hourlyRate: true,\n          bio: true,\n          tagline: true,\n          averageRating: true,\n          totalSessionsCompleted: true,\n          totalReviews: true,\n          isVerified: true,\n          isActive: true,\n        },\n      },\n    },\n  });\n}\n","/**\n * @module constants\n * @summary Useful constants\n * @description\n * Collection of useful date constants.\n *\n * The constants could be imported from `date-fns/constants`:\n *\n * ```ts\n * import { maxTime, minTime } from \"./constants/date-fns/constants\";\n *\n * function isAllowedTime(time) {\n *   return time <= maxTime && time >= minTime;\n * }\n * ```\n */\n\n/**\n * @constant\n * @name daysInWeek\n * @summary Days in 1 week.\n */\nexport const daysInWeek = 7;\n\n/**\n * @constant\n * @name daysInYear\n * @summary Days in 1 year.\n *\n * @description\n * How many days in a year.\n *\n * One years equals 365.2425 days according to the formula:\n *\n * > Leap year occurs every 4 years, except for years that are divisible by 100 and not divisible by 400.\n * > 1 mean year = (365+1/4-1/100+1/400) days = 365.2425 days\n */\nexport const daysInYear = 365.2425;\n\n/**\n * @constant\n * @name maxTime\n * @summary Maximum allowed time.\n *\n * @example\n * import { maxTime } from \"./constants/date-fns/constants\";\n *\n * const isValid = 8640000000000001 <= maxTime;\n * //=> false\n *\n * new Date(8640000000000001);\n * //=> Invalid Date\n */\nexport const maxTime = Math.pow(10, 8) * 24 * 60 * 60 * 1000;\n\n/**\n * @constant\n * @name minTime\n * @summary Minimum allowed time.\n *\n * @example\n * import { minTime } from \"./constants/date-fns/constants\";\n *\n * const isValid = -8640000000000001 >= minTime;\n * //=> false\n *\n * new Date(-8640000000000001)\n * //=> Invalid Date\n */\nexport const minTime = -maxTime;\n\n/**\n * @constant\n * @name millisecondsInWeek\n * @summary Milliseconds in 1 week.\n */\nexport const millisecondsInWeek = 604800000;\n\n/**\n * @constant\n * @name millisecondsInDay\n * @summary Milliseconds in 1 day.\n */\nexport const millisecondsInDay = 86400000;\n\n/**\n * @constant\n * @name millisecondsInMinute\n * @summary Milliseconds in 1 minute\n */\nexport const millisecondsInMinute = 60000;\n\n/**\n * @constant\n * @name millisecondsInHour\n * @summary Milliseconds in 1 hour\n */\nexport const millisecondsInHour = 3600000;\n\n/**\n * @constant\n * @name millisecondsInSecond\n * @summary Milliseconds in 1 second\n */\nexport const millisecondsInSecond = 1000;\n\n/**\n * @constant\n * @name minutesInYear\n * @summary Minutes in 1 year.\n */\nexport const minutesInYear = 525600;\n\n/**\n * @constant\n * @name minutesInMonth\n * @summary Minutes in 1 month.\n */\nexport const minutesInMonth = 43200;\n\n/**\n * @constant\n * @name minutesInDay\n * @summary Minutes in 1 day.\n */\nexport const minutesInDay = 1440;\n\n/**\n * @constant\n * @name minutesInHour\n * @summary Minutes in 1 hour.\n */\nexport const minutesInHour = 60;\n\n/**\n * @constant\n * @name monthsInQuarter\n * @summary Months in 1 quarter.\n */\nexport const monthsInQuarter = 3;\n\n/**\n * @constant\n * @name monthsInYear\n * @summary Months in 1 year.\n */\nexport const monthsInYear = 12;\n\n/**\n * @constant\n * @name quartersInYear\n * @summary Quarters in 1 year\n */\nexport const quartersInYear = 4;\n\n/**\n * @constant\n * @name secondsInHour\n * @summary Seconds in 1 hour.\n */\nexport const secondsInHour = 3600;\n\n/**\n * @constant\n * @name secondsInMinute\n * @summary Seconds in 1 minute.\n */\nexport const secondsInMinute = 60;\n\n/**\n * @constant\n * @name secondsInDay\n * @summary Seconds in 1 day.\n */\nexport const secondsInDay = secondsInHour * 24;\n\n/**\n * @constant\n * @name secondsInWeek\n * @summary Seconds in 1 week.\n */\nexport const secondsInWeek = secondsInDay * 7;\n\n/**\n * @constant\n * @name secondsInYear\n * @summary Seconds in 1 year.\n */\nexport const secondsInYear = secondsInDay * daysInYear;\n\n/**\n * @constant\n * @name secondsInMonth\n * @summary Seconds in 1 month\n */\nexport const secondsInMonth = secondsInYear / 12;\n\n/**\n * @constant\n * @name secondsInQuarter\n * @summary Seconds in 1 quarter.\n */\nexport const secondsInQuarter = secondsInMonth * 3;\n\n/**\n * @constant\n * @name constructFromSymbol\n * @summary Symbol enabling Date extensions to inherit properties from the reference date.\n *\n * The symbol is used to enable the `constructFrom` function to construct a date\n * using a reference date and a value. It allows to transfer extra properties\n * from the reference date to the new date. It's useful for extensions like\n * [`TZDate`](https://github.com/date-fns/tz) that accept a time zone as\n * a constructor argument.\n */\nexport const constructFromSymbol = Symbol.for(\"constructDateFrom\");\n","import { constructFromSymbol } from \"./constants.js\";\n\n/**\n * @name constructFrom\n * @category Generic Helpers\n * @summary Constructs a date using the reference date and the value\n *\n * @description\n * The function constructs a new date using the constructor from the reference\n * date and the given value. It helps to build generic functions that accept\n * date extensions.\n *\n * It defaults to `Date` if the passed reference date is a number or a string.\n *\n * Starting from v3.7.0, it allows to construct a date using `[Symbol.for(\"constructDateFrom\")]`\n * enabling to transfer extra properties from the reference date to the new date.\n * It's useful for extensions like [`TZDate`](https://github.com/date-fns/tz)\n * that accept a time zone as a constructor argument.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The reference date to take constructor from\n * @param value - The value to create the date\n *\n * @returns Date initialized using the given date and value\n *\n * @example\n * import { constructFrom } from \"./constructFrom/date-fns\";\n *\n * // A function that clones a date preserving the original type\n * function cloneDate<DateType extends Date>(date: DateType): DateType {\n *   return constructFrom(\n *     date, // Use constructor from the given date\n *     date.getTime() // Use the date value to create a new date\n *   );\n * }\n */\nexport function constructFrom(date, value) {\n  if (typeof date === \"function\") return date(value);\n\n  if (date && typeof date === \"object\" && constructFromSymbol in date)\n    return date[constructFromSymbol](value);\n\n  if (date instanceof Date) return new date.constructor(value);\n\n  return new Date(value);\n}\n\n// Fallback for modularized imports:\nexport default constructFrom;\n","import { constructFrom } from \"./constructFrom.js\";\n\n/**\n * @name toDate\n * @category Common Helpers\n * @summary Convert the given argument to an instance of Date.\n *\n * @description\n * Convert the given argument to an instance of Date.\n *\n * If the argument is an instance of Date, the function returns its clone.\n *\n * If the argument is a number, it is treated as a timestamp.\n *\n * If the argument is none of the above, the function returns Invalid Date.\n *\n * Starting from v3.7.0, it clones a date using `[Symbol.for(\"constructDateFrom\")]`\n * enabling to transfer extra properties from the reference date to the new date.\n * It's useful for extensions like [`TZDate`](https://github.com/date-fns/tz)\n * that accept a time zone as a constructor argument.\n *\n * **Note**: *all* Date arguments passed to any *date-fns* function is processed by `toDate`.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param argument - The value to convert\n *\n * @returns The parsed date in the local time zone\n *\n * @example\n * // Clone the date:\n * const result = toDate(new Date(2014, 1, 11, 11, 30, 30))\n * //=> Tue Feb 11 2014 11:30:30\n *\n * @example\n * // Convert the timestamp to date:\n * const result = toDate(1392098430000)\n * //=> Tue Feb 11 2014 11:30:30\n */\nexport function toDate(argument, context) {\n  // [TODO] Get rid of `toDate` or `constructFrom`?\n  return constructFrom(context || argument, argument);\n}\n\n// Fallback for modularized imports:\nexport default toDate;\n"],"names":[],"mappings":"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","ignoreList":[1,2,3]}