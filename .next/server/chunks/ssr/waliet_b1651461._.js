module.exports=[97658,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={RequestCookies:function(){return f.RequestCookies},ResponseCookies:function(){return f.ResponseCookies},stringifyCookie:function(){return f.stringifyCookie}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(36531)},48718,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ReflectAdapter",{enumerable:!0,get:function(){return d}});class d{static get(a,b,c){let d=Reflect.get(a,b,c);return"function"==typeof d?d.bind(a):d}static set(a,b,c,d){return Reflect.set(a,b,c,d)}static has(a,b){return Reflect.has(a,b)}static deleteProperty(a,b){return Reflect.deleteProperty(a,b)}}},7844,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={ActionDidNotRevalidate:function(){return f},ActionDidRevalidateDynamicOnly:function(){return h},ActionDidRevalidateStaticAndDynamic:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=0,g=1,h=2},92561,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={MutableRequestCookiesAdapter:function(){return o},ReadonlyRequestCookiesError:function(){return j},RequestCookiesAdapter:function(){return k},appendMutableCookies:function(){return n},areCookiesMutableInCurrentPhase:function(){return q},createCookiesWithMutableAccessCheck:function(){return p},getModifiedCookieValues:function(){return m},responseCookiesToRequestCookies:function(){return s}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(97658),g=a.r(48718),h=a.r(56704),i=a.r(7844);class j extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#options")}static callable(){throw new j}}class k{static seal(a){return new Proxy(a,{get(a,b,c){switch(b){case"clear":case"delete":case"set":return j.callable;default:return g.ReflectAdapter.get(a,b,c)}}})}}let l=Symbol.for("next.mutated.cookies");function m(a){let b=a[l];return b&&Array.isArray(b)&&0!==b.length?b:[]}function n(a,b){let c=m(b);if(0===c.length)return!1;let d=new f.ResponseCookies(a),e=d.getAll();for(let a of c)d.set(a);for(let a of e)d.set(a);return!0}class o{static wrap(a,b){let c=new f.ResponseCookies(new Headers);for(let b of a.getAll())c.set(b);let d=[],e=new Set,j=()=>{let a=h.workAsyncStorage.getStore();if(a&&(a.pathWasRevalidated=i.ActionDidRevalidateStaticAndDynamic),d=c.getAll().filter(a=>e.has(a.name)),b){let a=[];for(let b of d){let c=new f.ResponseCookies(new Headers);c.set(b),a.push(c.toString())}b(a)}},k=new Proxy(c,{get(a,b,c){switch(b){case l:return d;case"delete":return function(...b){e.add("string"==typeof b[0]?b[0]:b[0].name);try{return a.delete(...b),k}finally{j()}};case"set":return function(...b){e.add("string"==typeof b[0]?b[0]:b[0].name);try{return a.set(...b),k}finally{j()}};default:return g.ReflectAdapter.get(a,b,c)}}});return k}}function p(a){let b=new Proxy(a.mutableCookies,{get(c,d,e){switch(d){case"delete":return function(...d){return r(a,"cookies().delete"),c.delete(...d),b};case"set":return function(...d){return r(a,"cookies().set"),c.set(...d),b};default:return g.ReflectAdapter.get(c,d,e)}}});return b}function q(a){return"action"===a.phase}function r(a,b){if(!q(a))throw new j}function s(a){let b=new f.RequestCookies(new Headers);for(let c of a.getAll())b.set(c);return b}},1758,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"createDedupedByCallsiteServerErrorLoggerDev",{enumerable:!0,get:function(){return i}});let d=function(a,b){if(a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=e(void 0);if(c&&c.has(a))return c.get(a);var d={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(d,g,h):d[g]=a[g]}return d.default=a,c&&c.set(a,d),d}(a.r(1124));function e(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(e=function(a){return a?c:b})(a)}let f={current:null},g="function"==typeof d.cache?d.cache:a=>a,h=console.warn;function i(a){return function(...b){h(a(...b))}}g(a=>{try{h(f.current)}finally{f.current=null}})},41335,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={isRequestAPICallableInsideAfter:function(){return j},throwForSearchParamsAccessInUseCache:function(){return i},throwWithStaticGenerationBailoutErrorWithDynamicError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(36977),g=a.r(24725);function h(a,b){throw Object.defineProperty(new f.StaticGenBailoutError(`Route ${a} with \`dynamic = "error"\` couldn't be rendered statically because it used ${b}. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E543",enumerable:!1,configurable:!0})}function i(a,b){let c=Object.defineProperty(Error(`Route ${a.route} used \`searchParams\` inside "use cache". Accessing dynamic request data inside a cache scope is not supported. If you need some search params inside a cached function await \`searchParams\` outside of the cached function and pass only the required search params as arguments to the cached function. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E842",enumerable:!1,configurable:!0});throw Error.captureStackTrace(c,b),a.invalidDynamicUsageError??=c,c}function j(){let a=g.afterTaskAsyncStorage.getStore();return(null==a?void 0:a.rootTaskSpawnPhase)==="action"}},70353,(a,b,c)=>{"use strict";function d(){let a,b,c=new Promise((c,d)=>{a=c,b=d});return{resolve:a,reject:b,promise:c}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"createPromiseWithResolvers",{enumerable:!0,get:function(){return d}})},97804,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e={RenderStage:function(){return i},StagedRenderingController:function(){return j}};for(var f in e)Object.defineProperty(c,f,{enumerable:!0,get:e[f]});let g=a.r(86917),h=a.r(70353);var i=((d={})[d.Before=1]="Before",d[d.Static=2]="Static",d[d.Runtime=3]="Runtime",d[d.Dynamic=4]="Dynamic",d[d.Abandoned=5]="Abandoned",d);class j{constructor(a=null,b){this.abortSignal=a,this.hasRuntimePrefetch=b,this.currentStage=1,this.staticInterruptReason=null,this.runtimeInterruptReason=null,this.staticStageEndTime=1/0,this.runtimeStageEndTime=1/0,this.runtimeStageListeners=[],this.dynamicStageListeners=[],this.runtimeStagePromise=(0,h.createPromiseWithResolvers)(),this.dynamicStagePromise=(0,h.createPromiseWithResolvers)(),this.mayAbandon=!1,a&&(a.addEventListener("abort",()=>{let{reason:b}=a;this.currentStage<3&&(this.runtimeStagePromise.promise.catch(k),this.runtimeStagePromise.reject(b)),(this.currentStage<4||5===this.currentStage)&&(this.dynamicStagePromise.promise.catch(k),this.dynamicStagePromise.reject(b))},{once:!0}),this.mayAbandon=!0)}onStage(a,b){if(this.currentStage>=a)b();else if(3===a)this.runtimeStageListeners.push(b);else if(4===a)this.dynamicStageListeners.push(b);else throw Object.defineProperty(new g.InvariantError(`Invalid render stage: ${a}`),"__NEXT_ERROR_CODE",{value:"E881",enumerable:!1,configurable:!0})}canSyncInterrupt(){if(1===this.currentStage)return!1;let a=this.hasRuntimePrefetch?4:3;return this.currentStage<a}syncInterruptCurrentStageWithReason(a){if(1!==this.currentStage){if(this.mayAbandon)return this.abandonRenderImpl();switch(this.currentStage){case 2:this.staticInterruptReason=a,this.advanceStage(4);return;case 3:this.hasRuntimePrefetch&&(this.runtimeInterruptReason=a,this.advanceStage(4));return}}}getStaticInterruptReason(){return this.staticInterruptReason}getRuntimeInterruptReason(){return this.runtimeInterruptReason}getStaticStageEndTime(){return this.staticStageEndTime}getRuntimeStageEndTime(){return this.runtimeStageEndTime}abandonRender(){if(!this.mayAbandon)throw Object.defineProperty(new g.InvariantError("`abandonRender` called on a stage controller that cannot be abandoned."),"__NEXT_ERROR_CODE",{value:"E938",enumerable:!1,configurable:!0});this.abandonRenderImpl()}abandonRenderImpl(){let{currentStage:a}=this;switch(a){case 2:this.currentStage=5,this.resolveRuntimeStage();return;case 3:this.currentStage=5;return}}advanceStage(a){if(a<=this.currentStage)return;let b=this.currentStage;if(this.currentStage=a,b<3&&a>=3&&(this.staticStageEndTime=performance.now()+performance.timeOrigin,this.resolveRuntimeStage()),b<4&&a>=4){this.runtimeStageEndTime=performance.now()+performance.timeOrigin,this.resolveDynamicStage();return}}resolveRuntimeStage(){let a=this.runtimeStageListeners;for(let b=0;b<a.length;b++)a[b]();a.length=0,this.runtimeStagePromise.resolve()}resolveDynamicStage(){let a=this.dynamicStageListeners;for(let b=0;b<a.length;b++)a[b]();a.length=0,this.dynamicStagePromise.resolve()}getStagePromise(a){switch(a){case 3:return this.runtimeStagePromise.promise;case 4:return this.dynamicStagePromise.promise;default:throw Object.defineProperty(new g.InvariantError(`Invalid render stage: ${a}`),"__NEXT_ERROR_CODE",{value:"E881",enumerable:!1,configurable:!0})}}waitForStage(a){return this.getStagePromise(a)}delayUntilStage(a,b,c){var d,e,f;let g,h=(d=this.getStagePromise(a),e=b,f=c,g=new Promise((a,b)=>{d.then(a.bind(null,f),b)}),void 0!==e&&(g.displayName=e),g);return this.abortSignal&&h.catch(k),h}}function k(){}},27446,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"cookies",{enumerable:!0,get:function(){return n}});let d=a.r(92561),e=a.r(97658),f=a.r(56704),g=a.r(32319),h=a.r(96718),i=a.r(36977),j=a.r(10090),k=a.r(1758),l=a.r(41335),m=a.r(86917);function n(){let a="cookies",b=f.workAsyncStorage.getStore(),c=g.workUnitAsyncStorage.getStore();if(b){if(c&&"after"===c.phase&&!(0,l.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${b.route} used \`cookies()\` inside \`after()\`. This is not supported. If you need this data inside an \`after()\` callback, use \`cookies()\` outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E843",enumerable:!1,configurable:!0});if(b.forceStatic)return p(d.RequestCookiesAdapter.seal(new e.RequestCookies(new Headers({}))));if(b.dynamicShouldError)throw Object.defineProperty(new i.StaticGenBailoutError(`Route ${b.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`cookies()\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E849",enumerable:!1,configurable:!0});if(c)switch(c.type){case"cache":let f=Object.defineProperty(Error(`Route ${b.route} used \`cookies()\` inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`cookies()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E831",enumerable:!1,configurable:!0});throw Error.captureStackTrace(f,n),b.invalidDynamicUsageError??=f,f;case"unstable-cache":throw Object.defineProperty(Error(`Route ${b.route} used \`cookies()\` inside a function cached with \`unstable_cache()\`. Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`cookies()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E846",enumerable:!1,configurable:!0});case"prerender":var k=b,q=c;let g=o.get(q);if(g)return g;let r=(0,j.makeHangingPromise)(q.renderSignal,k.route,"`cookies()`");return o.set(q,r),r;case"prerender-client":let s="`cookies`";throw Object.defineProperty(new m.InvariantError(`${s} must not be used within a Client Component. Next.js should be preventing ${s} from being included in Client Components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E832",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,h.postponeWithTracking)(b.route,a,c.dynamicTracking);case"prerender-legacy":return(0,h.throwToInterruptStaticGeneration)(a,b,c);case"prerender-runtime":return(0,h.delayUntilRuntimeStage)(c,p(c.cookies));case"private-cache":return p(c.cookies);case"request":return(0,h.trackDynamicDataInDynamicRender)(c),p((0,d.areCookiesMutableInCurrentPhase)(c)?c.userspaceMutableCookies:c.cookies)}}(0,g.throwForMissingRequestStore)(a)}a.r(97804);let o=new WeakMap;function p(a){let b=o.get(a);if(b)return b;let c=Promise.resolve(a);return o.set(a,c),c}(0,k.createDedupedByCallsiteServerErrorLoggerDev)(function(a,b){let c=a?`Route "${a}" `:"This route ";return Object.defineProperty(Error(`${c}used ${b}. \`cookies()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E830",enumerable:!1,configurable:!0})})},33482,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={HeadersAdapter:function(){return h},ReadonlyHeadersError:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(48718);class g extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new g}}class h extends Headers{constructor(a){super(),this.headers=new Proxy(a,{get(b,c,d){if("symbol"==typeof c)return f.ReflectAdapter.get(b,c,d);let e=c.toLowerCase(),g=Object.keys(a).find(a=>a.toLowerCase()===e);if(void 0!==g)return f.ReflectAdapter.get(b,g,d)},set(b,c,d,e){if("symbol"==typeof c)return f.ReflectAdapter.set(b,c,d,e);let g=c.toLowerCase(),h=Object.keys(a).find(a=>a.toLowerCase()===g);return f.ReflectAdapter.set(b,h??c,d,e)},has(b,c){if("symbol"==typeof c)return f.ReflectAdapter.has(b,c);let d=c.toLowerCase(),e=Object.keys(a).find(a=>a.toLowerCase()===d);return void 0!==e&&f.ReflectAdapter.has(b,e)},deleteProperty(b,c){if("symbol"==typeof c)return f.ReflectAdapter.deleteProperty(b,c);let d=c.toLowerCase(),e=Object.keys(a).find(a=>a.toLowerCase()===d);return void 0===e||f.ReflectAdapter.deleteProperty(b,e)}})}static seal(a){return new Proxy(a,{get(a,b,c){switch(b){case"append":case"delete":case"set":return g.callable;default:return f.ReflectAdapter.get(a,b,c)}}})}merge(a){return Array.isArray(a)?a.join(", "):a}static from(a){return a instanceof Headers?a:new h(a)}append(a,b){let c=this.headers[a];"string"==typeof c?this.headers[a]=[c,b]:Array.isArray(c)?c.push(b):this.headers[a]=b}delete(a){delete this.headers[a]}get(a){let b=this.headers[a];return void 0!==b?this.merge(b):null}has(a){return void 0!==this.headers[a]}set(a,b){this.headers[a]=b}forEach(a,b){for(let[c,d]of this.entries())a.call(b,d,c,this)}*entries(){for(let a of Object.keys(this.headers)){let b=a.toLowerCase(),c=this.get(b);yield[b,c]}}*keys(){for(let a of Object.keys(this.headers)){let b=a.toLowerCase();yield b}}*values(){for(let a of Object.keys(this.headers)){let b=this.get(a);yield b}}[Symbol.iterator](){return this.entries()}}},79517,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"headers",{enumerable:!0,get:function(){return m}});let d=a.r(33482),e=a.r(56704),f=a.r(32319),g=a.r(96718),h=a.r(36977),i=a.r(10090),j=a.r(1758),k=a.r(41335),l=a.r(86917);function m(){let a="headers",b=e.workAsyncStorage.getStore(),c=f.workUnitAsyncStorage.getStore();if(b){if(c&&"after"===c.phase&&!(0,k.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${b.route} used \`headers()\` inside \`after()\`. This is not supported. If you need this data inside an \`after()\` callback, use \`headers()\` outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E839",enumerable:!1,configurable:!0});if(b.forceStatic)return o(d.HeadersAdapter.seal(new Headers({})));if(c)switch(c.type){case"cache":{let a=Object.defineProperty(Error(`Route ${b.route} used \`headers()\` inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`headers()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E833",enumerable:!1,configurable:!0});throw Error.captureStackTrace(a,m),b.invalidDynamicUsageError??=a,a}case"unstable-cache":throw Object.defineProperty(Error(`Route ${b.route} used \`headers()\` inside a function cached with \`unstable_cache()\`. Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`headers()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E838",enumerable:!1,configurable:!0})}if(b.dynamicShouldError)throw Object.defineProperty(new h.StaticGenBailoutError(`Route ${b.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`headers()\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E828",enumerable:!1,configurable:!0});if(c)switch(c.type){case"prerender":var j=b,p=c;let e=n.get(p);if(e)return e;let f=(0,i.makeHangingPromise)(p.renderSignal,j.route,"`headers()`");return n.set(p,f),f;case"prerender-client":let q="`headers`";throw Object.defineProperty(new l.InvariantError(`${q} must not be used within a client component. Next.js should be preventing ${q} from being included in client components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E693",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,g.postponeWithTracking)(b.route,a,c.dynamicTracking);case"prerender-legacy":return(0,g.throwToInterruptStaticGeneration)(a,b,c);case"prerender-runtime":return(0,g.delayUntilRuntimeStage)(c,o(c.headers));case"private-cache":return o(c.headers);case"request":return(0,g.trackDynamicDataInDynamicRender)(c),o(c.headers)}}(0,f.throwForMissingRequestStore)(a)}a.r(97804);let n=new WeakMap;function o(a){let b=n.get(a);if(b)return b;let c=Promise.resolve(a);return n.set(a,c),c}(0,j.createDedupedByCallsiteServerErrorLoggerDev)(function(a,b){let c=a?`Route "${a}" `:"This route ";return Object.defineProperty(Error(`${c}used ${b}. \`headers()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E836",enumerable:!1,configurable:!0})})},57044,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"draftMode",{enumerable:!0,get:function(){return k}});let d=a.r(32319),e=a.r(56704),f=a.r(96718),g=a.r(1758),h=a.r(36977),i=a.r(26355),j=a.r(86917);function k(){let a=e.workAsyncStorage.getStore(),b=d.workUnitAsyncStorage.getStore();switch((!a||!b)&&(0,d.throwForMissingRequestStore)("draftMode"),b.type){case"prerender-runtime":return(0,f.delayUntilRuntimeStage)(b,l(b.draftMode,a));case"request":return l(b.draftMode,a);case"cache":case"private-cache":case"unstable-cache":let c=(0,d.getDraftModeProviderForCacheScope)(a,b);if(c)return l(c,a);case"prerender":case"prerender-client":case"prerender-ppr":case"prerender-legacy":return l(null,a);default:return b}}function l(a,b){let c=n.get(a??m);return c||Promise.resolve(new o(a))}a.r(48718);let m={},n=new WeakMap;class o{constructor(a){this._provider=a}get isEnabled(){return null!==this._provider&&this._provider.isEnabled}enable(){p("draftMode().enable()",this.enable),null!==this._provider&&this._provider.enable()}disable(){p("draftMode().disable()",this.disable),null!==this._provider&&this._provider.disable()}}function p(a,b){let c=e.workAsyncStorage.getStore(),g=d.workUnitAsyncStorage.getStore();if(c){if((null==g?void 0:g.phase)==="after")throw Object.defineProperty(Error(`Route ${c.route} used "${a}" inside \`after()\`. The enabled status of \`draftMode()\` can be read inside \`after()\` but you cannot enable or disable \`draftMode()\`. See more info here: https://nextjs.org/docs/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E845",enumerable:!1,configurable:!0});if(c.dynamicShouldError)throw Object.defineProperty(new h.StaticGenBailoutError(`Route ${c.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${a}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(g)switch(g.type){case"cache":case"private-cache":{let d=Object.defineProperty(Error(`Route ${c.route} used "${a}" inside "use cache". The enabled status of \`draftMode()\` can be read in caches but you must not enable or disable \`draftMode()\` inside a cache. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E829",enumerable:!1,configurable:!0});throw Error.captureStackTrace(d,b),c.invalidDynamicUsageError??=d,d}case"unstable-cache":throw Object.defineProperty(Error(`Route ${c.route} used "${a}" inside a function cached with \`unstable_cache()\`. The enabled status of \`draftMode()\` can be read in caches but you must not enable or disable \`draftMode()\` inside a cache. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E844",enumerable:!1,configurable:!0});case"prerender":case"prerender-runtime":{let b=Object.defineProperty(Error(`Route ${c.route} used ${a} without first calling \`await connection()\`. See more info here: https://nextjs.org/docs/messages/next-prerender-sync-headers`),"__NEXT_ERROR_CODE",{value:"E126",enumerable:!1,configurable:!0});return(0,f.abortAndThrowOnSynchronousRequestDataAccess)(c.route,a,b,g)}case"prerender-client":let d="`draftMode`";throw Object.defineProperty(new j.InvariantError(`${d} must not be used within a Client Component. Next.js should be preventing ${d} from being included in Client Components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E832",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,f.postponeWithTracking)(c.route,a,g.dynamicTracking);case"prerender-legacy":g.revalidate=0;let e=Object.defineProperty(new i.DynamicServerError(`Route ${c.route} couldn't be rendered statically because it used \`${a}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw c.dynamicUsageDescription=a,c.dynamicUsageStack=e.stack,e;case"request":(0,f.trackDynamicDataInDynamicRender)(g)}}}(0,g.createDedupedByCallsiteServerErrorLoggerDev)(function(a,b){let c=a?`Route "${a}" `:"This route ";return Object.defineProperty(Error(`${c}used ${b}. \`draftMode()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E835",enumerable:!1,configurable:!0})})},97220,(a,b,c)=>{b.exports.cookies=a.r(27446).cookies,b.exports.headers=a.r(79517).headers,b.exports.draftMode=a.r(57044).draftMode},66633,(a,b,c)=>{"use strict";function d(a,b=""){if(!a)throw Error(b)}Object.defineProperty(c,"__esModule",{value:!0}),c.timingSafeEqual=void 0,c.timingSafeEqual=function(a,b){if(a.byteLength!==b.byteLength)return!1;a instanceof DataView||(a=new DataView(ArrayBuffer.isView(a)?a.buffer:a)),b instanceof DataView||(b=new DataView(ArrayBuffer.isView(b)?b.buffer:b)),d(a instanceof DataView),d(b instanceof DataView);let c=a.byteLength,e=0,f=-1;for(;++f<c;)e|=a.getUint8(f)^b.getUint8(f);return 0===e}},6837,(a,b,c)=>{"use strict";var d,e=a.e&&a.e.__extends||(d=function(a,b){return(d=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(a,b)},function(a,b){function c(){this.constructor=a}d(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)});Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a){void 0===a&&(a="="),this._paddingCharacter=a}return a.prototype.encodedLength=function(a){return this._paddingCharacter?(a+2)/3*4|0:(8*a+5)/6|0},a.prototype.encode=function(a){for(var b="",c=0;c<a.length-2;c+=3){var d=a[c]<<16|a[c+1]<<8|a[c+2];b+=this._encodeByte(d>>>18&63),b+=this._encodeByte(d>>>12&63),b+=this._encodeByte(d>>>6&63),b+=this._encodeByte(d>>>0&63)}var e=a.length-c;if(e>0){var d=a[c]<<16|(2===e?a[c+1]<<8:0);b+=this._encodeByte(d>>>18&63),b+=this._encodeByte(d>>>12&63),2===e?b+=this._encodeByte(d>>>6&63):b+=this._paddingCharacter||"",b+=this._paddingCharacter||""}return b},a.prototype.maxDecodedLength=function(a){return this._paddingCharacter?a/4*3|0:(6*a+7)/8|0},a.prototype.decodedLength=function(a){return this.maxDecodedLength(a.length-this._getPaddingLength(a))},a.prototype.decode=function(a){if(0===a.length)return new Uint8Array(0);for(var b=this._getPaddingLength(a),c=a.length-b,d=new Uint8Array(this.maxDecodedLength(c)),e=0,f=0,g=0,h=0,i=0,j=0,k=0;f<c-4;f+=4)h=this._decodeChar(a.charCodeAt(f+0)),i=this._decodeChar(a.charCodeAt(f+1)),j=this._decodeChar(a.charCodeAt(f+2)),k=this._decodeChar(a.charCodeAt(f+3)),d[e++]=h<<2|i>>>4,d[e++]=i<<4|j>>>2,d[e++]=j<<6|k,g|=256&h,g|=256&i,g|=256&j,g|=256&k;if(f<c-1&&(h=this._decodeChar(a.charCodeAt(f)),i=this._decodeChar(a.charCodeAt(f+1)),d[e++]=h<<2|i>>>4,g|=256&h,g|=256&i),f<c-2&&(j=this._decodeChar(a.charCodeAt(f+2)),d[e++]=i<<4|j>>>2,g|=256&j),f<c-3&&(k=this._decodeChar(a.charCodeAt(f+3)),d[e++]=j<<6|k,g|=256&k),0!==g)throw Error("Base64Coder: incorrect characters for decoding");return d},a.prototype._encodeByte=function(a){var b=a;return b+=65,b+=25-a>>>8&6,b+=51-a>>>8&-75,b+=61-a>>>8&-15,String.fromCharCode(b+=62-a>>>8&3)},a.prototype._decodeChar=function(a){return 256+((42-a&a-44)>>>8&-256+a-43+62)+((46-a&a-48)>>>8&-256+a-47+63)+((47-a&a-58)>>>8&-256+a-48+52)+((64-a&a-91)>>>8&-256+a-65+0)+((96-a&a-123)>>>8&-256+a-97+26)},a.prototype._getPaddingLength=function(a){var b=0;if(this._paddingCharacter){for(var c=a.length-1;c>=0&&a[c]===this._paddingCharacter;c--)b++;if(a.length<4||b>2)throw Error("Base64Coder: incorrect padding")}return b},a}();c.Coder=f;var g=new f;c.encode=function(a){return g.encode(a)},c.decode=function(a){return g.decode(a)};var h=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return e(b,a),b.prototype._encodeByte=function(a){var b=a;return b+=65,b+=25-a>>>8&6,b+=51-a>>>8&-75,b+=61-a>>>8&-13,String.fromCharCode(b+=62-a>>>8&49)},b.prototype._decodeChar=function(a){return 256+((44-a&a-46)>>>8&-256+a-45+62)+((94-a&a-96)>>>8&-256+a-95+63)+((47-a&a-58)>>>8&-256+a-48+52)+((64-a&a-91)>>>8&-256+a-65+0)+((96-a&a-123)>>>8&-256+a-97+26)},b}(f);c.URLSafeCoder=h;var i=new h;c.encodeURLSafe=function(a){return i.encode(a)},c.decodeURLSafe=function(a){return i.decode(a)},c.encodedLength=function(a){return g.encodedLength(a)},c.maxDecodedLength=function(a){return g.maxDecodedLength(a)},c.decodedLength=function(a){return g.decodedLength(a)}},25074,(a,b,c)=>{!function(c,d){var e={};d(e);var f=e.default;for(var g in e)f[g]=e[g];if("object"==typeof b.exports)b.exports=f;else if("function"==typeof define&&define.amd)a.r,void 0!==f&&a.v(f);else c.sha256=f}(a.e,function(a){"use strict";a.__esModule=!0,a.digestLength=32,a.blockSize=64;var b=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]);function c(a,c,d,e,f){for(var g,h,i,j,k,l,m,n,o,p,q,r,s;f>=64;){for(p=0,g=c[0],h=c[1],i=c[2],j=c[3],k=c[4],l=c[5],m=c[6],n=c[7];p<16;p++)q=e+4*p,a[p]=(255&d[q])<<24|(255&d[q+1])<<16|(255&d[q+2])<<8|255&d[q+3];for(p=16;p<64;p++)r=((o=a[p-2])>>>17|o<<15)^(o>>>19|o<<13)^o>>>10,s=((o=a[p-15])>>>7|o<<25)^(o>>>18|o<<14)^o>>>3,a[p]=(r+a[p-7]|0)+(s+a[p-16]|0);for(p=0;p<64;p++)r=(((k>>>6|k<<26)^(k>>>11|k<<21)^(k>>>25|k<<7))+(k&l^~k&m)|0)+(n+(b[p]+a[p]|0)|0)|0,s=((g>>>2|g<<30)^(g>>>13|g<<19)^(g>>>22|g<<10))+(g&h^g&i^h&i)|0,n=m,m=l,l=k,k=j+r|0,j=i,i=h,h=g,g=r+s|0;c[0]+=g,c[1]+=h,c[2]+=i,c[3]+=j,c[4]+=k,c[5]+=l,c[6]+=m,c[7]+=n,e+=64,f-=64}return e}var d=function(){function b(){this.digestLength=a.digestLength,this.blockSize=a.blockSize,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}return b.prototype.reset=function(){return this.state[0]=0x6a09e667,this.state[1]=0xbb67ae85,this.state[2]=0x3c6ef372,this.state[3]=0xa54ff53a,this.state[4]=0x510e527f,this.state[5]=0x9b05688c,this.state[6]=0x1f83d9ab,this.state[7]=0x5be0cd19,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this},b.prototype.clean=function(){for(var a=0;a<this.buffer.length;a++)this.buffer[a]=0;for(var a=0;a<this.temp.length;a++)this.temp[a]=0;this.reset()},b.prototype.update=function(a,b){if(void 0===b&&(b=a.length),this.finished)throw Error("SHA256: can't update because hash was finished.");var d=0;if(this.bytesHashed+=b,this.bufferLength>0){for(;this.bufferLength<64&&b>0;)this.buffer[this.bufferLength++]=a[d++],b--;64===this.bufferLength&&(c(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(b>=64&&(d=c(this.temp,this.state,a,d,b),b%=64);b>0;)this.buffer[this.bufferLength++]=a[d++],b--;return this},b.prototype.finish=function(a){if(!this.finished){var b=this.bytesHashed,d=this.bufferLength,e=b/0x20000000|0,f=b<<3,g=b%64<56?64:128;this.buffer[d]=128;for(var h=d+1;h<g-8;h++)this.buffer[h]=0;this.buffer[g-8]=e>>>24&255,this.buffer[g-7]=e>>>16&255,this.buffer[g-6]=e>>>8&255,this.buffer[g-5]=e>>>0&255,this.buffer[g-4]=f>>>24&255,this.buffer[g-3]=f>>>16&255,this.buffer[g-2]=f>>>8&255,this.buffer[g-1]=f>>>0&255,c(this.temp,this.state,this.buffer,0,g),this.finished=!0}for(var h=0;h<8;h++)a[4*h+0]=this.state[h]>>>24&255,a[4*h+1]=this.state[h]>>>16&255,a[4*h+2]=this.state[h]>>>8&255,a[4*h+3]=this.state[h]>>>0&255;return this},b.prototype.digest=function(){var a=new Uint8Array(this.digestLength);return this.finish(a),a},b.prototype._saveState=function(a){for(var b=0;b<this.state.length;b++)a[b]=this.state[b]},b.prototype._restoreState=function(a,b){for(var c=0;c<this.state.length;c++)this.state[c]=a[c];this.bytesHashed=b,this.finished=!1,this.bufferLength=0},b}();a.Hash=d;var e=function(){function a(a){this.inner=new d,this.outer=new d,this.blockSize=this.inner.blockSize,this.digestLength=this.inner.digestLength;var b=new Uint8Array(this.blockSize);if(a.length>this.blockSize)new d().update(a).finish(b).clean();else for(var c=0;c<a.length;c++)b[c]=a[c];for(var c=0;c<b.length;c++)b[c]^=54;this.inner.update(b);for(var c=0;c<b.length;c++)b[c]^=106;this.outer.update(b),this.istate=new Uint32Array(8),this.ostate=new Uint32Array(8),this.inner._saveState(this.istate),this.outer._saveState(this.ostate);for(var c=0;c<b.length;c++)b[c]=0}return a.prototype.reset=function(){return this.inner._restoreState(this.istate,this.inner.blockSize),this.outer._restoreState(this.ostate,this.outer.blockSize),this},a.prototype.clean=function(){for(var a=0;a<this.istate.length;a++)this.ostate[a]=this.istate[a]=0;this.inner.clean(),this.outer.clean()},a.prototype.update=function(a){return this.inner.update(a),this},a.prototype.finish=function(a){return this.outer.finished?this.outer.finish(a):(this.inner.finish(a),this.outer.update(a,this.digestLength).finish(a)),this},a.prototype.digest=function(){var a=new Uint8Array(this.digestLength);return this.finish(a),a},a}();function f(a){var b=new d().update(a),c=b.digest();return b.clean(),c}function g(a,b){var c=new e(a).update(b),d=c.digest();return c.clean(),d}a.HMAC=e,a.hash=f,a.default=f,a.hmac=g;var h=new Uint8Array(a.digestLength);a.hkdf=function(a,b,c,d){void 0===b&&(b=h),void 0===d&&(d=32);for(var f=new Uint8Array([1]),i=new e(g(b,a)),j=new Uint8Array(i.digestLength),k=j.length,l=new Uint8Array(d),m=0;m<d;m++)k===j.length&&(!function(a,b,c,d){var e=d[0];if(0===e)throw Error("hkdf: cannot expand more");b.reset(),e>1&&b.update(a),c&&b.update(c),b.update(d),b.finish(a),d[0]++}(j,i,c,f),k=0),l[m]=j[k++];return i.clean(),j.fill(0),f.fill(0),l},a.pbkdf2=function(a,b,c,d){for(var f=new e(a),g=f.digestLength,h=new Uint8Array(4),i=new Uint8Array(g),j=new Uint8Array(g),k=new Uint8Array(d),l=0;l*g<d;l++){var m=l+1;h[0]=m>>>24&255,h[1]=m>>>16&255,h[2]=m>>>8&255,h[3]=m>>>0&255,f.reset(),f.update(b),f.update(h),f.finish(j);for(var n=0;n<g;n++)i[n]=j[n];for(var n=2;n<=c;n++){f.reset(),f.update(j).finish(j);for(var o=0;o<g;o++)i[o]^=j[o]}for(var n=0;n<g&&l*g+n<d;n++)k[l*g+n]=i[n]}for(var l=0;l<g;l++)i[l]=j[l]=0;for(var l=0;l<4;l++)h[l]=0;return f.clean(),k}})},3749,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.Webhook=c.WebhookVerificationError=void 0;let d=a.r(66633),e=a.r(6837),f=a.r(25074);class g extends Error{constructor(a){super(a),Object.setPrototypeOf(this,g.prototype),this.name="ExtendableError",this.stack=Error(a).stack}}class h extends g{constructor(a){super(a),Object.setPrototypeOf(this,h.prototype),this.name="WebhookVerificationError"}}c.WebhookVerificationError=h;class i{constructor(a,b){if(!a)throw Error("Secret can't be empty.");if((null==b?void 0:b.format)==="raw")a instanceof Uint8Array?this.key=a:this.key=Uint8Array.from(a,a=>a.charCodeAt(0));else{if("string"!=typeof a)throw Error("Expected secret to be of type string");a.startsWith(i.prefix)&&(a=a.substring(i.prefix.length)),this.key=e.decode(a)}}verify(a,b){let c={};for(let a of Object.keys(b))c[a.toLowerCase()]=b[a];let e=c["webhook-id"],f=c["webhook-signature"],g=c["webhook-timestamp"];if(!f||!e||!g)throw new h("Missing required headers");let i=this.verifyTimestamp(g),j=this.sign(e,i,a).split(",")[1],k=f.split(" "),l=new globalThis.TextEncoder;for(let b of k){let[c,e]=b.split(",");if("v1"===c&&(0,d.timingSafeEqual)(l.encode(e),l.encode(j)))return JSON.parse(a.toString())}throw new h("No matching signature found")}sign(a,b,c){if("string"==typeof c);else if("Buffer"===c.constructor.name)c=c.toString();else throw Error("Expected payload to be of type string or Buffer.");let d=new TextEncoder,g=Math.floor(b.getTime()/1e3),h=d.encode(`${a}.${g}.${c}`),i=e.encode(f.hmac(this.key,h));return`v1,${i}`}verifyTimestamp(a){let b=Math.floor(Date.now()/1e3),c=parseInt(a,10);if(isNaN(c))throw new h("Invalid Signature Headers");if(b-c>300)throw new h("Message timestamp too old");if(c>b+300)throw new h("Message timestamp too new");return new Date(1e3*c)}}c.Webhook=i,i.prefix="whsec_"},27147,a=>{"use strict";let b,c,d;function e(a,b,c,d,e){if("m"===d)throw TypeError("Private method is not writable");if("a"===d&&!e)throw TypeError("Private accessor was defined without a setter");if("function"==typeof b?a!==b||!e:!b.has(a))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===d?e.call(a,c):e?e.value=c:b.set(a,c),c}function f(a,b,c,d){if("a"===c&&!d)throw TypeError("Private accessor was defined without a getter");if("function"==typeof b?a!==b||!d:!b.has(a))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===c?d:"a"===c?d.call(a):d?d.value:b.get(a)}let g=function(){let{crypto:a}=globalThis;if(a?.randomUUID)return g=a.randomUUID.bind(a),a.randomUUID();let b=new Uint8Array(1),c=a?()=>a.getRandomValues(b)[0]:()=>255*Math.random()&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,a=>(a^c()&15>>a/4).toString(16))},h=a=>{if(a instanceof Error)return a;if("object"==typeof a&&null!==a){try{if("[object Error]"===Object.prototype.toString.call(a)){let b=Error(a.message,a.cause?{cause:a.cause}:{});return a.stack&&(b.stack=a.stack),a.cause&&!b.cause&&(b.cause=a.cause),a.name&&(b.name=a.name),b}}catch{}try{return Error(JSON.stringify(a))}catch{}}return Error(a)};class i extends Error{}class j extends i{constructor(a,b,c,d){super(`${j.makeMessage(a,b,c)}`),this.status=a,this.headers=d,this.error=b}static makeMessage(a,b,c){let d=b?.message?"string"==typeof b.message?b.message:JSON.stringify(b.message):b?JSON.stringify(b):c;return a&&d?`${a} ${d}`:a?`${a} status code (no body)`:d||"(no status code or body)"}static generate(a,b,c,d){return a&&d?400===a?new n(a,b,c,d):401===a?new o(a,b,c,d):403===a?new p(a,b,c,d):404===a?new q(a,b,c,d):409===a?new r(a,b,c,d):422===a?new s(a,b,c,d):429===a?new t(a,b,c,d):a>=500?new u(a,b,c,d):new j(a,b,c,d):new l({message:c,cause:h(b)})}}class k extends j{constructor({message:a}={}){super(void 0,void 0,a||"Request was aborted.",void 0)}}class l extends j{constructor({message:a,cause:b}){super(void 0,void 0,a||"Connection error.",void 0),b&&(this.cause=b)}}class m extends l{constructor({message:a}={}){super({message:a??"Request timed out."})}}class n extends j{}class o extends j{}class p extends j{}class q extends j{}class r extends j{}class s extends j{}class t extends j{}class u extends j{}let v=/^[a-z][a-z0-9+.-]*:/i,w=a=>(w=Array.isArray)(a),x=w,y=a=>new Promise(b=>setTimeout(b,a)),z="0.0.23",A=a=>"x32"===a?"x32":"x86_64"===a||"x64"===a?"x64":"arm"===a?"arm":"aarch64"===a||"arm64"===a?"arm64":a?`other:${a}`:"unknown",B=a=>(a=a.toLowerCase()).includes("ios")?"iOS":"android"===a?"Android":"darwin"===a?"MacOS":"win32"===a?"Windows":"freebsd"===a?"FreeBSD":"openbsd"===a?"OpenBSD":"linux"===a?"Linux":a?`Other:${a}`:"Unknown";function C(){if("u">typeof fetch)return fetch;throw Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new Whop({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}async function D(a){if(null===a||"object"!=typeof a)return;if(a[Symbol.asyncIterator])return void await a[Symbol.asyncIterator]().return?.();let b=a.getReader(),c=b.cancel();b.releaseLock(),await c}let E=({headers:a,body:b})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(b)}),F="RFC3986",G=a=>String(a),H={RFC1738:a=>String(a).replace(/%20/g,"+"),RFC3986:G},I=(a,b)=>(I=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty))(a,b),J=(()=>{let a=[];for(let b=0;b<256;++b)a.push("%"+((b<16?"0":"")+b.toString(16)).toUpperCase());return a})();function K(a,b){if(w(a)){let c=[];for(let d=0;d<a.length;d+=1)c.push(b(a[d]));return c}return b(a)}let L={brackets:a=>String(a)+"[]",comma:"comma",indices:(a,b)=>String(a)+"["+b+"]",repeat:a=>String(a)},M=function(a,b){Array.prototype.push.apply(a,w(b)?b:[b])},N={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:(a,b,c,d,e)=>{if(0===a.length)return a;let f=a;if("symbol"==typeof a?f=Symbol.prototype.toString.call(a):"string"!=typeof a&&(f=String(a)),"iso-8859-1"===c)return escape(f).replace(/%u[0-9a-f]{4}/gi,function(a){return"%26%23"+parseInt(a.slice(2),16)+"%3B"});let g="";for(let a=0;a<f.length;a+=1024){let b=f.length>=1024?f.slice(a,a+1024):f,c=[];for(let a=0;a<b.length;++a){let d=b.charCodeAt(a);if(45===d||46===d||95===d||126===d||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||"RFC1738"===e&&(40===d||41===d)){c[c.length]=b.charAt(a);continue}if(d<128){c[c.length]=J[d];continue}if(d<2048){c[c.length]=J[192|d>>6]+J[128|63&d];continue}if(d<55296||d>=57344){c[c.length]=J[224|d>>12]+J[128|d>>6&63]+J[128|63&d];continue}a+=1,d=65536+((1023&d)<<10|1023&b.charCodeAt(a)),c[c.length]=J[240|d>>18]+J[128|d>>12&63]+J[128|d>>6&63]+J[128|63&d]}g+=c.join("")}return g},encodeValuesOnly:!1,format:F,formatter:G,indices:!1,serializeDate:a=>(c??(c=Function.prototype.call.bind(Date.prototype.toISOString)))(a),skipNulls:!1,strictNullHandling:!1},O={},P={off:0,error:200,warn:300,info:400,debug:500},Q=(a,b,c)=>{if(a){if(Object.prototype.hasOwnProperty.call(P,a))return a;V(c).warn(`${b} was set to ${JSON.stringify(a)}, expected one of ${JSON.stringify(Object.keys(P))}`)}};function R(){}function S(a,b,c){return!b||P[a]>P[c]?R:b[a].bind(b)}let T={error:R,warn:R,info:R,debug:R},U=new WeakMap;function V(a){let b=a.logger,c=a.logLevel??"off";if(!b)return T;let d=U.get(b);if(d&&d[0]===c)return d[1];let e={error:S("error",b,c),warn:S("warn",b,c),info:S("info",b,c),debug:S("debug",b,c)};return U.set(b,[c,e]),e}let W=a=>(a.options&&(a.options={...a.options},delete a.options.headers),a.headers&&(a.headers=Object.fromEntries((a.headers instanceof Headers?[...a.headers]:Object.entries(a.headers)).map(([a,b])=>[a,"authorization"===a.toLowerCase()||"cookie"===a.toLowerCase()||"set-cookie"===a.toLowerCase()?"***":b]))),"retryOfRequestLogID"in a&&(a.retryOfRequestLogID&&(a.retryOf=a.retryOfRequestLogID),delete a.retryOfRequestLogID),a);async function X(a,b){let{response:c,requestLogID:d,retryOfRequestLogID:e,startTime:f}=b,g=await (async()=>{if(204===c.status)return null;if(b.options.__binaryResponse)return c;let a=c.headers.get("content-type"),d=a?.split(";")[0]?.trim();return d?.includes("application/json")||d?.endsWith("+json")?await c.json():await c.text()})();return V(a).debug(`[${d}] response parsed`,W({retryOfRequestLogID:e,url:c.url,status:c.status,body:g,durationMs:Date.now()-f})),g}class Y extends Promise{constructor(a,b,c=X){super(a=>{a(null)}),this.responsePromise=b,this.parseResponse=c,a_.set(this,void 0),e(this,a_,a,"f")}_thenUnwrap(a){return new Y(f(this,a_,"f"),this.responsePromise,async(b,c)=>a(await this.parseResponse(b,c),c))}asResponse(){return this.responsePromise.then(a=>a.response)}async withResponse(){let[a,b]=await Promise.all([this.parse(),this.asResponse()]);return{data:a,response:b}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(a=>this.parseResponse(f(this,a_,"f"),a))),this.parsedPromise}then(a,b){return this.parse().then(a,b)}catch(a){return this.parse().catch(a)}finally(a){return this.parse().finally(a)}}a_=new WeakMap;class Z{constructor(a,b,c,d){a0.set(this,void 0),e(this,a0,a,"f"),this.options=d,this.response=b,this.body=c}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageRequestOptions()}async getNextPage(){let a=this.nextPageRequestOptions();if(!a)throw new i("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await f(this,a0,"f").requestAPIList(this.constructor,a)}async *iterPages(){let a=this;for(yield a;a.hasNextPage();)a=await a.getNextPage(),yield a}async *[(a0=new WeakMap,Symbol.asyncIterator)](){for await(let a of this.iterPages())for(let b of a.getPaginatedItems())yield b}}class $ extends Y{constructor(a,b,c){super(a,b,async(a,b)=>new c(a,b.response,await X(a,b),b.options))}async *[Symbol.asyncIterator](){for await(let a of(await this))yield a}}class _ extends Z{constructor(a,b,c,d){super(a,b,c,d),this.data=c.data||[],this.page_info=c.page_info||{}}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){var a;let b=this.page_info?.end_cursor;return b?{...this.options,query:{..."object"!=typeof(a=this.options.query)?{}:a??{},after:b}}:null}}let aa=()=>{if("u"<typeof File){let{process:a}=globalThis;throw Error("`File` is not defined as a global, which is required for file uploads."+("string"==typeof a?.versions?.node&&20>parseInt(a.versions.node.split("."))?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function ab(a,b,c){return aa(),new File(a,b??"unknown_file",c)}let ac=a=>null!=a&&"object"==typeof a&&"number"==typeof a.size&&"string"==typeof a.type&&"function"==typeof a.text&&"function"==typeof a.slice&&"function"==typeof a.arrayBuffer;async function ad(a,b,c){var d;let e,f;if(aa(),null!=(e=a=await a)&&"object"==typeof e&&"string"==typeof e.name&&"number"==typeof e.lastModified&&ac(e))return a instanceof File?a:ab([await a.arrayBuffer()],a.name);if(null!=(f=a)&&"object"==typeof f&&"string"==typeof f.url&&"function"==typeof f.blob){let d=await a.blob();return b||(b=new URL(a.url).pathname.split(/[\\/]/).pop()),ab(await ae(d),b,c)}let g=await ae(a);if(b||(b=("object"==typeof(d=a)&&null!==d&&("name"in d&&d.name&&String(d.name)||"url"in d&&d.url&&String(d.url)||"filename"in d&&d.filename&&String(d.filename)||"path"in d&&d.path&&String(d.path))||"").split(/[\\/]/).pop()||void 0),!c?.type){let a=g.find(a=>"object"==typeof a&&"type"in a&&a.type);"string"==typeof a&&(c={...c,type:a})}return ab(g,b,c)}async function ae(a){let b=[];if("string"==typeof a||ArrayBuffer.isView(a)||a instanceof ArrayBuffer)b.push(a);else if(ac(a))b.push(a instanceof Blob?a:await a.arrayBuffer());else{let c;if(null!=(c=a)&&"object"==typeof c&&"function"==typeof c[Symbol.asyncIterator])for await(let c of a)b.push(...await ae(c));else{let b=a?.constructor?.name;throw Error(`Unexpected data type: ${typeof a}${b?`; constructor: ${b}`:""}${function(a){if("object"!=typeof a||null===a)return"";let b=Object.getOwnPropertyNames(a);return`; props: [${b.map(a=>`"${a}"`).join(", ")}]`}(a)}`)}}return b}class af{constructor(a){this._client=a}}class ag extends af{create(a,b){return this._client.post("/access_tokens",{body:a,...b})}}class ah extends af{create(a,b){return this._client.post("/account_links",{body:a,...b})}}function ai(a){return a.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}let aj=Object.freeze(Object.create(null)),ak=((a=ai)=>function(b,...c){let d;if(1===b.length)return b[0];let e=!1,f=[],g=b.reduce((b,d,g)=>{/[?#]/.test(d)&&(e=!0);let h=c[g],i=(e?encodeURIComponent:a)(""+h);return g!==c.length&&(null==h||"object"==typeof h&&h.toString===Object.getPrototypeOf(Object.getPrototypeOf(h.hasOwnProperty??aj)??aj)?.toString)&&(i=h+"",f.push({start:b.length+d.length,length:i.length,error:`Value of type ${Object.prototype.toString.call(h).slice(8,-1)} is not a valid path parameter`})),b+d+(g===c.length?"":i)},""),h=g.split(/[?#]/,1)[0],j=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi;for(;null!==(d=j.exec(h));)f.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(f.sort((a,b)=>a.start-b.start),f.length>0){let a=0,b=f.reduce((b,c)=>{let d=" ".repeat(c.start-a),e="^".repeat(c.length);return a=c.start+c.length,b+d+e},"");throw new i(`Path parameters result in path with invalid segments:
${f.map(a=>a.error).join("\n")}
${g}
${b}`)}return g})(ai);class al extends af{create(a,b){return this._client.post("/app_builds",{body:a,...b})}retrieve(a,b){return this._client.get(ak`/app_builds/${a}`,b)}list(a,b){return this._client.getAPIList("/app_builds",_,{query:a,...b})}promote(a,b){return this._client.post(ak`/app_builds/${a}/promote`,b)}}class am extends af{create(a,b){return this._client.post("/apps",{body:a,...b})}retrieve(a,b){return this._client.get(ak`/apps/${a}`,b)}update(a,b={},c){return this._client.patch(ak`/apps/${a}`,{body:b,...c})}list(a={},b){return this._client.getAPIList("/apps",_,{query:a,...b})}}class an extends af{retrieve(a,b){return this._client.get(ak`/authorized_users/${a}`,b)}list(a,b){return this._client.getAPIList("/authorized_users",_,{query:a,...b})}}class ao extends af{retrieve(a,b){return this._client.get(ak`/chat_channels/${a}`,b)}update(a,b={},c){return this._client.patch(ak`/chat_channels/${a}`,{body:b,...c})}list(a,b){return this._client.getAPIList("/chat_channels",_,{query:a,...b})}}class ap extends af{create(a,b){return this._client.post("/checkout_configurations",{body:a,...b})}retrieve(a,b){return this._client.get(ak`/checkout_configurations/${a}`,b)}list(a,b){return this._client.getAPIList("/checkout_configurations",_,{query:a,...b})}}class aq extends af{create(a,b){return this._client.post("/companies",{body:a,...b})}retrieve(a,b){return this._client.get(ak`/companies/${a}`,b)}update(a,b={},c){return this._client.patch(ak`/companies/${a}`,{body:b,...c})}list(a,b){return this._client.getAPIList("/companies",_,{query:a,...b})}}class ar extends af{create(a,b){return this._client.post("/course_chapters",{body:a,...b})}retrieve(a,b){return this._client.get(ak`/course_chapters/${a}`,b)}update(a,b,c){return this._client.patch(ak`/course_chapters/${a}`,{body:b,...c})}list(a,b){return this._client.getAPIList("/course_chapters",_,{query:a,...b})}delete(a,b){return this._client.delete(ak`/course_chapters/${a}`,b)}}class as extends af{retrieve(a,b){return this._client.get(ak`/course_lesson_interactions/${a}`,b)}list(a={},b){return this._client.getAPIList("/course_lesson_interactions",_,{query:a,...b})}}class at extends af{create(a,b){return this._client.post("/course_lessons",{body:a,...b})}retrieve(a,b){return this._client.get(ak`/course_lessons/${a}`,b)}update(a,b={},c){return this._client.patch(ak`/course_lessons/${a}`,{body:b,...c})}list(a={},b){return this._client.getAPIList("/course_lessons",_,{query:a,...b})}delete(a,b){return this._client.delete(ak`/course_lessons/${a}`,b)}markAsCompleted(a,b){return this._client.post(ak`/course_lessons/${a}/mark_as_completed`,b)}start(a,b){return this._client.post(ak`/course_lessons/${a}/start`,b)}submitAssessment(a,b,c){return this._client.post(ak`/course_lessons/${a}/submit_assessment`,{body:b,...c})}}class au extends af{retrieve(a,b){return this._client.get(ak`/course_students/${a}`,b)}list(a,b){return this._client.getAPIList("/course_students",_,{query:a,...b})}}class av extends af{create(a,b){return this._client.post("/courses",{body:a,...b})}retrieve(a,b){return this._client.get(ak`/courses/${a}`,b)}update(a,b={},c){return this._client.patch(ak`/courses/${a}`,{body:b,...c})}list(a={},b){return this._client.getAPIList("/courses",_,{query:a,...b})}delete(a,b){return this._client.delete(ak`/courses/${a}`,b)}}class aw extends af{retrieve(a,b){return this._client.get(ak`/disputes/${a}`,b)}list(a,b){return this._client.getAPIList("/disputes",_,{query:a,...b})}submitEvidence(a,b){return this._client.post(ak`/disputes/${a}/submit_evidence`,b)}updateEvidence(a,b={},c){return this._client.post(ak`/disputes/${a}/update_evidence`,{body:b,...c})}}class ax extends af{retrieve(a,b){return this._client.get(ak`/entries/${a}`,b)}list(a,b){return this._client.getAPIList("/entries",_,{query:a,...b})}approve(a,b){return this._client.post(ak`/entries/${a}/approve`,b)}deny(a,b){return this._client.post(ak`/entries/${a}/deny`,b)}}class ay extends af{create(a,b){return this._client.post("/experiences",{body:a,...b})}retrieve(a,b){return this._client.get(ak`/experiences/${a}`,b)}update(a,b={},c){return this._client.patch(ak`/experiences/${a}`,{body:b,...c})}list(a,b){return this._client.getAPIList("/experiences",_,{query:a,...b})}delete(a,b){return this._client.delete(ak`/experiences/${a}`,b)}attach(a,b,c){return this._client.post(ak`/experiences/${a}/attach`,{body:b,...c})}detach(a,b,c){return this._client.post(ak`/experiences/${a}/detach`,{body:b,...c})}duplicate(a,b={},c){return this._client.post(ak`/experiences/${a}/duplicate`,{body:b,...c})}}class az extends af{create(a,b){return this._client.post("/fee_markups",{body:a,...b})}list(a,b){return this._client.getAPIList("/fee_markups",_,{query:a,...b})}delete(a,b){return this._client.delete(ak`/fee_markups/${a}`,b)}}async function aA(a,b,c){let d=c?.pollIntervalMs??1e3,e=c?.pollTimeoutMs??12e4,f=c?.requestOptions??void 0,g=await ad(b,c?.filename??void 0),h=(c?.filename??g.name)?.trim();if(!h)throw Error("uploadFile: could not determine a filename; pass { filename } or provide a named File.");let i=await a.files.create({filename:h},f);if("failed"===i.upload_status)throw Error(`uploadFile: file creation failed (id: ${i.id}).`);if("ready"!==i.upload_status){if(!i.upload_url)throw Error("uploadFile: missing upload_url from files.create response.");let b=a.fetch??C(),c=await b(i.upload_url,{method:"PUT",headers:function(a){if(!a)return;let b={};for(let[c,d]of Object.entries(a))null!=d&&(b[c]=String(d));return b}(i.upload_headers)??{},body:g});if(!c.ok)throw Error(`uploadFile: upload failed (status ${c.status} ${c.statusText}).`)}let j=Date.now()+e;for(;;){let b=await a.files.retrieve(i.id,f);if("ready"===b.upload_status)return b;if("failed"===b.upload_status)throw Error(`uploadFile: processing failed (id: ${b.id}).`);if(Date.now()>=j)throw Error(`uploadFile: timed out waiting for file to become ready (id: ${b.id}).`);await y(d)}}class aB extends af{create(a,b){return this._client.post("/files",{body:a,...b})}retrieve(a,b){return this._client.get(ak`/files/${a}`,b)}upload(a,b){let{filename:c,...d}=b??{};return aA(this._client,a,{filename:c,requestOptions:d})}}class aC extends af{create(a,b){return this._client.post("/forum_posts",{body:a,...b})}retrieve(a,b){return this._client.get(ak`/forum_posts/${a}`,b)}update(a,b={},c){return this._client.patch(ak`/forum_posts/${a}`,{body:b,...c})}list(a,b){return this._client.getAPIList("/forum_posts",_,{query:a,...b})}}class aD extends af{retrieve(a,b){return this._client.get(ak`/forums/${a}`,b)}update(a,b={},c){return this._client.patch(ak`/forums/${a}`,{body:b,...c})}list(a,b){return this._client.getAPIList("/forums",_,{query:a,...b})}}class aE extends af{create(a,b){return this._client.post("/invoices",{body:a,...b})}retrieve(a,b){return this._client.get(ak`/invoices/${a}`,b)}list(a,b){return this._client.getAPIList("/invoices",_,{query:a,...b})}void(a,b){return this._client.post(ak`/invoices/${a}/void`,b)}}class aF extends af{create(a,b){return this._client.post("/leads",{body:a,...b})}retrieve(a,b){return this._client.get(ak`/leads/${a}`,b)}update(a,b={},c){return this._client.patch(ak`/leads/${a}`,{body:b,...c})}list(a,b){return this._client.getAPIList("/leads",_,{query:a,...b})}}class aG extends af{retrieve(a,b){return this._client.get(ak`/ledger_accounts/${a}`,b)}}class aH extends af{retrieve(a,b){return this._client.get(ak`/members/${a}`,b)}list(a,b){return this._client.getAPIList("/members",_,{query:a,...b})}}class aI extends af{retrieve(a,b){return this._client.get(ak`/memberships/${a}`,b)}update(a,b={},c){return this._client.patch(ak`/memberships/${a}`,{body:b,...c})}list(a={},b){return this._client.getAPIList("/memberships",_,{query:a,...b})}cancel(a,b={},c){return this._client.post(ak`/memberships/${a}/cancel`,{body:b,...c})}pause(a,b={},c){return this._client.post(ak`/memberships/${a}/pause`,{body:b,...c})}resume(a,b){return this._client.post(ak`/memberships/${a}/resume`,b)}}class aJ extends af{create(a,b){return this._client.post("/messages",{body:a,...b})}retrieve(a,b){return this._client.get(ak`/messages/${a}`,b)}update(a,b={},c){return this._client.patch(ak`/messages/${a}`,{body:b,...c})}list(a,b){return this._client.getAPIList("/messages",_,{query:a,...b})}}class aK extends af{create(a,b){return this._client.post("/notifications",{body:a,...b})}}class aL extends af{retrieve(a,b={},c){return this._client.get(ak`/payment_methods/${a}`,{query:b,...c})}list(a={},b){return this._client.getAPIList("/payment_methods",_,{query:a,...b})}}class aM extends af{create(a,b){return this._client.post("/payments",{body:a,...b})}retrieve(a,b){return this._client.get(ak`/payments/${a}`,b)}list(a,b){return this._client.getAPIList("/payments",_,{query:a,...b})}listFees(a,b={},c){return this._client.getAPIList(ak`/payments/${a}/fees`,_,{query:b,...c})}refund(a,b={},c){return this._client.post(ak`/payments/${a}/refund`,{body:b,...c})}retry(a,b){return this._client.post(ak`/payments/${a}/retry`,b)}void(a,b){return this._client.post(ak`/payments/${a}/void`,b)}}class aN extends af{retrieve(a,b){return this._client.get(ak`/payout_methods/${a}`,b)}list(a,b){return this._client.getAPIList("/payout_methods",_,{query:a,...b})}}class aO extends af{create(a,b){return this._client.post("/plans",{body:a,...b})}retrieve(a,b){return this._client.get(ak`/plans/${a}`,b)}update(a,b={},c){return this._client.patch(ak`/plans/${a}`,{body:b,...c})}list(a,b){return this._client.getAPIList("/plans",_,{query:a,...b})}delete(a,b){return this._client.delete(ak`/plans/${a}`,b)}}class aP extends af{create(a,b){return this._client.post("/products",{body:a,...b})}retrieve(a,b){return this._client.get(ak`/products/${a}`,b)}update(a,b={},c){return this._client.patch(ak`/products/${a}`,{body:b,...c})}list(a,b){return this._client.getAPIList("/products",_,{query:a,...b})}delete(a,b){return this._client.delete(ak`/products/${a}`,b)}}class aQ extends af{create(a,b){return this._client.post("/promo_codes",{body:a,...b})}retrieve(a,b){return this._client.get(ak`/promo_codes/${a}`,b)}list(a,b){return this._client.getAPIList("/promo_codes",_,{query:a,...b})}delete(a,b){return this._client.delete(ak`/promo_codes/${a}`,b)}}class aR extends af{create(a,b){return this._client.post("/reactions",{body:a,...b})}retrieve(a,b){return this._client.get(ak`/reactions/${a}`,b)}list(a,b){return this._client.getAPIList("/reactions",_,{query:a,...b})}}class aS extends af{retrieve(a,b){return this._client.get(ak`/refunds/${a}`,b)}list(a,b){return this._client.getAPIList("/refunds",_,{query:a,...b})}}class aT extends af{retrieve(a,b){return this._client.get(ak`/reviews/${a}`,b)}list(a,b){return this._client.getAPIList("/reviews",_,{query:a,...b})}}class aU extends af{retrieve(a,b){return this._client.get(ak`/setup_intents/${a}`,b)}list(a,b){return this._client.getAPIList("/setup_intents",_,{query:a,...b})}}class aV extends af{create(a,b){return this._client.post("/shipments",{body:a,...b})}retrieve(a,b){return this._client.get(ak`/shipments/${a}`,b)}list(a={},b){return this._client.getAPIList("/shipments",_,{query:a,...b})}}class aW extends af{create(a,b){return this._client.post("/support_channels",{body:a,...b})}retrieve(a,b){return this._client.get(ak`/support_channels/${a}`,b)}list(a,b){return this._client.getAPIList("/support_channels",_,{query:a,...b})}}class aX extends af{create(a,b){return this._client.post("/topups",{body:a,...b})}}class aY extends af{create(a,b){return this._client.post("/transfers",{body:a,...b})}retrieve(a,b){return this._client.get(ak`/transfers/${a}`,b)}list(a={},b){return this._client.getAPIList("/transfers",_,{query:a,...b})}}class aZ extends af{retrieve(a,b){return this._client.get(ak`/users/${a}`,b)}checkAccess(a,b,c){let{id:d}=b;return this._client.get(ak`/users/${d}/access/${a}`,c)}}class a$ extends af{retrieve(a,b){return this._client.get(ak`/verifications/${a}`,b)}}var a_,a0,a1,a2,a3,a4,a5=a.i(3749);class a6 extends af{create(a,b){return this._client.post("/webhooks",{body:a,...b})}retrieve(a,b){return this._client.get(ak`/webhooks/${a}`,b)}update(a,b={},c){return this._client.patch(ak`/webhooks/${a}`,{body:b,...c})}list(a,b){return this._client.getAPIList("/webhooks",_,{query:a,...b})}delete(a,b){return this._client.delete(ak`/webhooks/${a}`,b)}unwrap(a,{headers:b,key:c}){if(void 0!==b){let d=void 0===c?this._client.webhookKey:c;if(null===d)throw Error("Webhook key must not be null in order to unwrap");new a5.Webhook(d).verify(a,b)}return JSON.parse(a)}}class a7 extends af{create(a,b){return this._client.post("/withdrawals",{body:a,...b})}retrieve(a,b){return this._client.get(ak`/withdrawals/${a}`,b)}list(a,b){return this._client.getAPIList("/withdrawals",_,{query:a,...b})}}let a8=Symbol("brand.privateNullableHeaders"),a9=a=>{let b=new Headers,c=new Set;for(let d of a){let a=new Set;for(let[e,f]of function*(a){let b;if(!a)return;if(a8 in a){let{values:b,nulls:c}=a;for(let a of(yield*b.entries(),c))yield[a,null];return}let c=!1;for(let d of(a instanceof Headers?b=a.entries():x(a)?b=a:(c=!0,b=Object.entries(a??{})),b)){let a=d[0];if("string"!=typeof a)throw TypeError("expected header name to be a string");let b=x(d[1])?d[1]:[d[1]],e=!1;for(let d of b)void 0!==d&&(c&&!e&&(e=!0,yield[a,null]),yield[a,d])}}(d)){let d=e.toLowerCase();a.has(d)||(b.delete(e),a.add(d)),null===f?(b.delete(e),c.add(d)):(b.append(e,f),c.delete(d))}}return{[a8]:!0,values:b,nulls:c}},ba=a=>void 0!==globalThis.process?globalThis.process.env?.[a]?.trim()??void 0:void 0!==globalThis.Deno?globalThis.Deno.env?.get?.(a)?.trim():void 0,bb=new TextEncoder,bc=new TextDecoder;function bd(a){let b=new Uint8Array(a.length);for(let c=0;c<a.length;c++){let d=a.charCodeAt(c);if(d>127)throw TypeError("non-ASCII string encountered in encode()");b[c]=d}return b}function be(a){if(Uint8Array.fromBase64)return Uint8Array.fromBase64("string"==typeof a?a:bc.decode(a),{alphabet:"base64url"});let b=a;b instanceof Uint8Array&&(b=bc.decode(b)),b=b.replace(/-/g,"+").replace(/_/g,"/");try{var c=b;if(Uint8Array.fromBase64)return Uint8Array.fromBase64(c);let a=atob(c),d=new Uint8Array(a.length);for(let b=0;b<a.length;b++)d[b]=a.charCodeAt(b);return d}catch{throw TypeError("The input to be decoded is not correctly encoded.")}}class bf extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(a,b){super(a,b),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class bg extends bf{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(a,b,c="unspecified",d="unspecified"){super(a,{cause:{claim:c,reason:d,payload:b}}),this.claim=c,this.reason=d,this.payload=b}}class bh extends bf{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(a,b,c="unspecified",d="unspecified"){super(a,{cause:{claim:c,reason:d,payload:b}}),this.claim=c,this.reason=d,this.payload=b}}class bi extends bf{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"}class bj extends bf{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class bk extends bf{static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"}class bl extends bf{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}class bm extends bf{[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor(a="multiple matching keys found in the JSON Web Key Set",b){super(a,b)}}class bn extends bf{static code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";constructor(a="signature verification failed",b){super(a,b)}}async function bo(a){if(!a.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:b,keyUsages:c}=function(a){let b,c;switch(a.kty){case"AKP":switch(a.alg){case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":b={name:a.alg},c=a.priv?["sign"]:["verify"];break;default:throw new bj('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"RSA":switch(a.alg){case"PS256":case"PS384":case"PS512":b={name:"RSA-PSS",hash:`SHA-${a.alg.slice(-3)}`},c=a.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":b={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${a.alg.slice(-3)}`},c=a.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":b={name:"RSA-OAEP",hash:`SHA-${parseInt(a.alg.slice(-3),10)||1}`},c=a.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new bj('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(a.alg){case"ES256":b={name:"ECDSA",namedCurve:"P-256"},c=a.d?["sign"]:["verify"];break;case"ES384":b={name:"ECDSA",namedCurve:"P-384"},c=a.d?["sign"]:["verify"];break;case"ES512":b={name:"ECDSA",namedCurve:"P-521"},c=a.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":b={name:"ECDH",namedCurve:a.crv},c=a.d?["deriveBits"]:[];break;default:throw new bj('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(a.alg){case"Ed25519":case"EdDSA":b={name:"Ed25519"},c=a.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":b={name:a.crv},c=a.d?["deriveBits"]:[];break;default:throw new bj('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new bj('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:b,keyUsages:c}}(a),d={...a};return"AKP"!==d.kty&&delete d.alg,delete d.use,crypto.subtle.importKey("jwk",d,b,a.ext??(!a.d&&!a.priv),a.key_ops??c)}function bp(a){if("object"!=typeof a||null===a||"[object Object]"!==Object.prototype.toString.call(a))return!1;if(null===Object.getPrototypeOf(a))return!0;let b=a;for(;null!==Object.getPrototypeOf(b);)b=Object.getPrototypeOf(b);return Object.getPrototypeOf(a)===b}async function bq(a,b,c){let d;if(!bp(a))throw TypeError("JWK must be an object");switch(b??=a.alg,d??=c?.extractable??a.ext,a.kty){case"oct":if("string"!=typeof a.k||!a.k)throw TypeError('missing "k" (Key Value) Parameter value');return be(a.k);case"RSA":if("oth"in a&&void 0!==a.oth)throw new bj('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');return bo({...a,alg:b,ext:d});case"AKP":if("string"!=typeof a.alg||!a.alg)throw TypeError('missing "alg" (Algorithm) Parameter value');if(void 0!==b&&b!==a.alg)throw TypeError("JWK alg and alg option value mismatch");return bo({...a,ext:d});case"EC":case"OKP":return bo({...a,alg:b,ext:d});default:throw new bj('Unsupported "kty" (Key Type) Parameter value')}}let br=(a,b="algorithm.name")=>TypeError(`CryptoKey does not support this operation, its ${b} must be ${a}`);function bs(a){return parseInt(a.name.slice(4),10)}function bt(a,b,...c){if((c=c.filter(Boolean)).length>2){let b=c.pop();a+=`one of type ${c.join(", ")}, or ${b}.`}else 2===c.length?a+=`one of type ${c[0]} or ${c[1]}.`:a+=`of type ${c[0]}.`;return null==b?a+=` Received ${b}`:"function"==typeof b&&b.name?a+=` Received function ${b.name}`:"object"==typeof b&&null!=b&&b.constructor?.name&&(a+=` Received an instance of ${b.constructor.name}`),a}let bu=(a,b,...c)=>bt(`Key for the ${a} algorithm must be `,b,...c);async function bv(a,b,c){if(b instanceof Uint8Array){if(!a.startsWith("HS"))throw TypeError(((a,...b)=>bt("Key must be ",a,...b))(b,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",b,{hash:`SHA-${a.slice(-3)}`,name:"HMAC"},!1,[c])}return!function(a,b,c){switch(b){case"HS256":case"HS384":case"HS512":{if("HMAC"!==a.algorithm.name)throw br("HMAC");let c=parseInt(b.slice(2),10);if(bs(a.algorithm.hash)!==c)throw br(`SHA-${c}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if("RSASSA-PKCS1-v1_5"!==a.algorithm.name)throw br("RSASSA-PKCS1-v1_5");let c=parseInt(b.slice(2),10);if(bs(a.algorithm.hash)!==c)throw br(`SHA-${c}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if("RSA-PSS"!==a.algorithm.name)throw br("RSA-PSS");let c=parseInt(b.slice(2),10);if(bs(a.algorithm.hash)!==c)throw br(`SHA-${c}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":if("Ed25519"!==a.algorithm.name)throw br("Ed25519");break;case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":let d;if(d=a.algorithm,d.name!==b)throw br(b);break;case"ES256":case"ES384":case"ES512":{if("ECDSA"!==a.algorithm.name)throw br("ECDSA");let c=function(a){switch(a){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}(b);if(a.algorithm.namedCurve!==c)throw br(c,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}if(c&&!a.usages.includes(c))throw TypeError(`CryptoKey does not support this operation, its usages must include ${c}.`)}(b,a,c),b}async function bw(a,b,c,d){let e=await bv(a,b,"verify");!function(a,b){if(a.startsWith("RS")||a.startsWith("PS")){let{modulusLength:c}=b.algorithm;if("number"!=typeof c||c<2048)throw TypeError(`${a} requires key modulusLength to be 2048 bits or larger`)}}(a,e);let f=function(a,b){let c=`SHA-${a.slice(-3)}`;switch(a){case"HS256":case"HS384":case"HS512":return{hash:c,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:c,name:"RSA-PSS",saltLength:parseInt(a.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:c,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:c,name:"ECDSA",namedCurve:b.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return{name:a};default:throw new bj(`alg ${a} is not supported either by JOSE or your javascript runtime`)}}(a,e.algorithm);try{return await crypto.subtle.verify(f,e,c,d)}catch{return!1}}let bx=a=>{if(a?.[Symbol.toStringTag]==="CryptoKey")return!0;try{return a instanceof CryptoKey}catch{return!1}},by=a=>a?.[Symbol.toStringTag]==="KeyObject",bz=a=>bx(a)||by(a),bA=a=>bp(a)&&"string"==typeof a.kty,bB=a=>a?.[Symbol.toStringTag],bC=(a,b,c)=>{if(void 0!==b.use){let a;switch(c){case"sign":case"verify":a="sig";break;case"encrypt":case"decrypt":a="enc"}if(b.use!==a)throw TypeError(`Invalid key for this operation, its "use" must be "${a}" when present`)}if(void 0!==b.alg&&b.alg!==a)throw TypeError(`Invalid key for this operation, its "alg" must be "${a}" when present`);if(Array.isArray(b.key_ops)){let d;switch(!0){case"sign"===c||"verify"===c:case"dir"===a:case a.includes("CBC-HS"):d=c;break;case a.startsWith("PBES2"):d="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(a):d=!a.includes("GCM")&&a.endsWith("KW")?"encrypt"===c?"wrapKey":"unwrapKey":c;break;case"encrypt"===c&&a.startsWith("RSA"):d="wrapKey";break;case"decrypt"===c:d=a.startsWith("RSA")?"unwrapKey":"deriveBits"}if(d&&b.key_ops?.includes?.(d)===!1)throw TypeError(`Invalid key for this operation, its "key_ops" must include "${d}" when present`)}return!0},bD=async(a,b,c,e=!1)=>{let f=(d||=new WeakMap).get(a);if(f?.[c])return f[c];let g=await bo({...b,alg:c});return e&&Object.freeze(a),f?f[c]=g:d.set(a,{[c]:g}),g};async function bE(a,b){if(a instanceof Uint8Array||bx(a))return a;if(by(a)){if("secret"===a.type)return a.export();if("toCryptoKey"in a&&"function"==typeof a.toCryptoKey)try{return((a,b)=>{let c,e=(d||=new WeakMap).get(a);if(e?.[b])return e[b];let f="public"===a.type,g=!!f;if("x25519"===a.asymmetricKeyType){switch(b){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}c=a.toCryptoKey(a.asymmetricKeyType,g,f?[]:["deriveBits"])}if("ed25519"===a.asymmetricKeyType){if("EdDSA"!==b&&"Ed25519"!==b)throw TypeError("given KeyObject instance cannot be used for this algorithm");c=a.toCryptoKey(a.asymmetricKeyType,g,[f?"verify":"sign"])}switch(a.asymmetricKeyType){case"ml-dsa-44":case"ml-dsa-65":case"ml-dsa-87":if(b!==a.asymmetricKeyType.toUpperCase())throw TypeError("given KeyObject instance cannot be used for this algorithm");c=a.toCryptoKey(a.asymmetricKeyType,g,[f?"verify":"sign"])}if("rsa"===a.asymmetricKeyType){let d;switch(b){case"RSA-OAEP":d="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":d="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":d="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":d="SHA-512";break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}if(b.startsWith("RSA-OAEP"))return a.toCryptoKey({name:"RSA-OAEP",hash:d},g,f?["encrypt"]:["decrypt"]);c=a.toCryptoKey({name:b.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:d},g,[f?"verify":"sign"])}if("ec"===a.asymmetricKeyType){let d=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get(a.asymmetricKeyDetails?.namedCurve);if(!d)throw TypeError("given KeyObject instance cannot be used for this algorithm");"ES256"===b&&"P-256"===d&&(c=a.toCryptoKey({name:"ECDSA",namedCurve:d},g,[f?"verify":"sign"])),"ES384"===b&&"P-384"===d&&(c=a.toCryptoKey({name:"ECDSA",namedCurve:d},g,[f?"verify":"sign"])),"ES512"===b&&"P-521"===d&&(c=a.toCryptoKey({name:"ECDSA",namedCurve:d},g,[f?"verify":"sign"])),b.startsWith("ECDH-ES")&&(c=a.toCryptoKey({name:"ECDH",namedCurve:d},g,f?[]:["deriveBits"]))}if(!c)throw TypeError("given KeyObject instance cannot be used for this algorithm");return e?e[b]=c:d.set(a,{[b]:c}),c})(a,b)}catch(a){if(a instanceof TypeError)throw a}let c=a.export({format:"jwk"});return bD(a,c,b)}if(bA(a))return a.k?be(a.k):bD(a,a,b,!0);throw Error("unreachable")}async function bF(a,b,c){let d,e;if(!bp(a))throw new bk("Flattened JWS must be an object");if(void 0===a.protected&&void 0===a.header)throw new bk('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==a.protected&&"string"!=typeof a.protected)throw new bk("JWS Protected Header incorrect type");if(void 0===a.payload)throw new bk("JWS Payload missing");if("string"!=typeof a.signature)throw new bk("JWS Signature missing or incorrect type");if(void 0!==a.header&&!bp(a.header))throw new bk("JWS Unprotected Header incorrect type");let f={};if(a.protected)try{let b=be(a.protected);f=JSON.parse(bc.decode(b))}catch{throw new bk("JWS Protected Header is invalid")}if(!function(...a){let b,c=a.filter(Boolean);if(0===c.length||1===c.length)return!0;for(let a of c){let c=Object.keys(a);if(!b||0===b.size){b=new Set(c);continue}for(let a of c){if(b.has(a))return!1;b.add(a)}}return!0}(f,a.header))throw new bk("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let g={...f,...a.header},h=function(a,b,c,d,e){let f;if(void 0!==e.crit&&d?.crit===void 0)throw new a('"crit" (Critical) Header Parameter MUST be integrity protected');if(!d||void 0===d.crit)return new Set;if(!Array.isArray(d.crit)||0===d.crit.length||d.crit.some(a=>"string"!=typeof a||0===a.length))throw new a('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let g of(f=void 0!==c?new Map([...Object.entries(c),...b.entries()]):b,d.crit)){if(!f.has(g))throw new bj(`Extension Header Parameter "${g}" is not recognized`);if(void 0===e[g])throw new a(`Extension Header Parameter "${g}" is missing`);if(f.get(g)&&void 0===d[g])throw new a(`Extension Header Parameter "${g}" MUST be integrity protected`)}return new Set(d.crit)}(bk,new Map([["b64",!0]]),c?.crit,f,g),i=!0;if(h.has("b64")&&"boolean"!=typeof(i=f.b64))throw new bk('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:j}=g;if("string"!=typeof j||!j)throw new bk('JWS "alg" (Algorithm) Header Parameter missing or invalid');let k=c&&function(a,b){if(void 0!==b&&(!Array.isArray(b)||b.some(a=>"string"!=typeof a)))throw TypeError(`"${a}" option must be an array of strings`);if(b)return new Set(b)}("algorithms",c.algorithms);if(k&&!k.has(j))throw new bi('"alg" (Algorithm) Header Parameter value not allowed');if(i){if("string"!=typeof a.payload)throw new bk("JWS Payload must be a string")}else if("string"!=typeof a.payload&&!(a.payload instanceof Uint8Array))throw new bk("JWS Payload must be a string or an Uint8Array instance");let l=!1;"function"==typeof b&&(b=await b(f,a),l=!0);var m=b,n="verify";switch(j.substring(0,2)){case"A1":case"A2":case"di":case"HS":case"PB":((a,b,c)=>{if(!(b instanceof Uint8Array)){if(bA(b)){if("oct"===b.kty&&"string"==typeof b.k&&bC(a,b,c))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!bz(b))throw TypeError(bu(a,b,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if("secret"!==b.type)throw TypeError(`${bB(b)} instances for symmetric algorithms must be of type "secret"`)}})(j,m,n);break;default:((a,b,c)=>{if(bA(b))switch(c){case"decrypt":case"sign":if("oct"!==b.kty&&("AKP"===b.kty&&"string"==typeof b.priv||"string"==typeof b.d)&&bC(a,b,c))return;throw TypeError("JSON Web Key for this operation must be a private JWK");case"encrypt":case"verify":if("oct"!==b.kty&&void 0===b.d&&void 0===b.priv&&bC(a,b,c))return;throw TypeError("JSON Web Key for this operation must be a public JWK")}if(!bz(b))throw TypeError(bu(a,b,"CryptoKey","KeyObject","JSON Web Key"));if("secret"===b.type)throw TypeError(`${bB(b)} instances for asymmetric algorithms must not be of type "secret"`);if("public"===b.type)switch(c){case"sign":throw TypeError(`${bB(b)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw TypeError(`${bB(b)} instances for asymmetric algorithm decryption must be of type "private"`)}if("private"===b.type)switch(c){case"verify":throw TypeError(`${bB(b)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw TypeError(`${bB(b)} instances for asymmetric algorithm encryption must be of type "public"`)}})(j,m,n)}let o=function(...a){let b=new Uint8Array(a.reduce((a,{length:b})=>a+b,0)),c=0;for(let d of a)b.set(d,c),c+=d.length;return b}(void 0!==a.protected?bd(a.protected):new Uint8Array,bd("."),"string"==typeof a.payload?i?bd(a.payload):bb.encode(a.payload):a.payload);try{d=be(a.signature)}catch{throw new bk("Failed to base64url decode the signature")}let p=await bE(b,j);if(!await bw(j,p,d,o))throw new bn;if(i)try{e=be(a.payload)}catch{throw new bk("Failed to base64url decode the payload")}else e="string"==typeof a.payload?bb.encode(a.payload):a.payload;let q={payload:e};return(void 0!==a.protected&&(q.protectedHeader=f),void 0!==a.header&&(q.unprotectedHeader=a.header),l)?{...q,key:p}:q}async function bG(a,b,c){if(a instanceof Uint8Array&&(a=bc.decode(a)),"string"!=typeof a)throw new bk("Compact JWS must be a string or Uint8Array");let{0:d,1:e,2:f,length:g}=a.split(".");if(3!==g)throw new bk("Invalid Compact JWS");let h=await bF({payload:e,protected:d,signature:f},b,c),i={payload:h.payload,protectedHeader:h.protectedHeader};return"function"==typeof b?{...i,key:h.key}:i}let bH=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;function bI(a){let b,c=bH.exec(a);if(!c||c[4]&&c[1])throw TypeError("Invalid time period format");let d=parseFloat(c[2]);switch(c[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":b=Math.round(d);break;case"minute":case"minutes":case"min":case"mins":case"m":b=Math.round(60*d);break;case"hour":case"hours":case"hr":case"hrs":case"h":b=Math.round(3600*d);break;case"day":case"days":case"d":b=Math.round(86400*d);break;case"week":case"weeks":case"w":b=Math.round(604800*d);break;default:b=Math.round(0x1e187e0*d)}return"-"===c[1]||"ago"===c[4]?-b:b}let bJ=a=>a.includes("/")?a.toLowerCase():`application/${a.toLowerCase()}`;async function bK(a,b,c){let d=await bG(a,b,c);if(d.protectedHeader.crit?.includes("b64")&&!1===d.protectedHeader.b64)throw new bl("JWTs MUST NOT use unencoded payload");let e={payload:function(a,b,c={}){var d,e;let f,g;try{f=JSON.parse(bc.decode(b))}catch{}if(!bp(f))throw new bl("JWT Claims Set must be a top-level JSON object");let{typ:h}=c;if(h&&("string"!=typeof a.typ||bJ(a.typ)!==bJ(h)))throw new bg('unexpected "typ" JWT header value',f,"typ","check_failed");let{requiredClaims:i=[],issuer:j,subject:k,audience:l,maxTokenAge:m}=c,n=[...i];for(let a of(void 0!==m&&n.push("iat"),void 0!==l&&n.push("aud"),void 0!==k&&n.push("sub"),void 0!==j&&n.push("iss"),new Set(n.reverse())))if(!(a in f))throw new bg(`missing required "${a}" claim`,f,a,"missing");if(j&&!(Array.isArray(j)?j:[j]).includes(f.iss))throw new bg('unexpected "iss" claim value',f,"iss","check_failed");if(k&&f.sub!==k)throw new bg('unexpected "sub" claim value',f,"sub","check_failed");if(l&&(d=f.aud,e="string"==typeof l?[l]:l,"string"==typeof d?!e.includes(d):!(Array.isArray(d)&&e.some(Set.prototype.has.bind(new Set(d))))))throw new bg('unexpected "aud" claim value',f,"aud","check_failed");switch(typeof c.clockTolerance){case"string":g=bI(c.clockTolerance);break;case"number":g=c.clockTolerance;break;case"undefined":g=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:o}=c,p=Math.floor((o||new Date).getTime()/1e3);if((void 0!==f.iat||m)&&"number"!=typeof f.iat)throw new bg('"iat" claim must be a number',f,"iat","invalid");if(void 0!==f.nbf){if("number"!=typeof f.nbf)throw new bg('"nbf" claim must be a number',f,"nbf","invalid");if(f.nbf>p+g)throw new bg('"nbf" claim timestamp check failed',f,"nbf","check_failed")}if(void 0!==f.exp){if("number"!=typeof f.exp)throw new bg('"exp" claim must be a number',f,"exp","invalid");if(f.exp<=p-g)throw new bh('"exp" claim timestamp check failed',f,"exp","check_failed")}if(m){let a=p-f.iat;if(a-g>("number"==typeof m?m:bI(m)))throw new bh('"iat" claim timestamp check failed (too far in the past)',f,"iat","check_failed");if(a<0-g)throw new bg('"iat" claim timestamp check failed (it should be in the past)',f,"iat","check_failed")}return f}(d.protectedHeader,d.payload,c),protectedHeader:d.protectedHeader};return"function"==typeof b?{...e,key:d.key}:e}async function bL(a,b){try{var c;let d,e=(c={headerName:b?.headerName},d=c?.headerName??"x-whop-user-token","string"==typeof a?a:a instanceof Headers?a.get(d):a instanceof Request?a.headers.get(d):null);if(!e)throw Error("Whop user token not found. If you are the app developer, ensure you are developing in the whop.com iframe and have the dev proxy enabled.");let f=b.publicKey??'{"kty":"EC","x":"rz8a8vxvexHC0TLT91g7llOdDOsNuYiGEfic4Qhni-E","y":"zH0QblKYToexd5PEIMGXPVJS9AB5smKrW4S_TbiXrOs","crv":"P-256"}',g=await bq(JSON.parse(f),"ES256").catch(()=>{throw Error("Invalid public key provided to verifyUserToken")}),h=await bK(e,g,{issuer:"urn:whopcom:exp-proxy"}).catch(a=>{throw Error("Invalid user token provided to verifyUserToken")});if(!(h.payload.sub&&h.payload.aud)||Array.isArray(h.payload.aud))throw Error("Invalid user token provided to verifyUserToken");if(b.appId&&h.payload.aud!==b.appId)throw Error("Invalid app id provided to verifyUserToken");return{appId:h.payload.aud,userId:h.payload.sub}}catch(a){if(b.dontThrow)return null;throw a}}class bM{constructor({baseURL:a=ba("WHOP_BASE_URL"),apiKey:b=ba("WHOP_API_KEY"),webhookKey:c=ba("WHOP_WEBHOOK_SECRET")??null,appID:d=ba("WHOP_APP_ID")??null,...f}={}){if(a1.add(this),a3.set(this,void 0),this.verifyUserToken=function(a){return async function(b,c){if(!a.appID)throw Error("You must set appID in the Whop client constructor if you want to verify user tokens.");let d={appId:a.appID};return await bL(b,{...d,...c})}}(this),this.apps=new am(this),this.invoices=new aE(this),this.courseLessonInteractions=new as(this),this.products=new aP(this),this.companies=new aq(this),this.webhooks=new a6(this),this.plans=new aO(this),this.entries=new ax(this),this.forumPosts=new aC(this),this.transfers=new aY(this),this.ledgerAccounts=new aG(this),this.memberships=new aI(this),this.authorizedUsers=new an(this),this.appBuilds=new al(this),this.shipments=new aV(this),this.checkoutConfigurations=new ap(this),this.messages=new aJ(this),this.chatChannels=new ao(this),this.users=new aZ(this),this.payments=new aM(this),this.supportChannels=new aW(this),this.experiences=new ay(this),this.reactions=new aR(this),this.members=new aH(this),this.forums=new aD(this),this.promoCodes=new aQ(this),this.courses=new av(this),this.courseChapters=new ar(this),this.courseLessons=new at(this),this.reviews=new aT(this),this.courseStudents=new au(this),this.accessTokens=new ag(this),this.notifications=new aK(this),this.disputes=new aw(this),this.refunds=new aS(this),this.withdrawals=new a7(this),this.accountLinks=new ah(this),this.setupIntents=new aU(this),this.paymentMethods=new aL(this),this.feeMarkups=new az(this),this.payoutMethods=new aN(this),this.verifications=new a$(this),this.leads=new aF(this),this.topups=new aX(this),this.files=new aB(this),void 0===b)throw new i("The WHOP_API_KEY environment variable is missing or empty; either provide it, or instantiate the Whop client with an apiKey option, like new Whop({ apiKey: 'My API Key' }).");const g={apiKey:b,webhookKey:c,appID:d,...f,baseURL:a||"https://api.whop.com/api/v1"};this.baseURL=g.baseURL,this.timeout=g.timeout??a2.DEFAULT_TIMEOUT,this.logger=g.logger??console;const h="warn";this.logLevel=h,this.logLevel=Q(g.logLevel,"ClientOptions.logLevel",this)??Q(ba("WHOP_LOG"),"process.env['WHOP_LOG']",this)??h,this.fetchOptions=g.fetchOptions,this.maxRetries=g.maxRetries??2,this.fetch=g.fetch??C(),e(this,a3,E,"f"),this._options=g,this.apiKey=b,this.webhookKey=c,this.appID=d}withOptions(a){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,webhookKey:this.webhookKey,appID:this.appID,...a})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:a,nulls:b}){}async authHeaders(a){return a9([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(a){return function(a,b={}){let c,d=a,e=function(a=N){let b;if(void 0!==a.allowEmptyArrays&&"boolean"!=typeof a.allowEmptyArrays)throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==a.encodeDotInKeys&&"boolean"!=typeof a.encodeDotInKeys)throw TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==a.encoder&&void 0!==a.encoder&&"function"!=typeof a.encoder)throw TypeError("Encoder has to be a function.");let c=a.charset||N.charset;if(void 0!==a.charset&&"utf-8"!==a.charset&&"iso-8859-1"!==a.charset)throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let d=F;if(void 0!==a.format){if(!I(H,a.format))throw TypeError("Unknown format option provided.");d=a.format}let e=H[d],f=N.filter;if(("function"==typeof a.filter||w(a.filter))&&(f=a.filter),b=a.arrayFormat&&a.arrayFormat in L?a.arrayFormat:"indices"in a?a.indices?"indices":"repeat":N.arrayFormat,"commaRoundTrip"in a&&"boolean"!=typeof a.commaRoundTrip)throw TypeError("`commaRoundTrip` must be a boolean, or absent");let g=void 0===a.allowDots?!0==!!a.encodeDotInKeys||N.allowDots:!!a.allowDots;return{addQueryPrefix:"boolean"==typeof a.addQueryPrefix?a.addQueryPrefix:N.addQueryPrefix,allowDots:g,allowEmptyArrays:"boolean"==typeof a.allowEmptyArrays?!!a.allowEmptyArrays:N.allowEmptyArrays,arrayFormat:b,charset:c,charsetSentinel:"boolean"==typeof a.charsetSentinel?a.charsetSentinel:N.charsetSentinel,commaRoundTrip:!!a.commaRoundTrip,delimiter:void 0===a.delimiter?N.delimiter:a.delimiter,encode:"boolean"==typeof a.encode?a.encode:N.encode,encodeDotInKeys:"boolean"==typeof a.encodeDotInKeys?a.encodeDotInKeys:N.encodeDotInKeys,encoder:"function"==typeof a.encoder?a.encoder:N.encoder,encodeValuesOnly:"boolean"==typeof a.encodeValuesOnly?a.encodeValuesOnly:N.encodeValuesOnly,filter:f,format:d,formatter:e,serializeDate:"function"==typeof a.serializeDate?a.serializeDate:N.serializeDate,skipNulls:"boolean"==typeof a.skipNulls?a.skipNulls:N.skipNulls,sort:"function"==typeof a.sort?a.sort:null,strictNullHandling:"boolean"==typeof a.strictNullHandling?a.strictNullHandling:N.strictNullHandling}}(b);"function"==typeof e.filter?d=(0,e.filter)("",d):w(e.filter)&&(c=e.filter);let f=[];if("object"!=typeof d||null===d)return"";let g=L[e.arrayFormat],h="comma"===g&&e.commaRoundTrip;c||(c=Object.keys(d)),e.sort&&c.sort(e.sort);let i=new WeakMap;for(let a=0;a<c.length;++a){let b=c[a];e.skipNulls&&null===d[b]||M(f,function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t,u;let v,x=b,y=s,z=0,A=!1;for(;void 0!==(y=y.get(O))&&!A;){let a=y.get(b);if(z+=1,void 0!==a)if(a===z)throw RangeError("Cyclic object value");else A=!0;void 0===y.get(O)&&(z=0)}if("function"==typeof k?x=k(c,x):x instanceof Date?x=n?.(x):"comma"===d&&w(x)&&(x=K(x,function(a){return a instanceof Date?n?.(a):a})),null===x){if(g)return j&&!q?j(c,N.encoder,r,"key",o):c;x=""}if("string"==typeof(t=x)||"number"==typeof t||"boolean"==typeof t||"symbol"==typeof t||"bigint"==typeof t||(u=x)&&"object"==typeof u&&u.constructor&&u.constructor.isBuffer&&u.constructor.isBuffer(u)){if(j){let a=q?c:j(c,N.encoder,r,"key",o);return[p?.(a)+"="+p?.(j(x,N.encoder,r,"value",o))]}return[p?.(c)+"="+p?.(String(x))]}let B=[];if(void 0===x)return B;if("comma"===d&&w(x))q&&j&&(x=K(x,j)),v=[{value:x.length>0?x.join(",")||null:void 0}];else if(w(k))v=k;else{let a=Object.keys(x);v=l?a.sort(l):a}let C=i?String(c).replace(/\./g,"%2E"):String(c),D=e&&w(x)&&1===x.length?C+"[]":C;if(f&&w(x)&&0===x.length)return D+"[]";for(let c=0;c<v.length;++c){let t=v[c],u="object"==typeof t&&void 0!==t.value?t.value:x[t];if(h&&null===u)continue;let y=m&&i?t.replace(/\./g,"%2E"):t,A=w(x)?"function"==typeof d?d(D,y):D:D+(m?"."+y:"["+y+"]");s.set(b,z);let C=new WeakMap;C.set(O,s),M(B,a(u,A,d,e,f,g,h,i,"comma"===d&&q&&w(x)?null:j,k,l,m,n,o,p,q,r,C))}return B}(d[b],b,g,h,e.allowEmptyArrays,e.strictNullHandling,e.skipNulls,e.encodeDotInKeys,e.encode?e.encoder:null,e.filter,e.sort,e.allowDots,e.serializeDate,e.format,e.formatter,e.encodeValuesOnly,e.charset,i))}let j=f.join(e.delimiter),k=!0===e.addQueryPrefix?"?":"";return e.charsetSentinel&&("iso-8859-1"===e.charset?k+="utf8=%26%2310003%3B&":k+="utf8=%E2%9C%93&"),j.length>0?k+j:""}(a,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${z}`}defaultIdempotencyKey(){return`stainless-node-retry-${g()}`}makeStatusError(a,b,c,d){return j.generate(a,b,c,d)}buildURL(a,b,c){let d=!f(this,a1,"m",a4).call(this)&&c||this.baseURL,e=new URL(v.test(a)?a:d+(d.endsWith("/")&&a.startsWith("/")?a.slice(1):a)),g=this.defaultQuery();return!function(a){if(!a)return!0;for(let b in a)return!1;return!0}(g)&&(b={...g,...b}),"object"==typeof b&&b&&!Array.isArray(b)&&(e.search=this.stringifyQuery(b)),e.toString()}async prepareOptions(a){}async prepareRequest(a,{url:b,options:c}){}get(a,b){return this.methodRequest("get",a,b)}post(a,b){return this.methodRequest("post",a,b)}patch(a,b){return this.methodRequest("patch",a,b)}put(a,b){return this.methodRequest("put",a,b)}delete(a,b){return this.methodRequest("delete",a,b)}methodRequest(a,b,c){return this.request(Promise.resolve(c).then(c=>({method:a,path:b,...c})))}request(a,b=null){return new Y(this,this.makeRequest(a,b,void 0))}async makeRequest(a,b,c){let d=await a,e=d.maxRetries??this.maxRetries;null==b&&(b=e),await this.prepareOptions(d);let{req:f,url:g,timeout:i}=await this.buildRequest(d,{retryCount:e-b});await this.prepareRequest(f,{url:g,options:d});let j="log_"+(0x1000000*Math.random()|0).toString(16).padStart(6,"0"),n=void 0===c?"":`, retryOf: ${c}`,o=Date.now();if(V(this).debug(`[${j}] sending request`,W({retryOfRequestLogID:c,method:d.method,url:g,options:d,headers:f.headers})),d.signal?.aborted)throw new k;let p=new AbortController,q=await this.fetchWithTimeout(g,f,i,p).catch(h),r=Date.now();if(q instanceof globalThis.Error){let a=`retrying, ${b} attempts remaining`;if(d.signal?.aborted)throw new k;let e="object"==typeof q&&null!==q&&("name"in q&&"AbortError"===q.name||"message"in q&&String(q.message).includes("FetchRequestCanceledException"))||/timed? ?out/i.test(String(q)+("cause"in q?String(q.cause):""));if(b)return V(this).info(`[${j}] connection ${e?"timed out":"failed"} - ${a}`),V(this).debug(`[${j}] connection ${e?"timed out":"failed"} (${a})`,W({retryOfRequestLogID:c,url:g,durationMs:r-o,message:q.message})),this.retryRequest(d,b,c??j);if(V(this).info(`[${j}] connection ${e?"timed out":"failed"} - error; no more retries left`),V(this).debug(`[${j}] connection ${e?"timed out":"failed"} (error; no more retries left)`,W({retryOfRequestLogID:c,url:g,durationMs:r-o,message:q.message})),e)throw new m;throw new l({cause:q})}let s=`[${j}${n}] ${f.method} ${g} ${q.ok?"succeeded":"failed"} with status ${q.status} in ${r-o}ms`;if(!q.ok){let a=await this.shouldRetry(q);if(b&&a){let a=`retrying, ${b} attempts remaining`;return await D(q.body),V(this).info(`${s} - ${a}`),V(this).debug(`[${j}] response error (${a})`,W({retryOfRequestLogID:c,url:q.url,status:q.status,headers:q.headers,durationMs:r-o})),this.retryRequest(d,b,c??j,q.headers)}let e=a?"error; no more retries left":"error; not retryable";V(this).info(`${s} - ${e}`);let f=await q.text().catch(a=>h(a).message),g=(a=>{try{return JSON.parse(a)}catch(a){return}})(f),i=g?void 0:f;throw V(this).debug(`[${j}] response error (${e})`,W({retryOfRequestLogID:c,url:q.url,status:q.status,headers:q.headers,message:i,durationMs:Date.now()-o})),this.makeStatusError(q.status,g,i,q.headers)}return V(this).info(s),V(this).debug(`[${j}] response start`,W({retryOfRequestLogID:c,url:q.url,status:q.status,headers:q.headers,durationMs:r-o})),{response:q,options:d,controller:p,requestLogID:j,retryOfRequestLogID:c,startTime:o}}getAPIList(a,b,c){return this.requestAPIList(b,{method:"get",path:a,...c})}requestAPIList(a,b){return new $(this,this.makeRequest(b,null,void 0),a)}async fetchWithTimeout(a,b,c,d){let{signal:e,method:f,...g}=b||{};e&&e.addEventListener("abort",()=>d.abort());let h=setTimeout(()=>d.abort(),c),i=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||"object"==typeof g.body&&null!==g.body&&Symbol.asyncIterator in g.body,j={signal:d.signal,...i?{duplex:"half"}:{},method:"GET",...g};f&&(j.method=f.toUpperCase());try{return await this.fetch.call(void 0,a,j)}finally{clearTimeout(h)}}async shouldRetry(a){let b=a.headers.get("x-should-retry");return"true"===b||"false"!==b&&(408===a.status||409===a.status||429===a.status||!!(a.status>=500))}async retryRequest(a,b,c,d){let e,f=d?.get("retry-after-ms");if(f){let a=parseFloat(f);Number.isNaN(a)||(e=a)}let g=d?.get("retry-after");if(g&&!e){let a=parseFloat(g);e=Number.isNaN(a)?Date.parse(g)-Date.now():1e3*a}if(!(e&&0<=e&&e<6e4)){let c=a.maxRetries??this.maxRetries;e=this.calculateDefaultRetryTimeoutMillis(b,c)}return await y(e),this.makeRequest(a,b-1,c)}calculateDefaultRetryTimeoutMillis(a,b){return Math.min(.5*Math.pow(2,b-a),8)*(1-.25*Math.random())*1e3}async buildRequest(a,{retryCount:b=0}={}){let c={...a},{method:d,path:e,query:f,defaultBaseURL:g}=c,h=this.buildURL(e,f,g);"timeout"in c&&((a,b)=>{if("number"!=typeof b||!Number.isInteger(b))throw new i(`${a} must be an integer`);if(b<0)throw new i(`${a} must be a positive integer`)})("timeout",c.timeout),c.timeout=c.timeout??this.timeout;let{bodyHeaders:j,body:k}=this.buildBody({options:c}),l=await this.buildHeaders({options:a,method:d,bodyHeaders:j,retryCount:b});return{req:{method:d,headers:l,...c.signal&&{signal:c.signal},...globalThis.ReadableStream&&k instanceof globalThis.ReadableStream&&{duplex:"half"},...k&&{body:k},...this.fetchOptions??{},...c.fetchOptions??{}},url:h,timeout:c.timeout}}async buildHeaders({options:a,method:c,bodyHeaders:d,retryCount:e}){let f={};this.idempotencyHeader&&"get"!==c&&(a.idempotencyKey||(a.idempotencyKey=this.defaultIdempotencyKey()),f[this.idempotencyHeader]=a.idempotencyKey);let g=a9([f,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(e),...a.timeout?{"X-Stainless-Timeout":String(Math.trunc(a.timeout/1e3))}:{},...b??(b=(()=>{let a="u">typeof Deno&&null!=Deno.build?"deno":"u">typeof EdgeRuntime?"edge":"[object process]"===Object.prototype.toString.call(void 0!==globalThis.process?globalThis.process:0)?"node":"unknown";if("deno"===a)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":z,"X-Stainless-OS":B(Deno.build.os),"X-Stainless-Arch":A(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:Deno.version?.deno??"unknown"};if("u">typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":z,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if("node"===a)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":z,"X-Stainless-OS":B(globalThis.process.platform??"unknown"),"X-Stainless-Arch":A(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};let b=function(){if("u"<typeof navigator||!navigator)return null;for(let{key:a,pattern:b}of[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}]){let c=b.exec(navigator.userAgent);if(c){let b=c[1]||0,d=c[2]||0,e=c[3]||0;return{browser:a,version:`${b}.${d}.${e}`}}}return null}();return b?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":z,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${b.browser}`,"X-Stainless-Runtime-Version":b.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":z,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}})()),"X-Whop-App-Id":this.appID},await this.authHeaders(a),this._options.defaultHeaders,d,a.headers]);return this.validateHeaders(g),g.values}buildBody({options:{body:a,headers:b}}){var c;let d;if(!a)return{bodyHeaders:void 0,body:void 0};let e=a9([b]);return ArrayBuffer.isView(a)||a instanceof ArrayBuffer||a instanceof DataView||"string"==typeof a&&e.values.has("content-type")||globalThis.Blob&&a instanceof globalThis.Blob||a instanceof FormData||a instanceof URLSearchParams||globalThis.ReadableStream&&a instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:a}:"object"==typeof a&&(Symbol.asyncIterator in a||Symbol.iterator in a&&"next"in a&&"function"==typeof a.next)?{bodyHeaders:void 0,body:(d=Symbol.asyncIterator in(c=a)?c[Symbol.asyncIterator]():c[Symbol.iterator](),function(...a){let b=globalThis.ReadableStream;if(void 0===b)throw Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new b(...a)}({start(){},async pull(a){let{done:b,value:c}=await d.next();b?a.close():a.enqueue(c)},async cancel(){await d.return?.()}}))}:f(this,a3,"f").call(this,{body:a,headers:e})}}if(a2=bM,a3=new WeakMap,a1=new WeakSet,a4=function(){return"https://api.whop.com/api/v1"!==this.baseURL},bM.Whop=a2,bM.DEFAULT_TIMEOUT=6e4,bM.WhopError=i,bM.APIError=j,bM.APIConnectionError=l,bM.APIConnectionTimeoutError=m,bM.APIUserAbortError=k,bM.NotFoundError=q,bM.ConflictError=r,bM.RateLimitError=t,bM.BadRequestError=n,bM.AuthenticationError=o,bM.InternalServerError=u,bM.PermissionDeniedError=p,bM.UnprocessableEntityError=s,bM.toFile=ad,bM.Apps=am,bM.Invoices=aE,bM.CourseLessonInteractions=as,bM.Products=aP,bM.Companies=aq,bM.Webhooks=a6,bM.Plans=aO,bM.Entries=ax,bM.ForumPosts=aC,bM.Transfers=aY,bM.LedgerAccounts=aG,bM.Memberships=aI,bM.AuthorizedUsers=an,bM.AppBuilds=al,bM.Shipments=aV,bM.CheckoutConfigurations=ap,bM.Messages=aJ,bM.ChatChannels=ao,bM.Users=aZ,bM.Payments=aM,bM.SupportChannels=aW,bM.Experiences=ay,bM.Reactions=aR,bM.Members=aH,bM.Forums=aD,bM.PromoCodes=aQ,bM.Courses=av,bM.CourseChapters=ar,bM.CourseLessons=at,bM.Reviews=aT,bM.CourseStudents=au,bM.AccessTokens=ag,bM.Notifications=aK,bM.Disputes=aw,bM.Refunds=aS,bM.Withdrawals=a7,bM.AccountLinks=ah,bM.SetupIntents=aU,bM.PaymentMethods=aL,bM.FeeMarkups=az,bM.PayoutMethods=aN,bM.Verifications=a$,bM.Leads=aF,bM.Topups=aX,bM.Files=aB,!process.env.WHOP_API_KEY)throw Error("WHOP_API_KEY is not set");let bN=new bM({appID:"app_T5of943iJSW24E",apiKey:process.env.WHOP_API_KEY,webhookKey:btoa(process.env.WHOP_WEBHOOK_SECRET||"")});process.env.PLATFORM_COMPANY_ID,a.s(["whopsdk",0,bN],27147)},15824,a=>{"use strict";var b,c,d,e,f=Object.defineProperty,g={},h={$:()=>k,bgBlack:()=>E,bgBlue:()=>I,bgCyan:()=>K,bgGreen:()=>G,bgMagenta:()=>J,bgRed:()=>F,bgWhite:()=>L,bgYellow:()=>H,black:()=>u,blue:()=>y,bold:()=>n,cyan:()=>A,dim:()=>o,gray:()=>C,green:()=>w,grey:()=>D,hidden:()=>s,inverse:()=>r,italic:()=>p,magenta:()=>z,red:()=>v,reset:()=>m,strikethrough:()=>t,underline:()=>q,white:()=>B,yellow:()=>x};for(var i in h)f(g,i,{get:h[i],enumerable:!0});var j=!0;"u">typeof process&&({FORCE_COLOR:b,NODE_DISABLE_COLORS:c,NO_COLOR:d,TERM:e}=process.env||{},j=process.stdout&&process.stdout.isTTY);var k={enabled:!c&&null==d&&"dumb"!==e&&(null!=b&&"0"!==b||j)};function l(a,b){let c=RegExp(`\\x1b\\[${b}m`,"g"),d=`\x1b[${a}m`,e=`\x1b[${b}m`;return function(a){return k.enabled&&null!=a?d+(~(""+a).indexOf(e)?a.replace(c,e+d):a)+e:a}}var m=l(0,0),n=l(1,22),o=l(2,22),p=l(3,23),q=l(4,24),r=l(7,27),s=l(8,28),t=l(9,29),u=l(30,39),v=l(31,39),w=l(32,39),x=l(33,39),y=l(34,39),z=l(35,39),A=l(36,39),B=l(37,39),C=l(90,39),D=l(90,39),E=l(40,49),F=l(41,49),G=l(42,49),H=l(43,49),I=l(44,49),J=l(45,49),K=l(46,49),L=l(47,49),M=["green","yellow","blue","magenta","cyan","red"],N=[],O=Date.now(),P=0,Q="u">typeof process?process.env:{};globalThis.DEBUG??=Q.DEBUG??"",globalThis.DEBUG_COLORS??=!Q.DEBUG_COLORS||"true"===Q.DEBUG_COLORS;var R={enable(a){"string"==typeof a&&(globalThis.DEBUG=a)},disable(){let a=globalThis.DEBUG;return globalThis.DEBUG="",a},enabled(a){let b=globalThis.DEBUG.split(",").map(a=>a.replace(/[.+?^${}()|[\]\\]/g,"\\$&")),c=b.some(b=>""!==b&&"-"!==b[0]&&a.match(RegExp(b.split("*").join(".*")+"$"))),d=b.some(b=>""!==b&&"-"===b[0]&&a.match(RegExp(b.slice(1).split("*").join(".*")+"$")));return c&&!d},log:(...a)=>{let[b,c,...d]=a;(console.warn??console.log)(`${b} ${c}`,...d)},formatters:{}},S=new Proxy(function(a){let b={color:M[P++%M.length],enabled:R.enabled(a),namespace:a,log:R.log,extend:()=>{}};return new Proxy((...a)=>{let{enabled:c,namespace:d,color:e,log:f}=b;if(0!==a.length&&N.push([d,...a]),N.length>100&&N.shift(),R.enabled(d)||c){let b=a.map(a=>"string"==typeof a?a:function(a,b=2){let c=new Set;return JSON.stringify(a,(a,b)=>{if("object"==typeof b&&null!==b){if(c.has(b))return"[Circular *]";c.add(b)}else if("bigint"==typeof b)return b.toString();return b},b)}(a)),c=`+${Date.now()-O}ms`;O=Date.now(),globalThis.DEBUG_COLORS?f(g[e](n(d)),...b,g[e](c)):f(d,...b,c)}},{get:(a,c)=>b[c],set:(a,c,d)=>b[c]=d})},{get:(a,b)=>R[b],set:(a,b,c)=>R[b]=c});a.s(["Debug",()=>S])},86849,a=>{"use strict";var b=a.i(15824),c=class extends Error{name="DriverAdapterError";cause;constructor(a){super("string"==typeof a.message?a.message:a.kind),this.cause=a}};(0,b.Debug)("driver-adapter-utils");var d={Int32:0,Int64:1,Float:2,Double:3,Numeric:4,Boolean:5,Character:6,Text:7,Date:8,Time:9,DateTime:10,Json:11,Enum:12,Bytes:13,Set:14,Uuid:15,Int32Array:64,Int64Array:65,FloatArray:66,DoubleArray:67,NumericArray:68,BooleanArray:69,CharacterArray:70,TextArray:71,DateArray:72,TimeArray:73,DateTimeArray:74,JsonArray:75,EnumArray:76,BytesArray:77,UuidArray:78,UnknownNumber:128};Error("Not implemented: queryRaw"),Error("Not implemented: executeRaw"),Error("Not implemented: startTransaction"),Error("Not implemented: executeScript"),Error("Not implemented: dispose"),a.s(["ColumnTypeEnum",()=>d,"DriverAdapterError",()=>c])},87086,(a,b,c)=>{"use strict";function d(a){let b=null!=a;return function(c){let d=c.length-1;if(1===d)return[];if("}"!==c[d])throw Error("Invalid array text - must end with }");let e=0;if("["===c[0]&&(e=c.indexOf("=")+1),"{"!==c[e++])throw Error("Invalid array text - must start with {");let f=[],g=f,h=[],i=e,j="",k=!0;for(;e<d;++e){let f=c[e];if('"'===f){i=++e;let d=c.indexOf('"',i),f=c.indexOf("\\",i);for(;-1!==f&&f<d;)e=f,j+=c.slice(i,e),i=++e,d===e++&&(d=c.indexOf('"',e)),f=c.indexOf("\\",e);e=d,j+=c.slice(i,e),g.push(b?a(j):j),j="",k=!1}else if("{"===f){let a=[];g.push(a),h.push(g),g=a,i=e+1,k=!0}else if(","===f)k=!0;else if("}"===f){k=!1;let a=h.pop();if(void 0===a)throw Error("Invalid array text - too many '}'");g=a}else if(k){for(i=e;","!==(f=c[e])&&"}"!==f&&e<d;)++e;let h=c.slice(i,e--);g.push("NULL"===h?null:b?a(h):h),k=!1}else throw Error("Was expecting delimeter")}return f}}let e=d();c.parse=(a,b)=>null!=b?d(b)(a):e(a)},33803,a=>a.a(async(b,c)=>{try{var d=a.i(15824),e=a.i(86849),f=a.i(54969),g=a.i(87086),h=b([f]);[f]=h.then?(await h)():h;var i="@prisma/adapter-pg",{types:j}=f.default,{builtins:k,getTypeParser:l}=j,m=class a extends Error{static typeNames={16:"bool",17:"bytea",18:"char",19:"name",20:"int8",21:"int2",22:"int2vector",23:"int4",24:"regproc",25:"text",26:"oid",27:"tid",28:"xid",29:"cid",30:"oidvector",32:"pg_ddl_command",71:"pg_type",75:"pg_attribute",81:"pg_proc",83:"pg_class",114:"json",142:"xml",194:"pg_node_tree",269:"table_am_handler",325:"index_am_handler",600:"point",601:"lseg",602:"path",603:"box",604:"polygon",628:"line",650:"cidr",700:"float4",701:"float8",705:"unknown",718:"circle",774:"macaddr8",790:"money",829:"macaddr",869:"inet",1033:"aclitem",1042:"bpchar",1043:"varchar",1082:"date",1083:"time",1114:"timestamp",1184:"timestamptz",1186:"interval",1266:"timetz",1560:"bit",1562:"varbit",1700:"numeric",1790:"refcursor",2202:"regprocedure",2203:"regoper",2204:"regoperator",2205:"regclass",2206:"regtype",2249:"record",2275:"cstring",2276:"any",2277:"anyarray",2278:"void",2279:"trigger",2280:"language_handler",2281:"internal",2283:"anyelement",2287:"_record",2776:"anynonarray",2950:"uuid",2970:"txid_snapshot",3115:"fdw_handler",3220:"pg_lsn",3310:"tsm_handler",3361:"pg_ndistinct",3402:"pg_dependencies",3500:"anyenum",3614:"tsvector",3615:"tsquery",3642:"gtsvector",3734:"regconfig",3769:"regdictionary",3802:"jsonb",3831:"anyrange",3838:"event_trigger",3904:"int4range",3906:"numrange",3908:"tsrange",3910:"tstzrange",3912:"daterange",3926:"int8range",4072:"jsonpath",4089:"regnamespace",4096:"regrole",4191:"regcollation",4451:"int4multirange",4532:"nummultirange",4533:"tsmultirange",4534:"tstzmultirange",4535:"datemultirange",4536:"int8multirange",4537:"anymultirange",4538:"anycompatiblemultirange",4600:"pg_brin_bloom_summary",4601:"pg_brin_minmax_multi_summary",5017:"pg_mcv_list",5038:"pg_snapshot",5069:"xid8",5077:"anycompatible",5078:"anycompatiblearray",5079:"anycompatiblenonarray",5080:"anycompatiblerange"};type;constructor(b){super(),this.type=a.typeNames[b]||"Unknown",this.message=`Unsupported column type ${this.type}`}};function n(a){return b=>(0,g.parse)(b,a)}function o(a){return a}function p(a){return a}function q(a){return`${a.replace(" ","T")}+00:00`}function r(a){return a.replace(" ","T").replace(/[+-]\d{2}(:\d{2})?$/,"+00:00")}function s(a){return a}function t(a){return a.slice(1)}function u(a){return a}var v=l(k.BYTEA),w=l(1001);function x(a){return a}var y={[k.NUMERIC]:o,1231:n(o),[k.TIME]:s,1183:n(s),[k.TIMETZ]:function(a){return a.replace(/[+-]\d{2}(:\d{2})?$/,"")},[k.DATE]:p,1182:n(p),[k.TIMESTAMP]:q,1115:n(q),[k.TIMESTAMPTZ]:r,1185:n(r),[k.MONEY]:t,791:n(t),[k.JSON]:u,199:n(u),[k.JSONB]:u,3807:n(u),[k.BYTEA]:function(a){return v(a)},1001:w,1561:n(x),1563:n(x),143:n(function(a){return a})},z=new Set(["UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH","ERR_TLS_CERT_ALTNAME_FORMAT","ERR_TLS_CERT_ALTNAME_INVALID"]),A=new Set(["ENOTFOUND","ECONNREFUSED","ECONNRESET","ETIMEDOUT"]),B=f.default.types,C=(0,d.Debug)("prisma:driver-adapter:pg"),D=class{constructor(a,b){this.client=a,this.pgOptions=b}provider="postgres";adapterName=i;async queryRaw(a){C("[js::query_raw] %O",a);let{fields:b,rows:c}=await this.performIO(a),d=b.map(a=>a.name),f=[];try{f=b.map(a=>(function(a){switch(a){case k.INT2:case k.INT4:return e.ColumnTypeEnum.Int32;case k.INT8:return e.ColumnTypeEnum.Int64;case k.FLOAT4:return e.ColumnTypeEnum.Float;case k.FLOAT8:return e.ColumnTypeEnum.Double;case k.BOOL:return e.ColumnTypeEnum.Boolean;case k.DATE:return e.ColumnTypeEnum.Date;case k.TIME:case k.TIMETZ:return e.ColumnTypeEnum.Time;case k.TIMESTAMP:case k.TIMESTAMPTZ:return e.ColumnTypeEnum.DateTime;case k.NUMERIC:case k.MONEY:return e.ColumnTypeEnum.Numeric;case k.JSON:case k.JSONB:return e.ColumnTypeEnum.Json;case k.UUID:return e.ColumnTypeEnum.Uuid;case k.OID:return e.ColumnTypeEnum.Int64;case k.BPCHAR:case k.TEXT:case k.VARCHAR:case k.BIT:case k.VARBIT:case k.INET:case k.CIDR:case k.XML:case 19:return e.ColumnTypeEnum.Text;case k.BYTEA:return e.ColumnTypeEnum.Bytes;case 1005:case 1007:return e.ColumnTypeEnum.Int32Array;case 1021:return e.ColumnTypeEnum.FloatArray;case 1022:return e.ColumnTypeEnum.DoubleArray;case 1231:case 791:return e.ColumnTypeEnum.NumericArray;case 1e3:return e.ColumnTypeEnum.BooleanArray;case 1002:return e.ColumnTypeEnum.CharacterArray;case 1014:case 1009:case 1015:case 1563:case 1561:case 1041:case 651:case 143:return e.ColumnTypeEnum.TextArray;case 1182:return e.ColumnTypeEnum.DateArray;case 1183:return e.ColumnTypeEnum.TimeArray;case 1115:case 1185:return e.ColumnTypeEnum.DateTimeArray;case 199:case 3807:return e.ColumnTypeEnum.JsonArray;case 1001:return e.ColumnTypeEnum.BytesArray;case 2951:return e.ColumnTypeEnum.UuidArray;case 1016:case 1028:return e.ColumnTypeEnum.Int64Array;default:if(a>=16384)return e.ColumnTypeEnum.Text;throw new m(a)}})(a.dataTypeID))}catch(a){if(a instanceof m)throw new e.DriverAdapterError({kind:"UnsupportedNativeDataType",type:a.type});throw a}let g=this.pgOptions?.userDefinedTypeParser;if(g)for(let a=0;a<b.length;a++){let d=b[a];if(d.dataTypeID>=16384&&!Object.hasOwn(y,d.dataTypeID))for(let b=0;b<c.length;b++)c[b][a]=await g(d.dataTypeID,c[b][a],this)}return{columnNames:d,columnTypes:f,rows:c}}async executeRaw(a){return C("[js::execute_raw] %O",a),(await this.performIO(a)).rowCount??0}async performIO(a){let{sql:b,args:c}=a,d=c.map((b,c)=>(function a(b,c){var d,e,f;if(null===b)return null;if(Array.isArray(b)&&"list"===c.arity)return b.map(b=>a(b,c));if("string"==typeof b&&"datetime"===c.scalarType&&(b=new Date(b)),b instanceof Date)switch(c.dbType){case"TIME":case"TIMETZ":let g,h;return d=b,g=(a,b=2)=>String(a).padStart(b,"0"),h=d.getUTCMilliseconds(),g(d.getUTCHours())+":"+g(d.getUTCMinutes())+":"+g(d.getUTCSeconds())+(h?"."+String(h).padStart(3,"0"):"");case"DATE":let i;return e=b,(i=(a,b=2)=>String(a).padStart(b,"0"))(e.getUTCFullYear(),4)+"-"+i(e.getUTCMonth()+1)+"-"+i(e.getUTCDate());default:let j,k;return f=b,j=(a,b=2)=>String(a).padStart(b,"0"),k=f.getUTCMilliseconds(),j(f.getUTCFullYear(),4)+"-"+j(f.getUTCMonth()+1)+"-"+j(f.getUTCDate())+" "+j(f.getUTCHours())+":"+j(f.getUTCMinutes())+":"+j(f.getUTCSeconds())+(k?"."+String(k).padStart(3,"0"):"")}return"string"==typeof b&&"bytes"===c.scalarType?Buffer.from(b,"base64"):ArrayBuffer.isView(b)?new Uint8Array(b.buffer,b.byteOffset,b.byteLength):b})(b,a.argTypes[c]));try{return await this.client.query({text:b,values:d,rowMode:"array",types:{getTypeParser:(a,b)=>"text"===b&&y[a]?y[a]:B.getTypeParser(a,b)}},d)}catch(a){this.onError(a)}}onError(a){throw C("Error in performIO: %O",a),new e.DriverAdapterError(function(a){if(b=a,"string"==typeof b.code&&"string"==typeof b.syscall&&"number"==typeof b.errno&&A.has(b.code)){var b,c,d=a;switch(d.code){case"ENOTFOUND":case"ECONNREFUSED":return{kind:"DatabaseNotReachable",host:d.address??d.hostname,port:d.port};case"ECONNRESET":return{kind:"ConnectionClosed"};case"ETIMEDOUT":return{kind:"SocketTimeout"}}return}if(function(a){if("string"==typeof a.code)return z.has(a.code);switch(a.message){case"The server does not support SSL connections":case"There was an error establishing an SSL connection":return!0}return!1}(a))return{kind:"TlsConnectionError",reason:a.message};if(c=a,"string"==typeof c.code&&"string"==typeof c.message&&"string"==typeof c.severity&&("string"==typeof c.detail||void 0===c.detail)&&("string"==typeof c.column||void 0===c.column)&&("string"==typeof c.hint||void 0===c.hint))return{originalCode:a.code,originalMessage:a.message,...function(a){switch(a.code){case"22001":return{kind:"LengthMismatch",column:a.column};case"22003":return{kind:"ValueOutOfRange",cause:a.message};case"22P02":return{kind:"InvalidInputValue",message:a.message};case"23505":{let b=a.detail?.match(/Key \(([^)]+)\)/)?.at(1)?.split(", ");return{kind:"UniqueConstraintViolation",constraint:void 0!==b?{fields:b}:void 0}}case"23502":{let b=a.detail?.match(/Key \(([^)]+)\)/)?.at(1)?.split(", ");return{kind:"NullConstraintViolation",constraint:void 0!==b?{fields:b}:void 0}}case"23503":{let b;return a.column?b={fields:[a.column]}:a.constraint&&(b={index:a.constraint}),{kind:"ForeignKeyConstraintViolation",constraint:b}}case"3D000":return{kind:"DatabaseDoesNotExist",db:a.message.split(" ").at(1)?.split('"').at(1)};case"28000":return{kind:"DatabaseAccessDenied",db:a.message.split(",").find(a=>a.startsWith(" database"))?.split('"').at(1)};case"28P01":return{kind:"AuthenticationFailed",user:a.message.split(" ").pop()?.split('"').at(1)};case"40001":return{kind:"TransactionWriteConflict"};case"42P01":return{kind:"TableDoesNotExist",table:a.message.split(" ").at(1)?.split('"').at(1)};case"42703":return{kind:"ColumnNotFound",column:a.message.split(" ").at(1)?.split('"').at(1)};case"42P04":return{kind:"DatabaseAlreadyExists",db:a.message.split(" ").at(1)?.split('"').at(1)};case"53300":return{kind:"TooManyConnections",cause:a.message};default:return{kind:"postgres",code:a.code??"N/A",severity:a.severity??"N/A",message:a.message,detail:a.detail,column:a.column,hint:a.hint}}}(a)};throw a}(a))}},E=class extends D{constructor(a,b,c,d){super(a,c),this.options=b,this.pgOptions=c,this.cleanup=d}async commit(){C("[js::commit]"),this.cleanup?.(),this.client.release()}async rollback(){C("[js::rollback]"),this.cleanup?.(),this.client.release()}},F=class extends D{constructor(a,b,c){super(a),this.pgOptions=b,this.release=c}async startTransaction(a){let b={usePhantomQuery:!1};C("%s options: %O","[js::startTransaction]",b);let c=await this.client.connect().catch(a=>this.onError(a)),d=a=>{C(`Error from pool connection: ${a.message} %O`,a),this.pgOptions?.onConnectionError?.(a)};c.on("error",d);let e=()=>{c.removeListener("error",d)};try{let d=new E(c,b,this.pgOptions,e);return await d.executeRaw({sql:"BEGIN",args:[],argTypes:[]}),a&&await d.executeRaw({sql:`SET TRANSACTION ISOLATION LEVEL ${a}`,args:[],argTypes:[]}),d}catch(a){e(),c.release(a),this.onError(a)}}async executeScript(a){for(let b of a.split(";").map(a=>a.trim()).filter(a=>a.length>0))try{await this.client.query(b)}catch(a){this.onError(a)}}getConnectionInfo(){return{schemaName:this.pgOptions?.schema,supportsRelationJoins:!0}}async dispose(){return this.release?.()}underlyingDriver(){return this.client}},G=class{constructor(a,b){this.options=b,a instanceof f.default.Pool?(this.externalPool=a,this.config=a.options):(this.externalPool=null,this.config=a)}provider="postgres";adapterName=i;config;externalPool;async connect(){let a=this.externalPool??new f.default.Pool(this.config),b=a=>{C(`Error from idle pool client: ${a.message} %O`,a),this.options?.onPoolError?.(a)};return a.on("error",b),new F(a,this.options,async()=>{this.externalPool?this.options?.disposeExternalPool?(await this.externalPool.end(),this.externalPool=null):this.externalPool.removeListener("error",b):await a.end()})}async connectToShadowDb(){let a=await this.connect(),b=`prisma_migrate_shadow_db_${globalThis.crypto.randomUUID()}`;await a.executeScript(`CREATE DATABASE "${b}"`);let c=new f.default.Pool({...this.config,database:b});return new F(c,void 0,async()=>{await a.executeScript(`DROP DATABASE "${b}"`),await c.end()})}};a.s(["PrismaPg",()=>G]),c()}catch(a){c(a)}},!1),17429,a=>a.a(async(b,c)=>{try{let h,i;var d=a.i(57161),e=a.i(33803),f=a.i(54969),g=b([e,f]);[e,f]=g.then?(await g)():g;let j=globalThis.prisma??(h=new f.Pool({connectionString:process.env.DATABASE_URL}),i=new e.PrismaPg(h),new d.PrismaClient({adapter:i}));a.s(["prisma",0,j]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=waliet_b1651461._.js.map