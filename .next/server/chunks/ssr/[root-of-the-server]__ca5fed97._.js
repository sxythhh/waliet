module.exports=[57161,(a,b,c)=>{b.exports=a.x("@prisma/client-5551ed320f9fac8d",()=>require("@prisma/client-5551ed320f9fac8d"))},54969,a=>a.a(async(b,c)=>{try{let b=await a.y("pg-0af994d0a334f027");a.n(b),c()}catch(a){c(a)}},!0),97227,a=>{"use strict";var b=a.i(88924),c=a.i(1124),d=a.i(89409),e=a.i(61020);let f=(0,d.cva)("rounded-lg bg-card text-card-foreground transition-all duration-[var(--duration-normal)]",{variants:{variant:{default:"",bordered:"border border-border",ghost:"border-none bg-transparent",elevated:"border border-border/50 shadow-[var(--shadow-sm)]",outlined:"border-2 border-border bg-transparent",interactive:"border border-border hover:border-primary/50 hover:shadow-[var(--shadow-md)] cursor-pointer",stat:"border border-border p-0",featured:"border-2 border-primary/20 shadow-[var(--shadow-md)]",muted:"bg-muted/30 border border-border-subtle"}},defaultVariants:{variant:"default"}}),g=c.forwardRef(({className:a,variant:c,...d},g)=>(0,b.jsx)("div",{ref:g,className:(0,e.cn)(f({variant:c,className:a})),...d}));g.displayName="Card";let h=(0,d.cva)("flex flex-col",{variants:{spacing:{none:"space-y-0",sm:"space-y-1",default:"space-y-1.5",lg:"space-y-2"},padding:{none:"p-0",sm:"p-3",default:"p-6",lg:"p-8"}},defaultVariants:{spacing:"default",padding:"default"}});c.forwardRef(({className:a,spacing:c,padding:d,...f},g)=>(0,b.jsx)("div",{ref:g,className:(0,e.cn)(h({spacing:c,padding:d,className:a})),...f})).displayName="CardHeader",c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("h3",{ref:d,className:(0,e.cn)("text-2xl font-semibold leading-none tracking-tight",a),...c})).displayName="CardTitle",c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("p",{ref:d,className:(0,e.cn)("text-sm text-muted-foreground",a),...c})).displayName="CardDescription";let i=(0,d.cva)("",{variants:{padding:{none:"p-0",sm:"p-3 pt-0",default:"p-6 pt-0",lg:"p-8 pt-0"}},defaultVariants:{padding:"default"}}),j=c.forwardRef(({className:a,padding:c,...d},f)=>(0,b.jsx)("div",{ref:f,className:(0,e.cn)(i({padding:c,className:a})),...d}));j.displayName="CardContent";let k=(0,d.cva)("flex items-center",{variants:{padding:{none:"p-0",sm:"p-3 pt-0",default:"p-6 pt-0",lg:"p-8 pt-0"},justify:{start:"justify-start",center:"justify-center",end:"justify-end",between:"justify-between"}},defaultVariants:{padding:"default",justify:"start"}});c.forwardRef(({className:a,padding:c,justify:d,...f},g)=>(0,b.jsx)("div",{ref:g,className:(0,e.cn)(k({padding:c,justify:d,className:a})),...f})).displayName="CardFooter",a.s(["Card",()=>g,"CardContent",()=>j])},11403,a=>a.a(async(b,c)=>{try{var d=a.i(97220),e=a.i(27147),f=a.i(17429),g=b([f]);async function h(){try{let a=await (0,d.cookies)();if(a.get("waliet-logged-out")?.value==="true")return null;let b=null;{let a=await (0,d.headers)(),c=a.get("x-whop-user-token");if(console.log("[Auth] Token present:",!!c),!c)return console.error("[Auth] No Whop token found in headers"),null;try{b=(await e.whopsdk.verifyUserToken(a)).userId,console.log("[Auth] Verified userId:",b)}catch(a){return console.error("[Auth] Token verification failed:",a),null}}if(!b)return null;let c=await e.whopsdk.users.retrieve(b);return{userId:b,name:c.name,username:c.username,email:c.email,profilePicUrl:c.profile_picture?.url||void 0}}catch{return null}}async function i(a){return f.prisma.user.upsert({where:{whopUserId:a.userId},update:{name:a.name,avatar:a.profilePicUrl||null,email:a.email||void 0},create:{whopUserId:a.userId,name:a.name,avatar:a.profilePicUrl||null,email:a.email||null},include:{sellerProfile:!0}})}async function j(){let a=await h();if(!a)return null;let b=await i(a);return{...a,user:b}}async function k(a,b){try{return(await e.whopsdk.users.checkAccess(a,{id:b})).has_access}catch{return!1}}[f]=g.then?(await g)():g,a.s(["checkExperienceAccess",()=>k,"getAuthenticatedUser",()=>j]),c()}catch(a){c(a)}},!1),23849,a=>{"use strict";a.s(["DashboardLayout",()=>b]);let b=(0,a.i(9897).registerClientReference)(function(){throw Error("Attempted to call DashboardLayout() from the server but DashboardLayout is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/waliet/components/layout/DashboardLayout.tsx <module evaluation>","DashboardLayout")},81704,a=>{"use strict";a.s(["DashboardLayout",()=>b]);let b=(0,a.i(9897).registerClientReference)(function(){throw Error("Attempted to call DashboardLayout() from the server but DashboardLayout is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/waliet/components/layout/DashboardLayout.tsx","DashboardLayout")},27709,a=>{"use strict";a.i(23849);var b=a.i(81704);a.n(b)},88540,a=>a.a(async(b,c)=>{try{var d=a.i(88924),e=a.i(11403),f=a.i(27709),g=a.i(97227),h=b([e]);async function i({children:a,params:b}){let{experienceId:c}=await b,h=await (0,e.getAuthenticatedUser)();return h?await (0,e.checkExperienceAccess)(c,h.userId)?(0,d.jsx)(f.DashboardLayout,{experienceId:c,user:{id:h.user.id,name:h.user.name,avatar:h.user.avatar,sellerProfile:h.user.sellerProfile?{id:h.user.sellerProfile.id}:null},children:a}):(0,d.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center p-6",children:(0,d.jsx)(g.Card,{children:(0,d.jsxs)(g.CardContent,{className:"py-8 text-center",children:[(0,d.jsx)("h1",{className:"text-xl font-semibold text-foreground mb-2",children:"Access Denied"}),(0,d.jsx)("p",{className:"text-muted-foreground",children:"You don't have access to this experience."})]})})}):(0,d.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center p-6",children:(0,d.jsx)(g.Card,{children:(0,d.jsxs)(g.CardContent,{className:"py-8 text-center",children:[(0,d.jsx)("h1",{className:"text-xl font-semibold text-foreground mb-2",children:"Authentication Required"}),(0,d.jsx)("p",{className:"text-muted-foreground",children:"Please access this page through your Whop community."})]})})})}[e]=h.then?(await h)():h,a.s(["default",()=>i]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__ca5fed97._.js.map