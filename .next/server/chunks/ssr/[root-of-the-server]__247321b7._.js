module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},57161,(a,b,c)=>{b.exports=a.x("@prisma/client-5551ed320f9fac8d",()=>require("@prisma/client-5551ed320f9fac8d"))},54969,a=>a.a(async(b,c)=>{try{let b=await a.y("pg-0af994d0a334f027");a.n(b),c()}catch(a){c(a)}},!0),3825,a=>{a.n(a.i(29313))},54053,a=>{a.n(a.i(21252))},80735,a=>{a.n(a.i(3222))},58692,a=>{a.n(a.i(83721))},77539,a=>{a.n(a.i(15365))},97227,a=>{"use strict";var b=a.i(88924),c=a.i(1124),d=a.i(89409),e=a.i(61020);let f=(0,d.cva)("rounded-lg bg-card text-card-foreground transition-all duration-[var(--duration-normal)]",{variants:{variant:{default:"",bordered:"border border-border",ghost:"border-none bg-transparent",elevated:"border border-border/50 shadow-[var(--shadow-sm)]",outlined:"border-2 border-border bg-transparent",interactive:"border border-border hover:border-primary/50 hover:shadow-[var(--shadow-md)] cursor-pointer",stat:"border border-border p-0",featured:"border-2 border-primary/20 shadow-[var(--shadow-md)]",muted:"bg-muted/30 border border-border-subtle"}},defaultVariants:{variant:"default"}}),g=c.forwardRef(({className:a,variant:c,...d},g)=>(0,b.jsx)("div",{ref:g,className:(0,e.cn)(f({variant:c,className:a})),...d}));g.displayName="Card";let h=(0,d.cva)("flex flex-col",{variants:{spacing:{none:"space-y-0",sm:"space-y-1",default:"space-y-1.5",lg:"space-y-2"},padding:{none:"p-0",sm:"p-3",default:"p-6",lg:"p-8"}},defaultVariants:{spacing:"default",padding:"default"}});c.forwardRef(({className:a,spacing:c,padding:d,...f},g)=>(0,b.jsx)("div",{ref:g,className:(0,e.cn)(h({spacing:c,padding:d,className:a})),...f})).displayName="CardHeader",c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("h3",{ref:d,className:(0,e.cn)("text-2xl font-semibold leading-none tracking-tight",a),...c})).displayName="CardTitle",c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("p",{ref:d,className:(0,e.cn)("text-sm text-muted-foreground",a),...c})).displayName="CardDescription";let i=(0,d.cva)("",{variants:{padding:{none:"p-0",sm:"p-3 pt-0",default:"p-6 pt-0",lg:"p-8 pt-0"}},defaultVariants:{padding:"default"}}),j=c.forwardRef(({className:a,padding:c,...d},f)=>(0,b.jsx)("div",{ref:f,className:(0,e.cn)(i({padding:c,className:a})),...d}));j.displayName="CardContent";let k=(0,d.cva)("flex items-center",{variants:{padding:{none:"p-0",sm:"p-3 pt-0",default:"p-6 pt-0",lg:"p-8 pt-0"},justify:{start:"justify-start",center:"justify-center",end:"justify-end",between:"justify-between"}},defaultVariants:{padding:"default",justify:"start"}});c.forwardRef(({className:a,padding:c,justify:d,...f},g)=>(0,b.jsx)("div",{ref:g,className:(0,e.cn)(k({padding:c,justify:d,className:a})),...f})).displayName="CardFooter",a.s(["Card",()=>g,"CardContent",()=>j])},39810,a=>{a.n(a.i(46085))},78408,a=>a.a(async(b,c)=>{try{var d=a.i(88924),e=a.i(97220),f=a.i(27147),g=a.i(17429),h=a.i(97227),i=a.i(61020),j=b([g]);async function k({params:a}){let b,{companyId:c}=await a;try{let a=await (0,e.headers)();b=(await f.whopsdk.verifyUserToken(a)).userId}catch{return(0,d.jsx)("div",{className:"min-h-screen bg-[var(--waliet-bg)] flex items-center justify-center p-6",children:(0,d.jsxs)(h.Card,{className:"max-w-md text-center",children:[(0,d.jsx)("h1",{className:"text-xl font-semibold text-[var(--waliet-text)] mb-2",children:"Access Required"}),(0,d.jsx)("p",{className:"text-[var(--waliet-text-secondary)]",children:"Please access this page through your Whop dashboard."})]})})}let j=await f.whopsdk.users.checkAccess(c,{id:b});if("admin"!==j.access_level)return(0,d.jsx)("div",{className:"min-h-screen bg-[var(--waliet-bg)] flex items-center justify-center p-6",children:(0,d.jsxs)(h.Card,{className:"max-w-md text-center",children:[(0,d.jsx)("h1",{className:"text-xl font-semibold text-[var(--waliet-text)] mb-2",children:"Admin Access Required"}),(0,d.jsx)("p",{className:"text-[var(--waliet-text-secondary)]",children:"You need admin access to view this dashboard."})]})});let k=await g.prisma.communityConfig.findUnique({where:{whopCompanyId:c}});k||(k=await g.prisma.communityConfig.create({data:{whopCompanyId:c}}));let l=new Date(Date.now()-2592e6),[m,n,o]=await Promise.all([g.prisma.sellerProfile.count({where:{isActive:!0}}),g.prisma.session.count({where:{status:"COMPLETED",endedAt:{gte:l}}}),g.prisma.purchase.aggregate({where:{status:"COMPLETED",communityId:c,createdAt:{gte:l}},_sum:{totalAmount:!0}})]),p=o._sum.totalAmount||0,q=Math.round(p*(k.communityFeeBps/1e4));return(0,d.jsx)("div",{className:"min-h-screen bg-[var(--waliet-bg)] p-6",children:(0,d.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,d.jsx)("h1",{className:"text-2xl font-semibold text-[var(--waliet-text)] mb-6",children:"Waliet Dashboard"}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[(0,d.jsxs)(h.Card,{children:[(0,d.jsx)("p",{className:"text-[var(--waliet-text-secondary)] text-sm",children:"Your Share"}),(0,d.jsx)("p",{className:"text-3xl font-semibold text-[var(--waliet-accent)] mt-1",children:(0,i.formatCents)(q)}),(0,d.jsx)("p",{className:"text-[var(--waliet-text-tertiary)] text-sm mt-1",children:"This month"})]}),(0,d.jsxs)(h.Card,{children:[(0,d.jsx)("p",{className:"text-[var(--waliet-text-secondary)] text-sm",children:"Total Volume"}),(0,d.jsx)("p",{className:"text-3xl font-semibold text-[var(--waliet-text)] mt-1",children:(0,i.formatCents)(p)}),(0,d.jsx)("p",{className:"text-[var(--waliet-text-tertiary)] text-sm mt-1",children:"This month"})]}),(0,d.jsxs)(h.Card,{children:[(0,d.jsx)("p",{className:"text-[var(--waliet-text-secondary)] text-sm",children:"Active Sellers"}),(0,d.jsx)("p",{className:"text-3xl font-semibold text-[var(--waliet-text)] mt-1",children:m}),(0,d.jsx)("p",{className:"text-[var(--waliet-text-tertiary)] text-sm mt-1",children:"Listing time"})]}),(0,d.jsxs)(h.Card,{children:[(0,d.jsx)("p",{className:"text-[var(--waliet-text-secondary)] text-sm",children:"Sessions"}),(0,d.jsx)("p",{className:"text-3xl font-semibold text-[var(--waliet-text)] mt-1",children:n}),(0,d.jsx)("p",{className:"text-[var(--waliet-text-tertiary)] text-sm mt-1",children:"This month"})]})]}),(0,d.jsxs)(h.Card,{children:[(0,d.jsx)("h2",{className:"font-semibold text-[var(--waliet-text)] mb-4",children:"Configuration"}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between py-3 border-b border-[var(--waliet-border)]",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-[var(--waliet-text)]",children:"Revenue Share"}),(0,d.jsx)("p",{className:"text-sm text-[var(--waliet-text-secondary)]",children:"Your cut of each transaction"})]}),(0,d.jsxs)("span",{className:"text-xl font-semibold text-[var(--waliet-text)]",children:[k.communityFeeBps/100,"%"]})]}),(0,d.jsxs)("div",{className:"flex items-center justify-between py-3 border-b border-[var(--waliet-border)]",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-[var(--waliet-text)]",children:"Platform Fee"}),(0,d.jsx)("p",{className:"text-sm text-[var(--waliet-text-secondary)]",children:"Waliet's fee on each transaction"})]}),(0,d.jsx)("span",{className:"text-xl font-semibold text-[var(--waliet-text)]",children:"8%"})]}),(0,d.jsxs)("div",{className:"flex items-center justify-between py-3",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-[var(--waliet-text)]",children:"Require Approval"}),(0,d.jsx)("p",{className:"text-sm text-[var(--waliet-text-secondary)]",children:"New sellers need your approval"})]}),(0,d.jsx)("span",{className:"text-xl font-semibold text-[var(--waliet-text)]",children:k.requireApproval?"Yes":"No"})]})]})]})]})})}[g]=j.then?(await j)():j,a.s(["default",()=>k]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__247321b7._.js.map