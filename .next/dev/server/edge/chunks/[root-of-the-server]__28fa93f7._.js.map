{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/waliet/middleware.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport type { NextRequest } from \"next/server\";\n\nexport function middleware(request: NextRequest) {\n  // Whop iframe passes JWT in x-whop-user-token header\n  // The actual verification happens in API routes using whopsdk.verifyUserToken\n\n  // For API routes, ensure the header exists (except webhooks)\n  if (request.nextUrl.pathname.startsWith(\"/api/\")) {\n    // Webhook endpoints don't need user auth\n    if (request.nextUrl.pathname.startsWith(\"/api/webhooks/\")) {\n      return NextResponse.next();\n    }\n\n    // Health check endpoint\n    if (request.nextUrl.pathname === \"/api/health\") {\n      return NextResponse.next();\n    }\n\n    const userToken = request.headers.get(\"x-whop-user-token\");\n    if (!userToken) {\n      return NextResponse.json(\n        { error: \"Authentication required\" },\n        { status: 401 }\n      );\n    }\n  }\n\n  return NextResponse.next();\n}\n\nexport const config = {\n  matcher: [\"/api/:path*\"],\n};\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;;AAGO,SAAS,WAAW,OAAoB;IAC7C,qDAAqD;IACrD,8EAA8E;IAE9E,6DAA6D;IAC7D,IAAI,QAAQ,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,UAAU;QAChD,yCAAyC;QACzC,IAAI,QAAQ,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,mBAAmB;YACzD,OAAO,0MAAY,CAAC,IAAI;QAC1B;QAEA,wBAAwB;QACxB,IAAI,QAAQ,OAAO,CAAC,QAAQ,KAAK,eAAe;YAC9C,OAAO,0MAAY,CAAC,IAAI;QAC1B;QAEA,MAAM,YAAY,QAAQ,OAAO,CAAC,GAAG,CAAC;QACtC,IAAI,CAAC,WAAW;YACd,OAAO,0MAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA0B,GACnC;gBAAE,QAAQ;YAAI;QAElB;IACF;IAEA,OAAO,0MAAY,CAAC,IAAI;AAC1B;AAEO,MAAM,SAAS;IACpB,SAAS;QAAC;KAAc;AAC1B"}}]
}